IMPORTANTE: ANTES DE HACER NADA NUEVO, VERIFICA EL C√ìDIGO Y LO YA IMPLEMENTADO (NO QUIERO REHACER NI ROMPER NADA)

CONTEXTO
He le√≠do tu an√°lisis/presupuesto. Sospecho que varias cosas ya est√°n parcialmente implementadas (por ejemplo prefijos Telegram, m√≠nimos, DRY_RUN, validaci√≥n final). Necesito que revises el c√≥digo actual y confirmes qu√© existe exactamente antes de volver a implementarlo.

INSTRUCCIONES OBLIGATORIAS (VERIFICACI√ìN PREVIA)
1) Auditor√≠a de ‚Äúya existe / parcial / falta‚Äù
Para cada √≠tem (H, A, B, C, D, E, endpoint test), confirma:
- Estado: ‚úÖ EXISTE / üü° PARCIAL / ‚ùå FALTA
- Evidencia: archivo + funci√≥n + l√≠neas
- Si est√° PARCIAL: qu√© falta exactamente y por qu√© (en 2‚Äì3 bullets)
- Si est√° EXISTE: NO lo toques; solo a√±ade tests/ajustes m√≠nimos si hace falta.

Lista a auditar:
H) UI Modo de Posici√≥n (selector SINGLE/DCA/SMART_GUARD)
A) 2 slots por par (sgMaxOpenLotsPerPair) SOLO en SMART_GUARD
B) openedMode + lotId en posiciones (persistencia + UI + eventos)
C) Separaci√≥n de m√≠nimos (MIN_ORDER_USD vs MIN_ORDER_ABSOLUTE) + mensajes claros
D) Cierre FIFO por lotes (compro X / vendo X por lote) con parciales
E) Bot√≥n cerrar posici√≥n manual (market) + trazabilidad + excluir del training por defecto
F) Telegram prefijos (ya dijiste ‚úÖ) ‚Äî verificar que se aplica a TODOS los mensajes
G) Validaci√≥n/tests (evidencia en /api/events)
+ Endpoint de test: POST /api/test/signal (solo DEV/DRY_RUN)

2) No duplicar l√≥gica ni crear m√≥dulos nuevos
- Reutiliza funciones existentes.
- Si hay que cambiar schema, hazlo solo si es imprescindible y minimiza migraciones.

3) Prioridad de ejecuci√≥n (SI Y SOLO SI TRAS AUDITOR√çA FALTA)
- Paso 1: Endpoint /api/test/signal (solo REPLIT/DEV, DRY_RUN) para probar SMART_GUARD sin depender del mercado.
- Paso 2: H + C (bajo riesgo) solo si no existen o est√°n incompletos.
- Paso 3: A + B (slots + openedMode/lotId) solo si realmente faltan (y con migraci√≥n m√≠nima).
- Paso 4: D + E (FIFO + cierre manual), √∫ltimo, por ser lo m√°s complejo.

4) Requisito de seguridad para el endpoint test (OBLIGATORIO)
- Solo disponible si env=REPLIT/DEV o dryRun=true.
- Debe registrar eventos (DECISION/TRADE_SKIPPED) pero jam√°s enviar orden real.
- Debe permitir forzar casos:
  - MIN_ORDER_USD
  - SMART_GUARD_POSITION_EXISTS
  - SMART_GUARD_MAX_LOTS_REACHED

5) Entregable previo a implementar
Antes de tocar nada, devu√©lveme una tabla/resumen con:
- √çtem -> Estado -> Evidencia (archivo/l√≠neas) -> Acci√≥n propuesta (si aplica)

NOTA
El ‚Äú1000‚Äù ya qued√≥ aclarado: no hay seed; fue edici√≥n manual previa. No volver a tocar defaults si ya est√°n bien.

OBJETIVO FINAL
Evitar rehacer y evitar regresiones: solo completar lo que falte con cambios m√≠nimos y verificables.
