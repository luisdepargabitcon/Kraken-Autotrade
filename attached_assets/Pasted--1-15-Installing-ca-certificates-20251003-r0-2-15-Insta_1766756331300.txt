( 1/15) Installing ca-certificates (20251003-r0)
( 2/15) Installing docker-cli (29.1.3-r0)
( 3/15) Installing brotli-libs (1.2.0-r0)
( 4/15) Installing c-ares (1.34.6-r0)
( 5/15) Installing libunistring (1.4.1-r0)
( 6/15) Installing libidn2 (2.3.8-r0)
( 7/15) Installing nghttp2-libs (1.68.0-r0)
( 8/15) Installing nghttp3 (1.13.1-r0)
( 9/15) Installing libpsl (0.21.5-r3)
(10/15) Installing zstd-libs (1.5.7-r2)
(11/15) Installing libcurl (8.17.0-r1)
(12/15) Installing libexpat (2.7.3-r0)
(13/15) Installing pcre2 (10.47-r0)
(14/15) Installing git (2.52.0-r0)
(15/15) Installing git-init-template (2.52.0-r0)
Executing busybox-1.37.0-r29.trigger
Executing ca-certificates-20251003-r0.trigger
OK: 53 MiB in 33 packages

up to date, audited 611 packages in 9s

105 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (2 low, 8 moderate, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.7.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.7.0
npm notice To update run: npm install -g npm@11.7.0
npm notice
building client...
vite v7.1.12 building for production...
transforming...
✓ 2509 modules transformed.
rendering chunks...
[meta-images] no Replit deployment domain found, skipping meta tag updates
computing gzip size...
../dist/public/index.html                                                1.71 kB │ gzip:   0.66 kB
../dist/public/assets/dark_digital_hex_grid_background-CH-7zMzl.png  1,414.45 kB
../dist/public/assets/index-ClfIc-74.css                               112.36 kB │ gzip:  18.87 kB
../dist/public/assets/index-C0cpQDL4.js                              1,080.78 kB │ gzip: 304.20 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 32.59s
building server...

  dist/index.cjs  2.2mb ⚠️

⚡ Done in 1201ms
[migrate] Starting non-interactive database migration...
[migrate] Applying bot_config migrations...
[migrate] Applying open_positions migrations...
[migrate] Backfilling lot_id for existing positions...
[migrate] Checking lot_id uniqueness...
[migrate] lot_id unique constraint already exists
[migrate] Migration completed successfully!

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs

1:37:50 PM [websocket] [WS] Servidor WebSocket inicializado en /ws/events
1:37:50 PM [websocket] [WS-LOGS] Terminal WebSocket inicializado en /ws/logs (docker: true)
[startup] Kraken API credentials loaded from database
[telegram] Inicializando bot - Polling: ACTIVADO (Docker/NAS)
[startup] Telegram credentials loaded from database
1:37:50 PM [trading] [REGIME_PARAMS] enter=27 exit=23 hardExit=19 confirm=3 minHold=20 cooldown=60min
[telegram] Heartbeat iniciado (cada 12h)
[telegram] Reporte diario programado para las 14:00 (Europe/Madrid)
[storage] Schema issue detected, attempting auto-migration...
[schema] Migration completed. Columns added: bot_config.sg_max_open_lots_per_pair, bot_config.sg_pair_overrides, bot_config.dry_run_mode, bot_config.sg_min_entry_usd, bot_config.sg_allow_under_min, bot_config.sg_be_at_pct, bot_config.sg_trail_start_pct, bot_config.sg_trail_distance_pct, bot_config.sg_trail_step_pct, bot_config.sg_tp_fixed_enabled, bot_config.sg_tp_fixed_pct, bot_config.sg_scale_out_enabled, bot_config.sg_scale_out_pct, bot_config.sg_min_part_usd, bot_config.sg_scale_out_threshold, bot_config.sg_fee_cushion_pct, bot_config.sg_fee_cushion_auto, bot_config.regime_detection_enabled, open_positions.lot_id, open_positions.sg_break_even_activated, open_positions.sg_trailing_activated, open_positions.sg_current_stop_price, open_positions.sg_scale_out_done, open_positions.config_snapshot_json
[storage] Auto-migration successful, retrying getBotConfig...
[startup] Error loading API credentials: error: column "regime_router_enabled" does not exist
    at /app/dist/index.cjs:70:13356
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:37:51 PM [express] serving on port 5000
    at async /app/dist/index.cjs:70:28733
    at async I2.getBotConfig (/app/dist/index.cjs:70:31895)
    at async rJ (/app/dist/index.cjs:760:3097)
    at async /app/dist/index.cjs:794:5766 {
  length: 122,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '841',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
1:37:51 PM [express] GET /api/dashboard 500 in 68ms :: {"error":"Failed to get dashboard data"}
1:37:56 PM [express] GET /api/dashboard 500 in 27ms :: {"error":"Failed to get dashboard data"}
1:37:57 PM [express] GET /api/dashboard 500 in 106ms :: {"error":"Failed to get dashboard data"}
1:38:10 PM [express] GET /api/dashboard 500 in 27ms :: {"error":"Failed to get dashboard data"}
1:38:21 PM [express] GET /api/dashboard 500 in 27ms :: {"error":"Failed to get dashboard data"}
1:38:23 PM [express] GET /api/dashboard 500 in 42ms :: {"error":"Failed to get dashboard data"}
