./script/migrate.ts:27:    process.exit(1);
./script/migrate.ts:39:      'ALTER TABLE bot_config ADD COLUMN IF NOT EXISTS sg_min_entry_usd DECIMAL(10,2) DEFAULT 100.00',
./script/migrate.ts:59:      'ALTER TABLE open_positions ADD COLUMN IF NOT EXISTS sg_trailing_activated BOOLEAN DEFAULT false',
./script/migrate.ts:60:      'ALTER TABLE open_positions ADD COLUMN IF NOT EXISTS sg_current_stop_price DECIMAL(18,8)',
./script/migrate.ts:129:    process.exit(0);
./script/migrate.ts:133:    process.exit(1);
./script/build.ts:25:  "openai",
./script/build.ts:49:  const externals = allDeps.filter((dep) => !allowlist.includes(dep));
./script/build.ts:52:    entryPoints: ["server/index.ts"],
./script/build.ts:68:  process.exit(1);
./scripts/update-nas.sh:34:docker stop "$CONTAINER_NAME" 2>/dev/null || echo "      Contenedor no estaba corriendo"
./docker-compose.yml:7:    restart: unless-stopped
./docker-compose.yml:30:    restart: unless-stopped
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271372606.txt:5:>   entry_price, exit_price,
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271372606.txt:6:>   entry_amount, exit_amount,
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271372606.txt:11:  buy_txid>   entry_ts, exit_ts,
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271372606.txt:18: id  |  pair   |  entry_price   |   exit_price   | entry_amount | exit_amount |   cost_usd   | revenue_usd |   pnl_net    |  pnl_pct  | hold_time_minutes |        entry_ts         |         exit_ts         |      buy_txid       |      sell_txid
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:67: strategy_id       | text                        |           |          |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:70: entry_price       | numeric(18,8)               |           | not null |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:71: exit_price        | numeric(18,8)               |           |          |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:72: entry_amount      | numeric(18,8)               |           | not null |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:73: exit_amount       | numeric(18,8)               |           |          |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:74: entry_fee         | numeric(18,8)               |           | not null | '0'::numeric
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:75: exit_fee          | numeric(18,8)               |           |          |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:87: entry_ts          | timestamp without time zone |           | not null |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:88: exit_ts           | timestamp without time zone |           |          |
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:98:krakenbot=*# -- Ver duplicados etiquetados (por pair + entry_price + entry_amount)
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:99:krakenbot=*# SELECT pair, entry_price, entry_amount, COUNT(*) as count
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:102:krakenbot-*# GROUP BY pair, entry_price, entry_amount
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:106:WHE  pair   |  entry_price   | entry_amount | count
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:125:krakenbot-*# AND a.entry_price = b.entry_price
./attached_assets/Pasted--docker-exec-it-kraken-bot-db-psql-U-krakenbot-d-kraken_1766271231351.txt:126:krakenbot-*# AND a.entry_amount = b.entry_amount
./replit.md:24:- **Services**: KrakenService for exchange interaction, TelegramService for notifications, AiService for ML filter.
./replit.md:32:- **Core Loop**: Executes every 10-30 seconds for balance checks, resets, stop-loss/take-profit, and strategy analysis.
./replit.md:36:- **Position Modes**: SINGLE (one position per pair), DCA (multiple entries), and SMART_GUARD (intelligent capital protection).
./replit.md:40:- **Dynamic Adjustments**: Dynamic position sizing based on signal confidence.
./replit.md:44:- **Configuration Snapshot**: New positions store a snapshot of trading parameters at entry.
./replit.md:46:### SMART_GUARD Mode
./replit.md:47:- **Purpose**: Intelligent capital protection with strict entry validation.
./replit.md:57:  - `SMART_GUARD_ENTRY_USING_CONFIG_MIN`: Saldo suficiente, usa sgMinEntryUsd.
./replit.md:58:  - `SMART_GUARD_ENTRY_FALLBACK_TO_AVAILABLE`: Saldo insuficiente, usa saldo disponible.
./replit.md:59:  - `SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN`: Saldo < floorUsd (hard block).
./replit.md:60:  - `SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION`: Fee cushion reduce saldo por debajo de floorUsd.
./replit.md:61:- **Break-Even Protection**: Moves stop-loss to entry price + fees when profit reaches sgBeAtPct.
./replit.md:68:- **Telegram Alerts**: Notifications for key events (Break-Even activation, Trailing Stop activation/updates, Scale-Out execution) with 5-min throttle on trailing updates.
./replit.md:105:- **Purpose**: Machine learning filter to approve/reject trade signals based on historical performance.
./replit.md:106:- **Phases**: Red (data collection), Yellow (ready to train), Green (filter active).
./server/vite.ts:25:        process.exit(1);
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:7: strategy_id       | text                        |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:10: entry_price       | numeric(18,8)               |           | not null |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:11: exit_price        | numeric(18,8)               |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:12: entry_amount      | numeric(18,8)               |           | not null |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:13: exit_amount       | numeric(18,8)               |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:14: entry_fee         | numeric(18,8)               |           | not null | '0'::numeric
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:15: exit_fee          | numeric(18,8)               |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:27: entry_ts          | timestamp without time zone |           | not null |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:28: exit_ts           | timestamp without time zone |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:38:krakenbot=*# -- Ver duplicados etiquetados (por pair + entry_price + entry_amount)
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:39:krakenbot=*# SELECT pair, entry_price, entry_amount, COUNT(*) as count
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:42:krakenbot-*# GROUP BY pair, entry_price, entry_amount
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:46:WHE  pair   |  entry_price   | entry_amount | count
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:65:krakenbot-*# AND a.entry_price = b.entry_price
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270903982.txt:66:krakenbot-*# AND a.entry_amount = b.entry_amount
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:7: strategy_id       | text                        |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:10: entry_price       | numeric(18,8)               |           | not null |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:11: exit_price        | numeric(18,8)               |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:12: entry_amount      | numeric(18,8)               |           | not null |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:13: exit_amount       | numeric(18,8)               |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:14: entry_fee         | numeric(18,8)               |           | not null | '0'::numeric
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:15: exit_fee          | numeric(18,8)               |           |          |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:27: entry_ts          | timestamp without time zone |           | not null |
./attached_assets/Pasted-krakenbot-d-training-trades-Table-public-training-t-176_1766270858203.txt:28: exit_ts           | timestamp without time zone |           |          |
./server/routes.ts:96:      stop: async () => { await tradingEngine?.stop(); },
./server/routes.ts:149:          await tradingEngine.stop();
./server/routes.ts:253:  // === SMART_GUARD Per-Pair Overrides ===
./server/routes.ts:518:        strategy: botConfig?.strategy || "momentum",
./server/routes.ts:555:              const entryPrice = parseFloat(pos.entryPrice);
./server/routes.ts:557:              unrealizedPnlUsd = (currentPrice - entryPrice) * amount;
./server/routes.ts:558:              unrealizedPnlPct = ((currentPrice - entryPrice) / entryPrice) * 100;
./server/routes.ts:564:        const entryPrice = parseFloat(pos.entryPrice);
./server/routes.ts:565:        const entryValueUsd = entryPrice * amount;
./server/routes.ts:573:          entryValueUsd: entryValueUsd.toFixed(2),
./server/routes.ts:644:          currentPrice = parseFloat(position.entryPrice);
./server/routes.ts:655:        currentPrice = parseFloat(position.entryPrice);
./server/routes.ts:658:      const entryPrice = parseFloat(position.entryPrice);
./server/routes.ts:659:      const pnlUsd = (currentPrice - entryPrice) * amount;
./server/routes.ts:660:      const pnlPct = ((currentPrice - entryPrice) / entryPrice) * 100;
./server/routes.ts:670:        entryPrice,
./server/routes.ts:694:          exitPrice: currentPrice,
./server/routes.ts:707:          exitPrice: currentPrice,
./server/routes.ts:713:            : `Posici√≥n ${pair} cerrada exitosamente`,
./server/routes.ts:814:        entryPrice: dbPosition.entryPrice,
./server/routes.ts:1002:          const entryValueUsd = t.entryPrice ? parseFloat(t.entryPrice) * amount : null;
./server/routes.ts:1007:            entryValueUsd: entryValueUsd?.toFixed(2) || null,
./server/routes.ts:1461:          entryPrice: l.entryPrice,
./server/routes.ts:1532:      const filtered = level 
./server/routes.ts:1533:        ? events.filter(e => e.level === level.toUpperCase())
./server/routes.ts:1536:      res.json(filtered.map(e => {
./server/routes.ts:1691:      res.status(500).json({ errorCode: "TRAINING_ERROR", message: "Error interno al reentrenar el modelo" });
./server/routes.ts:1715:      res.status(500).json({ errorCode: "TRAINING_ERROR", message: `Error interno al entrenar el modelo: ${error.message}` });
./server/routes.ts:1719:  app.get("/api/ai/shadow/report", async (req, res) => {
./server/routes.ts:1724:      console.error("[api/ai/shadow/report] Error:", error.message);
./server/routes.ts:1725:      res.status(500).json({ errorCode: "SHADOW_REPORT_ERROR", message: "Error al obtener el informe de shadow" });
./server/routes.ts:1731:      const { filterEnabled, shadowEnabled, threshold } = req.body;
./server/routes.ts:1733:      if (filterEnabled !== undefined) {
./server/routes.ts:1734:        await aiService.toggleFilter(filterEnabled);
./server/routes.ts:1736:      if (shadowEnabled !== undefined) {
./server/routes.ts:1737:        await aiService.toggleShadow(shadowEnabled);
./server/routes.ts:1752:  // TEST ENDPOINT: Simular se√±al BUY para validar SMART_GUARD
./server/routes.ts:1755:  app.post("/api/test/signal", async (req, res) => {
./server/routes.ts:1774:        signal: z.enum(["BUY"]),
./server/routes.ts:1790:      const { pair, signal, price, forceOrderUsd, forceHasPosition, forceOpenLots } = parsed.data;
./server/routes.ts:1804:      // Obtener configuraci√≥n SMART_GUARD
./server/routes.ts:1831:        signal,
./server/routes.ts:1850:      // === VALIDACI√ìN 1: Posici√≥n abierta en SMART_GUARD/SINGLE ===
./server/routes.ts:1851:      if ((positionMode === "SINGLE" || positionMode === "SMART_GUARD") && hasPosition && openLots >= sgMaxOpenLotsPerPair) {
./server/routes.ts:1852:        const reason = positionMode === "SMART_GUARD" 
./server/routes.ts:1853:          ? (openLots >= sgMaxOpenLotsPerPair ? "SMART_GUARD_MAX_LOTS_REACHED" : "SMART_GUARD_POSITION_EXISTS")
./server/routes.ts:1865:          message: reason === "SMART_GUARD_MAX_LOTS_REACHED"
./server/routes.ts:1886:      else if (positionMode === "SMART_GUARD" && !sgAllowUnderMin && orderUsdFinal < sgMinEntryUsd) {
./server/routes.ts:1924:      console.error("[api/test/signal] Error:", error.message);
./server/routes.ts:1933:  // TEST ENDPOINT: Simular eventos SMART_GUARD para testing
./server/routes.ts:1954:        entryPrice: z.number().positive().default(100000),
./server/routes.ts:1957:        stopPrice: z.number().positive().optional(),
./server/routes.ts:1967:      const { event, pair, entryPrice, profitPct } = parsed.data;
./server/routes.ts:1969:      const currentPrice = parsed.data.currentPrice || entryPrice * (1 + profitPct / 100);
./server/routes.ts:1970:      const stopPrice = parsed.data.stopPrice || currentPrice * 0.98;
./server/routes.ts:1975:        entryPrice,
./server/routes.ts:1989:          message = `SMART_GUARD Break-Even activado en ${pair}`;
./server/routes.ts:1993:            `Entrada: $${entryPrice.toFixed(2)}\n` +
./server/routes.ts:1996:            `Stop movido a: $${stopPrice.toFixed(2)}`;
./server/routes.ts:1997:          await botLogger.info(event, message, { ...baseMeta, stopPrice });
./server/routes.ts:2002:          message = `SMART_GUARD Trailing Stop activado en ${pair}`;
./server/routes.ts:2006:            `Entrada: $${entryPrice.toFixed(2)}\n` +
./server/routes.ts:2009:            `Stop din√°mico: $${stopPrice.toFixed(2)}`;
./server/routes.ts:2010:          await botLogger.info(event, message, { ...baseMeta, stopPrice });
./server/routes.ts:2015:          const oldStop = stopPrice * 0.99;
./server/routes.ts:2016:          message = `SMART_GUARD Trailing Stop actualizado en ${pair}`;
./server/routes.ts:2020:            `Stop: $${oldStop.toFixed(2)} ‚Üí $${stopPrice.toFixed(2)}\n` +
./server/routes.ts:2022:          await botLogger.info(event, message, { ...baseMeta, stopPrice, oldStop });
./server/routes.ts:2029:          message = `SMART_GUARD Scale-Out ejecutado en ${pair}`;
./server/routes.ts:2070:        entryPrice: z.number().positive().default(100000),
./server/routes.ts:2078:      const { pair, amount, entryPrice } = parsed.data;
./server/routes.ts:2086:          entryPrice,
./server/routes.ts:2089:          strategy: "test",
./server/routes.ts:2090:          signalConfidence: 80,
./server/routes.ts:2091:          // SMART_GUARD flags
./server/routes.ts:2114:          pair, lotId, amount, entryPrice, pairLots, env: envInfo.env,
./server/routes.ts:2160:  // TEST ENDPOINT: Simular sizing SMART_GUARD v2
./server/routes.ts:2190:      // SMART_GUARD v2: sin buffer de slippage para sizing exacto
./server/routes.ts:2200:      // === SMART_GUARD v2 SIZING LOGIC ===
./server/routes.ts:2203:      let blocked = false;
./server/routes.ts:2208:        reasonCode = "SMART_GUARD_ENTRY_USING_CONFIG_MIN";
./server/routes.ts:2213:        reasonCode = "SMART_GUARD_ENTRY_FALLBACK_TO_AVAILABLE";
./server/routes.ts:2218:        reasonCode = "SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION";
./server/routes.ts:2219:        blocked = true;
./server/routes.ts:2224:        reasonCode = "SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN";
./server/routes.ts:2225:        blocked = true;
./server/routes.ts:2230:        blocked,
./server/storage.ts:62:  updateTradePnl(id: number, entryPrice: string, realizedPnlUsd: string, realizedPnlPct: string): Promise<void>;
./server/storage.ts:111:  getAiShadowReport(): Promise<{ total: number; blocked: number; blockedLosers: number; passedLosers: number }>;
./server/storage.ts:260:  async updateTradePnl(id: number, entryPrice: string, realizedPnlUsd: string, realizedPnlPct: string): Promise<void> {
./server/storage.ts:262:      .set({ entryPrice, realizedPnlUsd, realizedPnlPct })
./server/storage.ts:654:  async getAiShadowReport(): Promise<{ total: number; blocked: number; blockedLosers: number; passedLosers: number }> {
./server/storage.ts:659:    const blocked = allDecisions.filter(d => d.wouldBlock).length;
./server/storage.ts:660:    const blockedLosers = allDecisions.filter(d => d.wouldBlock && parseFloat(d.finalPnlNet || '0') < 0).length;
./server/storage.ts:661:    const passedLosers = allDecisions.filter(d => !d.wouldBlock && parseFloat(d.finalPnlNet || '0') < 0).length;
./server/storage.ts:663:    return { total, blocked, blockedLosers, passedLosers };
./server/storage.ts:755:      .orderBy(desc(trainingTradesTable.entryTs))
./server/storage.ts:841:        entryPrice: number;
./server/storage.ts:842:        entryAmount: number;
./server/storage.ts:844:        entryTs: Date;
./server/storage.ts:846:        entryFee: number;
./server/storage.ts:875:            const qtyRem = parseFloat(existing.qtyRemaining || existing.entryAmount || '0');
./server/storage.ts:888:                entryPrice: parseFloat(existing.entryPrice),
./server/storage.ts:889:                entryAmount: parseFloat(existing.entryAmount),
./server/storage.ts:891:                entryTs: new Date(existing.entryTs),
./server/storage.ts:893:                entryFee: parseFloat(existing.entryFee || '0'),
./server/storage.ts:896:                totalExitFee: parseFloat(existing.exitFee || '0'),
./server/storage.ts:897:                lastSellTs: existing.exitTs ? new Date(existing.exitTs) : null,
./server/storage.ts:898:                lastSellPrice: parseFloat(existing.exitPrice || '0'),
./server/storage.ts:905:          const entryFee = buyCost * KRAKEN_FEE_RATE;
./server/storage.ts:910:            entryPrice: trade.price,
./server/storage.ts:911:            entryAmount: trade.amount,
./server/storage.ts:914:            entryFee: entryFee.toFixed(8),
./server/storage.ts:915:            entryTs: tradeTime,
./server/storage.ts:927:            entryPrice: tradePrice,
./server/storage.ts:928:            entryAmount: tradeAmount,
./server/storage.ts:930:            entryTs: tradeTime,
./server/storage.ts:932:            entryFee,
./server/storage.ts:953:            const proportion = consumeQty / lot.entryAmount;
./server/storage.ts:967:              const pnlNet = pnlGross - lot.entryFee - lot.totalExitFee;
./server/storage.ts:969:              const holdTimeMinutes = Math.round((lot.lastSellTs!.getTime() - lot.entryTs.getTime()) / 60000);
./server/storage.ts:973:              const totalFeePct = ((lot.entryFee + lot.totalExitFee) / lot.costUsd) * 100;
./server/storage.ts:988:              const avgExitPrice = lot.totalRevenue / lot.entryAmount;
./server/storage.ts:993:                exitPrice: avgExitPrice.toFixed(8),
./server/storage.ts:994:                exitAmount: lot.entryAmount.toFixed(8),
./server/storage.ts:997:                exitFee: lot.totalExitFee.toFixed(8),
./server/storage.ts:1003:                exitTs: lot.lastSellTs!,
./server/storage.ts:1028:        if (lot.qtyRemaining > QTY_EPSILON && lot.qtyRemaining < lot.entryAmount) {
./server/storage.ts:1040:      const qty = parseFloat(trade.qtyRemaining || trade.entryAmount || '0');
./server/storage.ts:1061:      { column: 'sg_min_entry_usd', table: 'bot_config' },
./server/storage.ts:1080:      { column: 'sg_trailing_activated', table: 'open_positions' },
./server/storage.ts:1081:      { column: 'sg_current_stop_price', table: 'open_positions' },
./server/storage.ts:1119:        { table: 'bot_config', column: 'sg_min_entry_usd', sql: 'ALTER TABLE bot_config ADD COLUMN IF NOT EXISTS sg_min_entry_usd DECIMAL(10,2) DEFAULT 100.00' },
./server/storage.ts:1137:        { table: 'open_positions', column: 'sg_trailing_activated', sql: 'ALTER TABLE open_positions ADD COLUMN IF NOT EXISTS sg_trailing_activated BOOLEAN DEFAULT false' },
./server/storage.ts:1138:        { table: 'open_positions', column: 'sg_current_stop_price', sql: 'ALTER TABLE open_positions ADD COLUMN IF NOT EXISTS sg_current_stop_price DECIMAL(18,8)' },
./file_list.txt:202:./.cache/.bun/install/cache/autoprefixer@10.4.21@@@1/lib/hacks/backdrop-filter.js
./file_list.txt:213:./.cache/.bun/install/cache/autoprefixer@10.4.21@@@1/lib/hacks/filter.js
./file_list.txt:214:./.cache/.bun/install/cache/autoprefixer@10.4.21@@@1/lib/hacks/filter-value.js
./file_list.txt:457:./.cache/.bun/install/cache/@babel/helper-compilation-targets@7.27.2@@@1/lib/filter-items.js
./file_list.txt:458:./.cache/.bun/install/cache/@babel/helper-compilation-targets@7.27.2@@@1/lib/filter-items.js.map
./file_list.txt:1455:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/css-backdrop-filter.js
./file_list.txt:1459:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/css-boxshadow.js
./file_list.txt:1487:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/css-filter-function.js
./file_list.txt:1488:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/css-filters.js
./file_list.txt:1568:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/css-textshadow.js
./file_list.txt:1589:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/declarative-shadow-dom.js
./file_list.txt:1838:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/shadowdom.js
./file_list.txt:1839:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/shadowdomv1.js
./file_list.txt:1856:./.cache/.bun/install/cache/caniuse-lite@1.0.30001753@@@1/data/features/svg-filters.js
./file_list.txt:2304:./.cache/.bun/install/cache/d3-array@3.2.4@@@1/src/filter.js
./file_list.txt:15858:./.cache/.bun/install/cache/dom-helpers@5.2.1@@@1/cjs/filterEventHandler.d.ts
./file_list.txt:15859:./.cache/.bun/install/cache/dom-helpers@5.2.1@@@1/cjs/filterEventHandler.js
./file_list.txt:15977:./.cache/.bun/install/cache/dom-helpers@5.2.1@@@1/esm/filterEventHandler.d.ts
./file_list.txt:15978:./.cache/.bun/install/cache/dom-helpers@5.2.1@@@1/esm/filterEventHandler.js
./file_list.txt:16056:./.cache/.bun/install/cache/dom-helpers@5.2.1@@@1/filterEventHandler/package.json
./file_list.txt:18643:./.cache/.bun/install/cache/enhanced-resolve@5.18.3@@@1/lib/util/entrypoints.js
./file_list.txt:18986:./.cache/.bun/install/cache/framer-motion@12.23.24@@@1/dist/es/motion/features/animation/exit.mjs
./file_list.txt:19013:./.cache/.bun/install/cache/framer-motion@12.23.24@@@1/dist/es/projection/geometry/models.mjs
./file_list.txt:19023:./.cache/.bun/install/cache/framer-motion@12.23.24@@@1/dist/es/projection/styles/scale-box-shadow.mjs
./file_list.txt:19058:./.cache/.bun/install/cache/framer-motion@12.23.24@@@1/dist/es/render/dom/utils/filter-props.mjs
./file_list.txt:20186:./.cache/.bun/install/cache/lodash@4.17.21@@@1/filter.js
./file_list.txt:20308:./.cache/.bun/install/cache/lodash@4.17.21@@@1/fp/filter.js
./file_list.txt:21913:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/circle-stop.js
./file_list.txt:21914:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/circle-stop.js.map
./file_list.txt:22469:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/filter.js
./file_list.txt:22470:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/filter.js.map
./file_list.txt:22471:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/filter-x.js
./file_list.txt:22472:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/filter-x.js.map
./file_list.txt:23033:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/list-filter.js
./file_list.txt:23034:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/list-filter.js.map
./file_list.txt:23035:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/list-filter-plus.js
./file_list.txt:23036:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/list-filter-plus.js.map
./file_list.txt:23289:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/monitor-stop.js
./file_list.txt:23290:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/monitor-stop.js.map
./file_list.txt:23993:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-high.js
./file_list.txt:23994:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-high.js.map
./file_list.txt:23995:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal.js
./file_list.txt:23996:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal.js.map
./file_list.txt:23997:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-low.js
./file_list.txt:23998:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-low.js.map
./file_list.txt:23999:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-medium.js
./file_list.txt:24000:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-medium.js.map
./file_list.txt:24001:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-zero.js
./file_list.txt:24002:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/signal-zero.js.map
./file_list.txt:24217:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/square-stop.js
./file_list.txt:24218:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/square-stop.js.map
./file_list.txt:24255:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/stop-circle.js
./file_list.txt:24256:./.cache/.bun/install/cache/lucide-react@0.545.0@@@1/dist/esm/icons/stop-circle.js.map
./file_list.txt:24965:./.cache/.bun/install/cache/motion-dom@12.23.23@@@1/dist/es/value/types/complex/filter.mjs
./file_list.txt:25194:./.cache/.bun/install/cache/passport-local@1.0.0@@@1/lib/strategy.js
./file_list.txt:25199:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/.jshintrc
./file_list.txt:25200:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/lib/index.js
./file_list.txt:25201:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/lib/strategy.js
./file_list.txt:25202:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/LICENSE
./file_list.txt:25203:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/package.json
./file_list.txt:25204:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/README.md
./file_list.txt:25205:./.cache/.bun/install/cache/passport-strategy@1.0.0@@@1/.travis.yml
./file_list.txt:27702:./.cache/.bun/install/cache/rollup@4.52.5@@@1/dist/es/shared/node-entry.js
./file_list.txt:28257:./.cache/.bun/install/cache/@tanstack/react-query@5.60.5@@@1/build/codemods/src/v5/remove-overloads/transformers/filter-aware-usage-transformer.cjs
./file_list.txt:28978:./.cache/.bun/install/cache/@types/passport-strategy@0.2.38@@@1/index.d.ts
./file_list.txt:28979:./.cache/.bun/install/cache/@types/passport-strategy@0.2.38@@@1/LICENSE
./file_list.txt:28980:./.cache/.bun/install/cache/@types/passport-strategy@0.2.38@@@1/package.json
./file_list.txt:28981:./.cache/.bun/install/cache/@types/passport-strategy@0.2.38@@@1/README.md
./file_list.txt:29314:./.cache/.bun/install/cache/victory-vendor@36.9.2@@@1/lib-vendor/d3-array/src/filter.js
./file_list.txt:30761:./.cache/typescript/5.6/node_modules/@types/passport-strategy/index.d.ts
./file_list.txt:30762:./.cache/typescript/5.6/node_modules/@types/passport-strategy/LICENSE
./file_list.txt:30763:./.cache/typescript/5.6/node_modules/@types/passport-strategy/package.json
./file_list.txt:30764:./.cache/typescript/5.6/node_modules/@types/passport-strategy/README.md
./server/tests/smartguard-sizing-test.ts:2: * SMART_GUARD Sizing Test Script
./server/tests/smartguard-sizing-test.ts:50:  if (positionMode === "SMART_GUARD" && !sgAllowUnderMin && orderUsdFinal < sgMinEntryUsd) {
./server/tests/smartguard-sizing-test.ts:120:    positionMode: "SMART_GUARD",
./server/tests/smartguard-sizing-test.ts:202:console.log("SMART_GUARD SIZING TEST SCRIPT");
./server/tests/smartguard-sizing-test.ts:243:process.exit(failed > 0 ? 1 : 0);
./package-lock.json:1385:      "integrity": "sha512-sGnvb5dmrJaKEZ+LDIpguvdX3bDlEllmv4/ClQ9awcmCZrlx5jQyyMWFM5kBI+EyNOCDDiKk8il0zeuX3Zlg/w==",
./package-lock.json:4664:        "@types/passport-strategy": "*"
./package-lock.json:4667:    "node_modules/@types/passport-strategy": {
./package-lock.json:4669:      "resolved": "https://registry.npmjs.org/@types/passport-strategy/-/passport-strategy-0.2.38.tgz",
./package-lock.json:5936:        "stop-iteration-iterator": "^1.1.0",
./package-lock.json:7915:        "passport-strategy": "1.x.x",
./package-lock.json:7932:        "passport-strategy": "1.x.x"
./package-lock.json:7938:    "node_modules/passport-strategy": {
./package-lock.json:7940:      "resolved": "https://registry.npmjs.org/passport-strategy/-/passport-strategy-1.0.0.tgz",
./package-lock.json:9231:    "node_modules/stop-iteration-iterator": {
./package-lock.json:9233:      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
./server/services/terminalWebSocket.ts:125:        this.stopClientProcess(client);
./server/services/terminalWebSocket.ts:132:        this.stopClientProcess(client);
./server/services/terminalWebSocket.ts:142:    return PREDEFINED_SOURCES.filter(source => {
./server/services/terminalWebSocket.ts:156:        this.stopClientProcess(client);
./server/services/terminalWebSocket.ts:176:    this.stopClientProcess(client);
./server/services/terminalWebSocket.ts:211:        const lines = data.toString().split("\n").filter((l: string) => l.trim());
./server/services/terminalWebSocket.ts:218:        const lines = data.toString().split("\n").filter((l: string) => l.trim());
./server/services/terminalWebSocket.ts:229:            payload: { sourceId, exitCode: code } 
./server/services/terminalWebSocket.ts:255:  private stopClientProcess(client: WsClient): void {
./server/services/terminalWebSocket.ts:271:          this.stopClientProcess(client);
./server/services/terminalWebSocket.ts:308:      this.stopClientProcess(client);
./server/services/aiService.ts:22:  confidence: number;
./server/services/aiService.ts:39:  filterEnabled: boolean;
./server/services/aiService.ts:40:  shadowEnabled: boolean;
./server/services/aiService.ts:41:  modelLoaded: boolean;
./server/services/aiService.ts:67:  modelVersion: string | null;
./server/services/aiService.ts:75:const MODEL_DIR = "/tmp/models";
./server/services/aiService.ts:76:const MODEL_PATH = `${MODEL_DIR}/ai_filter.joblib`;
./server/services/aiService.ts:103:  private modelLoaded: boolean = false;
./server/services/aiService.ts:108:    macd?: { line: number; signal: number; histogram: number };
./server/services/aiService.ts:118:    confidence?: number;
./server/services/aiService.ts:123:      macdSignal: indicators.macd?.signal ?? 0,
./server/services/aiService.ts:136:      confidence: indicators.confidence ?? 50,
./server/services/aiService.ts:147:    if (labeledCount >= MIN_SAMPLES_ACTIVATE && aiConfig?.filterEnabled) {
./server/services/aiService.ts:155:    const modelExists = fs.existsSync(MODEL_PATH);
./server/services/aiService.ts:175:      canActivate: labeledCount >= MIN_SAMPLES_ACTIVATE && modelExists,
./server/services/aiService.ts:176:      filterEnabled: aiConfig?.filterEnabled ?? false,
./server/services/aiService.ts:177:      shadowEnabled: aiConfig?.shadowEnabled ?? false,
./server/services/aiService.ts:178:      modelLoaded: modelExists && this.modelLoaded,
./server/services/aiService.ts:208:      const wins = labeledTrades.filter(t => t.labelWin === 1).length;
./server/services/aiService.ts:231:      modelVersion: aiConfig?.modelVersion ?? null,
./server/services/aiService.ts:240:  async predict(features: AiFeatures): Promise<AiPrediction> {
./server/services/aiService.ts:273:      const proc = spawn("python3", [pythonScript, "predict", featuresJson], {
./server/services/aiService.ts:285:          console.error("[AI] Python predict error:", stderr);
./server/services/aiService.ts:318:        message: `Datos insuficientes para entrenar el modelo. Necesitas ${MIN_SAMPLES_TRAIN} trades cerrados etiquetados. Actualmente hay ${labeledTrades.length}.`,
./server/services/aiService.ts:329:      const timeA = a.entryTs ? new Date(a.entryTs).getTime() : 0;
./server/services/aiService.ts:330:      const timeB = b.entryTs ? new Date(b.entryTs).getTime() : 0;
./server/services/aiService.ts:334:    const validTrades = sortedTrades.filter(trade => {
./server/services/aiService.ts:335:      const entryTime = trade.entryTs ? new Date(trade.entryTs).getTime() : 0;
./server/services/aiService.ts:336:      const exitTime = trade.exitTs ? new Date(trade.exitTs).getTime() : 0;
./server/services/aiService.ts:337:      const entryPrice = parseFloat(trade.entryPrice || '0');
./server/services/aiService.ts:338:      const exitPrice = parseFloat(trade.exitPrice || '0');
./server/services/aiService.ts:339:      const amount = parseFloat(trade.entryAmount || '0');
./server/services/aiService.ts:341:      if (exitTime <= entryTime) return false;
./server/services/aiService.ts:342:      if (entryPrice <= 0 || exitPrice <= 0) return false;
./server/services/aiService.ts:353:        message: `Datos insuficientes para entrenar el modelo. Solo hay ${validTrades.length} trades v√°lidos despu√©s de validaci√≥n. Necesitas ${MIN_SAMPLES_TRAIN}.`,
./server/services/aiService.ts:367:        entryPrice: trade.entryPrice,
./server/services/aiService.ts:368:        exitPrice: trade.exitPrice,
./server/services/aiService.ts:374:        entryTs: trade.entryTs,
./server/services/aiService.ts:379:        entryPrice: trade.entryPrice,
./server/services/aiService.ts:380:        exitPrice: trade.exitPrice,
./server/services/aiService.ts:386:        entryTs: trade.entryTs,
./server/services/aiService.ts:393:    const modelVersion = `v${Date.now()}`;
./server/services/aiService.ts:438:            modelPath: MODEL_PATH,
./server/services/aiService.ts:439:            modelVersion,
./server/services/aiService.ts:443:          this.modelLoaded = true;
./server/services/aiService.ts:447:            message: `Modelo ${modelVersion} entrenado: ${trainTrades.length} train / ${valTrades.length} val. Accuracy: ${(metrics.accuracy * 100).toFixed(1)}%`,
./server/services/aiService.ts:454:            modelVersion,
./server/services/aiService.ts:456:          resolve({ success: true, message: `Modelo ${modelVersion} entrenado (sin m√©tricas parseables)` });
./server/services/aiService.ts:499:    await storage.updateAiConfig({ filterEnabled: enabled });
./server/services/aiService.ts:503:    await storage.updateAiConfig({ shadowEnabled: enabled });
./server/services/mlTrainer.py:12:MODEL_DIR = "/tmp/models"
./server/services/mlTrainer.py:13:MODEL_PATH = f"{MODEL_DIR}/ai_filter.joblib"
./server/services/mlTrainer.py:16:def ensure_model_dir():
./server/services/mlTrainer.py:42:        float(features.get("confidence", 50)),
./server/services/mlTrainer.py:46:    """Train RandomForest model on samples"""
./server/services/mlTrainer.py:49:        from sklearn.model_selection import TimeSeriesSplit
./server/services/mlTrainer.py:54:        sys.exit(1)
./server/services/mlTrainer.py:56:    ensure_model_dir()
./server/services/mlTrainer.py:65:        sys.exit(1)
./server/services/mlTrainer.py:93:        model = RandomForestClassifier(
./server/services/mlTrainer.py:102:        model.fit(X_train, y_train)
./server/services/mlTrainer.py:103:        y_pred = model.predict(X_test)
./server/services/mlTrainer.py:110:    final_model = RandomForestClassifier(
./server/services/mlTrainer.py:118:    final_model.fit(X, y)
./server/services/mlTrainer.py:121:        pickle.dump(final_model, f)
./server/services/mlTrainer.py:137:def predict(features_json):
./server/services/mlTrainer.py:138:    """Predict approval probability for given features"""
./server/services/mlTrainer.py:139:    ensure_model_dir()
./server/services/mlTrainer.py:147:            model = pickle.load(f)
./server/services/mlTrainer.py:167:            float(features.get("confidence", 50)),
./server/services/mlTrainer.py:170:        proba = model.predict_proba(X)[0]
./server/services/mlTrainer.py:180:        print(json.dumps({"error": "Usage: mlTrainer.py <train|predict> <arg>"}))
./server/services/mlTrainer.py:181:        sys.exit(1)
./server/services/mlTrainer.py:187:    elif command == "predict" and len(sys.argv) >= 3:
./server/services/mlTrainer.py:188:        predict(sys.argv[2])
./server/services/mlTrainer.py:191:        sys.exit(1)
./server/services/telegram.ts:15:  stop: () => Promise<void>;
./server/services/telegram.ts:18:  getOpenPositions?: () => Map<string, { amount: number; entryPrice: number }>;
./server/services/telegram.ts:35:        this.bot.stopPolling();
./server/services/telegram.ts:103:      const strategy = config?.strategy || "momentum";
./server/services/telegram.ts:116:*Estrategia:* ${strategy}
./server/services/telegram.ts:135:        await this.engineController.stop();
./server/services/telegram.ts:238:      const sl = parseFloat(config?.stopLossPercent?.toString() || "5");
./server/services/telegram.ts:240:      const trailing = config?.trailingStopEnabled ? `${config.trailingStopPercent}%` : "Desactivado";
./server/services/telegram.ts:250:üìâ *Trailing Stop:* ${trailing}
./server/services/telegram.ts:255:_Estrategia: ${config?.strategy || "momentum"}_
./server/services/telegram.ts:277:        const exposure = pos.amount * pos.entryPrice;
./server/services/telegram.ts:281:        message += `   Entrada: $${pos.entryPrice.toFixed(2)}\n`;
./server/services/telegram.ts:349:*Estrategia:* ${config?.strategy || "momentum"}
./server/services/telegram.ts:496:  async sendSystemStatus(isActive: boolean, strategy: string) {
./server/services/telegram.ts:503:*Estrategia:* ${strategy}
./server/services/botLogger.ts:40:  // SMART_GUARD events
./server/services/fifoMatcher.ts:84:        const buyPrice = parseFloat(lot.entryPrice);
./server/services/fifoMatcher.ts:175:      if (snapshot.entryFee) {
./server/services/fifoMatcher.ts:176:        return parseFloat(snapshot.entryFee);
./server/services/fifoMatcher.ts:181:    const price = parseFloat(lot.entryPrice);
./server/services/tradingEngine.ts:21:  confidence: number;
./server/services/tradingEngine.ts:54:const POST_STOPLOSS_COOLDOWN_MS = 30 * 60 * 1000; // 30 min cooldown tras stop-loss
./server/services/tradingEngine.ts:61:// SMART_GUARD: umbral absoluto m√≠nimo para evitar comisiones absurdas
./server/services/tradingEngine.ts:65:// Reason codes para SMART_GUARD sizing
./server/services/tradingEngine.ts:67:  | "SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN"   // saldo < floorUsd (hard block)
./server/services/tradingEngine.ts:68:  | "SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION"    // availableAfterCushion < floorUsd
./server/services/tradingEngine.ts:69:  | "SMART_GUARD_ENTRY_USING_CONFIG_MIN"       // saldo >= sgMinEntryUsd, usando sgMinEntryUsd
./server/services/tradingEngine.ts:70:  | "SMART_GUARD_ENTRY_FALLBACK_TO_AVAILABLE"; // saldo < sgMinEntryUsd, usando saldo disponible
./server/services/tradingEngine.ts:132:      skipReason: "SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN",
./server/services/tradingEngine.ts:133:      reasonCode: "SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN",
./server/services/tradingEngine.ts:143:      skipReason: "SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION",
./server/services/tradingEngine.ts:144:      reasonCode: "SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION",
./server/services/tradingEngine.ts:150:  // Fallback para modos no-SMART_GUARD
./server/services/tradingEngine.ts:164:  stopLossPercent: number;
./server/services/tradingEngine.ts:166:  trailingStopEnabled: boolean;
./server/services/tradingEngine.ts:167:  trailingStopPercent: number;
./server/services/tradingEngine.ts:169:  // SMART_GUARD specific fields (only populated when positionMode === "SMART_GUARD")
./server/services/tradingEngine.ts:190:  entryPrice: number;
./server/services/tradingEngine.ts:193:  entryStrategyId: string;
./server/services/tradingEngine.ts:194:  entrySignalTf: string;
./server/services/tradingEngine.ts:195:  signalConfidence?: number;
./server/services/tradingEngine.ts:196:  signalReason?: string;
./server/services/tradingEngine.ts:198:  entryMode?: string;
./server/services/tradingEngine.ts:200:  // SMART_GUARD dynamic state
./server/services/tradingEngine.ts:239:  confidence: number;
./server/services/tradingEngine.ts:264:  private stopLossCooldowns: Map<string, number> = new Map();
./server/services/tradingEngine.ts:318:  private lastScanResults: Map<string, { signal: string; reason: string; cooldownSec?: number; exposureAvailable?: number }> = new Map();
./server/services/tradingEngine.ts:320:  // SMART_GUARD alert throttle: key = "lotId:eventType", value = timestamp
./server/services/tradingEngine.ts:322:  private readonly SG_TRAIL_UPDATE_THROTTLE_MS = 5 * 60 * 1000; // 5 minutes between trailing stop updates
./server/services/tradingEngine.ts:369:  // === SMART_GUARD ALERT HELPERS ===
./server/services/tradingEngine.ts:387:    extra: { stopPrice?: number; profitPct: number; reason: string }
./server/services/tradingEngine.ts:389:    const { lotId, pair, entryPrice } = position;
./server/services/tradingEngine.ts:398:      entryPrice,
./server/services/tradingEngine.ts:400:      stopPrice: extra.stopPrice,
./server/services/tradingEngine.ts:436:*Entry:* $${entryPrice.toFixed(2)}
./server/services/tradingEngine.ts:439:${extra.stopPrice ? `*Nuevo Stop:* $${extra.stopPrice.toFixed(4)}` : ''}
./server/services/tradingEngine.ts:460:        total += position.amount * position.entryPrice;
./server/services/tradingEngine.ts:469:      total += position.amount * position.entryPrice;
./server/services/tradingEngine.ts:499:  // === SMART_GUARD: Obtener par√°metros con overrides por par ===
./server/services/tradingEngine.ts:625:  private getConfidenceSizingFactor(confidence: number): number {
./server/services/tradingEngine.ts:626:    if (confidence >= CONFIDENCE_SIZING_THRESHOLDS.high.min) {
./server/services/tradingEngine.ts:628:    } else if (confidence >= CONFIDENCE_SIZING_THRESHOLDS.medium.min) {
./server/services/tradingEngine.ts:630:    } else if (confidence >= CONFIDENCE_SIZING_THRESHOLDS.low.min) {
./server/services/tradingEngine.ts:633:    return 0; // No trade if confidence < 0.6
./server/services/tradingEngine.ts:686:    const cooldownUntil = this.stopLossCooldowns.get(pair);
./server/services/tradingEngine.ts:694:    const cooldownUntil = this.stopLossCooldowns.get(pair);
./server/services/tradingEngine.ts:698:      this.stopLossCooldowns.delete(pair);
./server/services/tradingEngine.ts:706:    this.stopLossCooldowns.set(pair, cooldownUntil);
./server/services/tradingEngine.ts:768:      return { action: "hold", pair, confidence: 0, reason: "Datos insuficientes para an√°lisis de velas" };
./server/services/tradingEngine.ts:777:      return { action: "hold", pair, confidence: 0, reason: "Historial de velas insuficiente" };
./server/services/tradingEngine.ts:811:    if (macd.histogram > 0 && macd.macd > macd.signal) { buySignals++; reasons.push("MACD alcista"); }
./server/services/tradingEngine.ts:812:    else if (macd.histogram < 0 && macd.macd < macd.signal) { sellSignals++; reasons.push("MACD bajista"); }
./server/services/tradingEngine.ts:843:    const confidence = Math.min(0.95, 0.5 + (Math.max(buySignals, sellSignals) * 0.07));
./server/services/tradingEngine.ts:849:        confidence,
./server/services/tradingEngine.ts:858:        confidence,
./server/services/tradingEngine.ts:863:    return { action: "hold", pair, confidence: 0.3, reason: `Sin se√±al clara velas (${buySignals}/${sellSignals})` };
./server/services/tradingEngine.ts:885:      const missingPairs = activePairs.filter(p => !this.krakenService.hasMetadata(p));
./server/services/tradingEngine.ts:928:      strategy: config.strategy,
./server/services/tradingEngine.ts:942:*Estrategia:* ${config.strategy}
./server/services/tradingEngine.ts:948:    const intervalMs = this.getIntervalForStrategy(config.strategy);
./server/services/tradingEngine.ts:957:  async stop() {
./server/services/tradingEngine.ts:979:  private getIntervalForStrategy(strategy: string): number {
./server/services/tradingEngine.ts:980:    switch (strategy) {
./server/services/tradingEngine.ts:995:        const hasSnapshot = pos.configSnapshotJson && pos.entryMode;
./server/services/tradingEngine.ts:1005:          entryPrice: parseFloat(pos.entryPrice),
./server/services/tradingEngine.ts:1008:          entryStrategyId: pos.entryStrategyId || "momentum_cycle",
./server/services/tradingEngine.ts:1009:          entrySignalTf: pos.entrySignalTf || "cycle",
./server/services/tradingEngine.ts:1010:          signalConfidence: pos.signalConfidence ? parseFloat(pos.signalConfidence) : undefined,
./server/services/tradingEngine.ts:1011:          signalReason: pos.signalReason || undefined,
./server/services/tradingEngine.ts:1012:          entryMode: pos.entryMode || undefined,
./server/services/tradingEngine.ts:1014:          // SMART_GUARD state
./server/services/tradingEngine.ts:1027:        const snapshotInfo = hasSnapshot ? `[snapshot: ${pos.entryMode}]` : "[legacy: uses current config]";
./server/services/tradingEngine.ts:1028:        log(`Posici√≥n recuperada: ${pos.pair} (${lotId}) - ${pos.amount} @ $${pos.entryPrice} (${pos.entryStrategyId}/${pos.entrySignalTf}) ${snapshotInfo}`, "trading");
./server/services/tradingEngine.ts:1036:            const hasSnap = p.configSnapshotJson && p.entryMode;
./server/services/tradingEngine.ts:1037:            const snapLabel = hasSnap ? `üì∏${escapeMarkdown(p.entryMode || '')}` : `‚öôÔ∏èlegacy`;
./server/services/tradingEngine.ts:1038:            return `‚Ä¢ ${p.pair}: ${p.amount} @ $${parseFloat(p.entryPrice).toFixed(2)} (${snapLabel})`;
./server/services/tradingEngine.ts:1053:        entryPrice: position.entryPrice.toString(),
./server/services/tradingEngine.ts:1056:        entryStrategyId: position.entryStrategyId,
./server/services/tradingEngine.ts:1057:        entrySignalTf: position.entrySignalTf,
./server/services/tradingEngine.ts:1058:        signalConfidence: position.signalConfidence?.toString(),
./server/services/tradingEngine.ts:1059:        signalReason: position.signalReason,
./server/services/tradingEngine.ts:1060:        entryMode: position.entryMode,
./server/services/tradingEngine.ts:1062:        // SMART_GUARD state
./server/services/tradingEngine.ts:1095:        await this.stop();
./server/services/tradingEngine.ts:1157:      const stopLossPercent = parseFloat(config.stopLossPercent?.toString() || "5");
./server/services/tradingEngine.ts:1159:      const trailingStopEnabled = config.trailingStopEnabled ?? false;
./server/services/tradingEngine.ts:1160:      const trailingStopPercent = parseFloat(config.trailingStopPercent?.toString() || "2");
./server/services/tradingEngine.ts:1164:        await this.checkStopLossTakeProfit(pair, stopLossPercent, takeProfitPercent, trailingStopEnabled, trailingStopPercent, balances);
./server/services/tradingEngine.ts:1184:      const signalTimeframe = config.signalTimeframe || "cycle";
./server/services/tradingEngine.ts:1185:      const isCandleMode = signalTimeframe !== "cycle" && config.strategy === "momentum";
./server/services/tradingEngine.ts:1191:            signal: "NONE",
./server/services/tradingEngine.ts:1198:          const candle = await this.getLastClosedCandle(pair, signalTimeframe);
./server/services/tradingEngine.ts:1201:          if (this.isNewCandleClosed(pair, signalTimeframe, candle.time)) {
./server/services/tradingEngine.ts:1202:            log(`Nueva vela cerrada ${pair}/${signalTimeframe} @ ${new Date(candle.time * 1000).toISOString()}`, "trading");
./server/services/tradingEngine.ts:1203:            await this.analyzePairAndTradeWithCandles(pair, signalTimeframe, candle, riskConfig, balances);
./server/services/tradingEngine.ts:1206:          await this.analyzePairAndTrade(pair, config.strategy, riskConfig, balances);
./server/services/tradingEngine.ts:1216:    stopLossPercent: number,
./server/services/tradingEngine.ts:1218:    trailingStopEnabled: boolean,
./server/services/tradingEngine.ts:1219:    trailingStopPercent: number,
./server/services/tradingEngine.ts:1239:          pair, position, currentPrice, stopLossPercent, takeProfitPercent,
./server/services/tradingEngine.ts:1240:          trailingStopEnabled, trailingStopPercent, balances
./server/services/tradingEngine.ts:1252:    stopLossPercent: number,
./server/services/tradingEngine.ts:1254:    trailingStopEnabled: boolean,
./server/services/tradingEngine.ts:1255:    trailingStopPercent: number,
./server/services/tradingEngine.ts:1259:    const priceChange = ((currentPrice - position.entryPrice) / position.entryPrice) * 100;
./server/services/tradingEngine.ts:1267:    // Check if this is a SMART_GUARD position - use dedicated logic
./server/services/tradingEngine.ts:1268:    if (position.entryMode === "SMART_GUARD" && position.configSnapshot) {
./server/services/tradingEngine.ts:1281:      effectiveSL = position.configSnapshot.stopLossPercent;
./server/services/tradingEngine.ts:1283:      effectiveTrailingEnabled = position.configSnapshot.trailingStopEnabled;
./server/services/tradingEngine.ts:1284:      effectiveTrailingPct = position.configSnapshot.trailingStopPercent;
./server/services/tradingEngine.ts:1285:      paramsSource = `snapshot (${position.entryMode})`;
./server/services/tradingEngine.ts:1287:      effectiveSL = stopLossPercent;
./server/services/tradingEngine.ts:1289:      effectiveTrailingEnabled = trailingStopEnabled;
./server/services/tradingEngine.ts:1290:      effectiveTrailingPct = trailingStopPercent;
./server/services/tradingEngine.ts:1306:        entryPrice: position.entryPrice,
./server/services/tradingEngine.ts:1309:        stopLossPercent: effectiveSL,
./server/services/tradingEngine.ts:1321:        entryPrice: position.entryPrice,
./server/services/tradingEngine.ts:1328:    else if (effectiveTrailingEnabled && position.highestPrice > position.entryPrice) {
./server/services/tradingEngine.ts:1337:          entryPrice: position.entryPrice,
./server/services/tradingEngine.ts:1341:          trailingStopPercent: effectiveTrailingPct,
./server/services/tradingEngine.ts:1378:          this.stopLossCooldowns.delete(pair);
./server/services/tradingEngine.ts:1433:      const pnl = (currentPrice - position.entryPrice) * actualSellAmount;
./server/services/tradingEngine.ts:1436:      const sellContext = { entryPrice: position.entryPrice, aiSampleId: position.aiSampleId };
./server/services/tradingEngine.ts:1446:*Precio entrada:* $${position.entryPrice.toFixed(2)}
./server/services/tradingEngine.ts:1469:    const paramsSource = `SMART_GUARD snapshot`;
./server/services/tradingEngine.ts:1485:    const ultimateSL = snapshot.stopLossPercent;
./server/services/tradingEngine.ts:1493:    // Calculate break-even price (entry + fee cushion)
./server/services/tradingEngine.ts:1494:    const breakEvenPrice = position.entryPrice * (1 + feeCushionPct / 100);
./server/services/tradingEngine.ts:1496:    // 1. ULTIMATE STOP-LOSS - Emergency exit (always active)
./server/services/tradingEngine.ts:1499:      sellReason = `Stop-Loss emergencia SMART_GUARD (${priceChange.toFixed(2)}% < -${ultimateSL}%) [${paramsSource}]`;
./server/services/tradingEngine.ts:1502:      await botLogger.warn("SG_EMERGENCY_STOPLOSS", `SMART_GUARD Stop-Loss emergencia en ${pair}`, {
./server/services/tradingEngine.ts:1503:        pair, entryPrice: position.entryPrice, currentPrice, priceChange, ultimateSL, paramsSource,
./server/services/tradingEngine.ts:1510:      sellReason = `Take-Profit fijo SMART_GUARD (${priceChange.toFixed(2)}% >= ${tpFixedPct}%) [${paramsSource}]`;
./server/services/tradingEngine.ts:1512:      await botLogger.info("SG_TP_FIXED", `SMART_GUARD TP fijo alcanzado en ${pair}`, {
./server/services/tradingEngine.ts:1513:        pair, entryPrice: position.entryPrice, currentPrice, priceChange, tpFixedPct, paramsSource,
./server/services/tradingEngine.ts:1517:    // 3. BREAK-EVEN ACTIVATION - Move stop to breakeven when profit >= beAtPct
./server/services/tradingEngine.ts:1522:      log(`SMART_GUARD ${pair}: Break-even activado (+${priceChange.toFixed(2)}%), stop movido a $${breakEvenPrice.toFixed(4)}`, "trading");
./server/services/tradingEngine.ts:1524:      // Send alert (only once per lot, no throttle needed as flag prevents re-entry)
./server/services/tradingEngine.ts:1527:          stopPrice: breakEvenPrice,
./server/services/tradingEngine.ts:1529:          reason: `Profit +${beAtPct}% alcanzado, stop movido a break-even + comisiones`,
./server/services/tradingEngine.ts:1534:    // 4. TRAILING STOP ACTIVATION - Start trailing when profit >= trailStartPct
./server/services/tradingEngine.ts:1538:      // Only update stop if higher than current
./server/services/tradingEngine.ts:1543:      log(`SMART_GUARD ${pair}: Trailing activado (+${priceChange.toFixed(2)}%), stop din√°mico @ $${position.sgCurrentStopPrice!.toFixed(4)}`, "trading");
./server/services/tradingEngine.ts:1548:          stopPrice: position.sgCurrentStopPrice,
./server/services/tradingEngine.ts:1550:          reason: `Profit +${trailStartPct}% alcanzado, trailing stop iniciado a ${trailDistancePct}% del m√°ximo`,
./server/services/tradingEngine.ts:1555:    // 5. TRAILING STOP UPDATE - Ratchet up stop with step increments
./server/services/tradingEngine.ts:1560:      // Only update if new stop is higher by at least one step
./server/services/tradingEngine.ts:1565:        log(`SMART_GUARD ${pair}: Trailing step $${oldStop.toFixed(4)} ‚Üí $${newTrailStop.toFixed(4)} (+${trailStepPct}%)`, "trading");
./server/services/tradingEngine.ts:1570:            stopPrice: newTrailStop,
./server/services/tradingEngine.ts:1580:      const stopType = position.sgTrailingActivated ? "Trailing Stop" : "Break-even Stop";
./server/services/tradingEngine.ts:1582:      sellReason = `${stopType} SMART_GUARD ($${currentPrice.toFixed(2)} <= $${position.sgCurrentStopPrice.toFixed(2)}) [${paramsSource}]`;
./server/services/tradingEngine.ts:1584:      await botLogger.info("SG_STOP_HIT", `SMART_GUARD ${stopType} activado en ${pair}`, {
./server/services/tradingEngine.ts:1585:        pair, entryPrice: position.entryPrice, currentPrice, stopPrice: position.sgCurrentStopPrice,
./server/services/tradingEngine.ts:1586:        stopType, paramsSource,
./server/services/tradingEngine.ts:1590:    // 7. SCALE-OUT (optional, only if exceptional signal)
./server/services/tradingEngine.ts:1592:      // Only scale out if signal confidence >= threshold and part is worth selling
./server/services/tradingEngine.ts:1594:      if (position.signalConfidence && position.signalConfidence >= scaleOutThreshold && partValue >= minPartUsd) {
./server/services/tradingEngine.ts:1597:          sellReason = `Scale-out SMART_GUARD (${scaleOutPct}% @ +${priceChange.toFixed(2)}%, conf=${position.signalConfidence}%) [${paramsSource}]`;
./server/services/tradingEngine.ts:1602:          // Send alert (only once as sgScaleOutDone flag prevents re-entry)
./server/services/tradingEngine.ts:1629:        log(`SMART_GUARD: Cantidad a vender (${sellAmount}) menor al m√≠nimo (${minVolume}) para ${pair} (${lotId})`, "trading");
./server/services/tradingEngine.ts:1639:          log(`SMART_GUARD: Posici√≥n hu√©rfana en ${pair} (${lotId}), eliminando`, "trading");
./server/services/tradingEngine.ts:1651:      const pnl = (currentPrice - position.entryPrice) * sellAmount;
./server/services/tradingEngine.ts:1652:      const sellContext = { entryPrice: position.entryPrice, aiSampleId: position.aiSampleId };
./server/services/tradingEngine.ts:1662:*Precio entrada:* $${position.entryPrice.toFixed(2)}
./server/services/tradingEngine.ts:1681:          log(`SMART_GUARD ${pair} (${lotId}): Posici√≥n cerrada completamente`, "trading");
./server/services/tradingEngine.ts:1686:          log(`SMART_GUARD ${pair} (${lotId}): Venta parcial, restante: ${position.amount.toFixed(8)}`, "trading");
./server/services/tradingEngine.ts:1695:    strategy: string,
./server/services/tradingEngine.ts:1727:      const signal = await this.analyzeWithStrategy(strategy, pair, history, currentPrice);
./server/services/tradingEngine.ts:1730:      const signalStr = signal.action === "hold" ? "NONE" : signal.action.toUpperCase();
./server/services/tradingEngine.ts:1734:        signal: signalStr,
./server/services/tradingEngine.ts:1735:        reason: signal.reason || "Sin se√±al",
./server/services/tradingEngine.ts:1740:      if (signal.action === "hold" || signal.confidence < 0.6) {
./server/services/tradingEngine.ts:1748:      if (signal.action === "buy") {
./server/services/tradingEngine.ts:1753:            signal: "BUY",
./server/services/tradingEngine.ts:1756:            signalReason: signal.reason,
./server/services/tradingEngine.ts:1761:        // MODO SINGLE o SMART_GUARD: Bloquear compras si ya hay posici√≥n abierta
./server/services/tradingEngine.ts:1766:        // En SINGLE siempre 1 slot. En SMART_GUARD respetamos sgMaxOpenLotsPerPair.
./server/services/tradingEngine.ts:1767:        const maxLotsForMode = positionMode === "SMART_GUARD" ? sgMaxLotsPerPair : 1;
./server/services/tradingEngine.ts:1770:        if ((positionMode === "SINGLE" || positionMode === "SMART_GUARD") && currentOpenLots >= maxLotsForMode) {
./server/services/tradingEngine.ts:1771:          const reasonCode = positionMode === "SMART_GUARD" 
./server/services/tradingEngine.ts:1772:            ? "SMART_GUARD_MAX_LOTS_REACHED" 
./server/services/tradingEngine.ts:1778:            signal: "BUY",
./server/services/tradingEngine.ts:1783:            signalReason: signal.reason,
./server/services/tradingEngine.ts:1786:            signal: "BUY",
./server/services/tradingEngine.ts:1793:        // MEJORA 4: Verificar cooldown post stop-loss
./server/services/tradingEngine.ts:1796:          log(`${pair}: En cooldown post stop-loss`, "trading");
./server/services/tradingEngine.ts:1797:          await botLogger.info("TRADE_SKIPPED", `Se√±al BUY ignorada - cooldown post stop-loss`, {
./server/services/tradingEngine.ts:1799:            signal: "BUY",
./server/services/tradingEngine.ts:1802:            signalReason: signal.reason,
./server/services/tradingEngine.ts:1813:            signal: "BUY",
./server/services/tradingEngine.ts:1817:            signalReason: signal.reason,
./server/services/tradingEngine.ts:1826:            signal: "BUY",
./server/services/tradingEngine.ts:1842:            signal: "BUY",
./server/services/tradingEngine.ts:1856:        // SMART_GUARD v2: sgMinEntryUsd es un "objetivo preferido", no un bloqueo
./server/services/tradingEngine.ts:1865:        // Para SMART_GUARD: calcular orderUsdProposed por l√≥gica normal, luego validar m√≠nimos
./server/services/tradingEngine.ts:1866:        const sgParams = positionMode === "SMART_GUARD" ? this.getSmartGuardParams(pair, botConfig) : null;
./server/services/tradingEngine.ts:1875:        // usdDisponible = saldo real disponible (sin buffer en SMART_GUARD v2 para sizing exacto)
./server/services/tradingEngine.ts:1878:        // === NUEVA L√ìGICA SMART_GUARD v2 ===
./server/services/tradingEngine.ts:1886:        if (positionMode === "SMART_GUARD") {
./server/services/tradingEngine.ts:1887:          // === SMART_GUARD v2 SIZING ===
./server/services/tradingEngine.ts:1898:            sgReasonCode = "SMART_GUARD_ENTRY_USING_CONFIG_MIN";
./server/services/tradingEngine.ts:1903:            sgReasonCode = "SMART_GUARD_ENTRY_FALLBACK_TO_AVAILABLE";
./server/services/tradingEngine.ts:1908:            sgReasonCode = "SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION";
./server/services/tradingEngine.ts:1913:            sgReasonCode = "SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN";
./server/services/tradingEngine.ts:1916:          log(`SMART_GUARD ${pair}: Sizing v2 - order=$${tradeAmountUSD.toFixed(2)}, reason=${sgReasonCode}`, "trading");
./server/services/tradingEngine.ts:1932:              signal: "BUY",
./server/services/tradingEngine.ts:1947:          const confidenceFactor = this.getConfidenceSizingFactor(signal.confidence);
./server/services/tradingEngine.ts:1949:          tradeAmountUSD = tradeAmountUSD * confidenceFactor;
./server/services/tradingEngine.ts:1951:          if (confidenceFactor < 1.0) {
./server/services/tradingEngine.ts:1952:            log(`${pair}: Sizing ajustado por confianza (${(signal.confidence * 100).toFixed(0)}%): $${originalBeforeConfidence.toFixed(2)} -> $${tradeAmountUSD.toFixed(2)} (${(confidenceFactor * 100).toFixed(0)}%)`, "trading");
./server/services/tradingEngine.ts:1965:        // POL√çTICA UNIFICADA: SMART_GUARD S√ç respeta maxTotalExposurePct para evitar sobreapalancamiento
./server/services/tradingEngine.ts:1967:        const effectiveMaxAllowed = positionMode === "SMART_GUARD" 
./server/services/tradingEngine.ts:1975:            signal: "BUY",
./server/services/tradingEngine.ts:2005:        // Ajustar por l√≠mite de exposici√≥n (solo para SINGLE/DCA, SMART_GUARD ya valid√≥ arriba)
./server/services/tradingEngine.ts:2006:        if (positionMode !== "SMART_GUARD" && tradeAmountUSD > effectiveMaxAllowed) {
./server/services/tradingEngine.ts:2029:            signal: "BUY",
./server/services/tradingEngine.ts:2044:        const maxLotsForModeConfig = positionMode === "SMART_GUARD" ? sgMaxLotsPerPairConfig : 1;
./server/services/tradingEngine.ts:2057:          floorUsd: positionMode === "SMART_GUARD" ? floorUsd : undefined,
./server/services/tradingEngine.ts:2058:          availableAfterCushion: positionMode === "SMART_GUARD" ? availableAfterCushion : undefined,
./server/services/tradingEngine.ts:2071:            signal: "BUY",
./server/services/tradingEngine.ts:2078:            signal: "BUY",
./server/services/tradingEngine.ts:2089:        if (positionMode === "SMART_GUARD" && sgReasonCode) {
./server/services/tradingEngine.ts:2120:        const success = await this.executeTrade(pair, "buy", tradeVolume.toFixed(8), currentPrice, signal.reason, adjustmentInfo, undefined, executionMeta);
./server/services/tradingEngine.ts:2125:      } else if (signal.action === "sell") {
./server/services/tradingEngine.ts:2129:            signal: "SELL",
./server/services/tradingEngine.ts:2132:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2154:            signal: "SELL",
./server/services/tradingEngine.ts:2161:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2169:            signal: "SELL",
./server/services/tradingEngine.ts:2176:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2181:        log(`${pair}: SELL signal - vendiendo ${sellVolume.toFixed(8)} (lot: ${lotAmount.toFixed(8)}, balance: ${realAssetBalance.toFixed(8)}, value: $${sellValueUsd.toFixed(2)})`, "trading");
./server/services/tradingEngine.ts:2184:          ? { entryPrice: existingPosition.entryPrice, aiSampleId: existingPosition.aiSampleId }
./server/services/tradingEngine.ts:2186:        const success = await this.executeTrade(pair, "sell", sellVolume.toFixed(8), currentPrice, signal.reason, undefined, undefined, undefined, sellContext);
./server/services/tradingEngine.ts:2209:      const signal = await this.analyzeWithCandleStrategy(pair, timeframe, candle);
./server/services/tradingEngine.ts:2210:      const strategyId = `momentum_candles_${timeframe}`;
./server/services/tradingEngine.ts:2213:      const signalStr = signal.action === "hold" ? "NONE" : signal.action.toUpperCase();
./server/services/tradingEngine.ts:2217:        signal: signalStr,
./server/services/tradingEngine.ts:2218:        reason: signal.reason || "Sin se√±al",
./server/services/tradingEngine.ts:2223:      if (signal.action === "hold" || signal.confidence < 0.6) {
./server/services/tradingEngine.ts:2237:      if (signal.action === "buy") {
./server/services/tradingEngine.ts:2242:            signal: "BUY",
./server/services/tradingEngine.ts:2245:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2250:        // MODO SINGLE o SMART_GUARD: Bloquear compras si ya hay posici√≥n abierta
./server/services/tradingEngine.ts:2255:        // En SINGLE siempre 1 slot. En SMART_GUARD respetamos sgMaxOpenLotsPerPair.
./server/services/tradingEngine.ts:2256:        const maxLotsForMode = positionMode === "SMART_GUARD" ? sgMaxLotsPerPair : 1;
./server/services/tradingEngine.ts:2259:        if ((positionMode === "SINGLE" || positionMode === "SMART_GUARD") && currentOpenLots >= maxLotsForMode) {
./server/services/tradingEngine.ts:2260:          const reasonCode = positionMode === "SMART_GUARD" 
./server/services/tradingEngine.ts:2261:            ? "SMART_GUARD_MAX_LOTS_REACHED" 
./server/services/tradingEngine.ts:2267:            signal: "BUY",
./server/services/tradingEngine.ts:2272:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2275:            signal: "BUY",
./server/services/tradingEngine.ts:2284:          log(`${pair}: En cooldown post stop-loss`, "trading");
./server/services/tradingEngine.ts:2285:          await botLogger.info("TRADE_SKIPPED", `Se√±al BUY ignorada - cooldown post stop-loss`, {
./server/services/tradingEngine.ts:2287:            signal: "BUY",
./server/services/tradingEngine.ts:2290:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2300:            signal: "BUY",
./server/services/tradingEngine.ts:2304:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2313:            signal: "BUY",
./server/services/tradingEngine.ts:2329:            signal: "BUY",
./server/services/tradingEngine.ts:2348:        // SMART_GUARD: obtener par√°metros
./server/services/tradingEngine.ts:2349:        const sgParams = positionMode === "SMART_GUARD" ? this.getSmartGuardParams(pair, botConfig) : null;
./server/services/tradingEngine.ts:2361:        if (positionMode === "SMART_GUARD") {
./server/services/tradingEngine.ts:2362:          // === SMART_GUARD v2 SIZING (mismo que analyzePairAndTrade) ===
./server/services/tradingEngine.ts:2367:            sgReasonCode = "SMART_GUARD_ENTRY_USING_CONFIG_MIN";
./server/services/tradingEngine.ts:2370:            sgReasonCode = "SMART_GUARD_ENTRY_FALLBACK_TO_AVAILABLE";
./server/services/tradingEngine.ts:2373:            sgReasonCode = "SMART_GUARD_BLOCKED_AFTER_FEE_CUSHION";
./server/services/tradingEngine.ts:2376:            sgReasonCode = "SMART_GUARD_BLOCKED_BELOW_EXCHANGE_MIN";
./server/services/tradingEngine.ts:2379:          log(`SMART_GUARD ${pair} [${strategyId}]: Sizing v2 - order=$${tradeAmountUSD.toFixed(2)}, reason=${sgReasonCode}`, "trading");
./server/services/tradingEngine.ts:2388:              signal: "BUY",
./server/services/tradingEngine.ts:2393:              strategyId,
./server/services/tradingEngine.ts:2401:          const confidenceFactor = this.getConfidenceSizingFactor(signal.confidence);
./server/services/tradingEngine.ts:2402:          tradeAmountUSD = tradeAmountUSD * confidenceFactor;
./server/services/tradingEngine.ts:2414:        const effectiveMaxAllowed = positionMode === "SMART_GUARD"
./server/services/tradingEngine.ts:2422:            signal: "BUY",
./server/services/tradingEngine.ts:2432:        if (positionMode !== "SMART_GUARD" && tradeAmountUSD > effectiveMaxAllowed) {
./server/services/tradingEngine.ts:2444:            signal: "BUY",
./server/services/tradingEngine.ts:2448:            strategyId,
./server/services/tradingEngine.ts:2465:          `${signal.reason} [${strategyId}]`, 
./server/services/tradingEngine.ts:2467:          { strategyId, timeframe, confidence: signal.confidence }
./server/services/tradingEngine.ts:2474:      } else if (signal.action === "sell") {
./server/services/tradingEngine.ts:2478:            signal: "SELL",
./server/services/tradingEngine.ts:2481:            strategyId,
./server/services/tradingEngine.ts:2482:            signalReason: signal.reason,
./server/services/tradingEngine.ts:2501:            signal: "SELL",
./server/services/tradingEngine.ts:2508:            strategyId,
./server/services/tradingEngine.ts:2516:            signal: "SELL",
./server/services/tradingEngine.ts:2523:            strategyId,
./server/services/tradingEngine.ts:2528:        log(`${pair}: SELL signal [${strategyId}] - vendiendo ${sellVolume.toFixed(8)} (value: $${sellValueUsd.toFixed(2)})`, "trading");
./server/services/tradingEngine.ts:2531:          ? { entryPrice: existingPosition.entryPrice, aiSampleId: existingPosition.aiSampleId }
./server/services/tradingEngine.ts:2533:        const success = await this.executeTrade(pair, "sell", sellVolume.toFixed(8), currentPrice, `${signal.reason} [${strategyId}]`, undefined, undefined, undefined, sellContext);
./server/services/tradingEngine.ts:2544:    strategy: string,
./server/services/tradingEngine.ts:2552:    let signal: TradeSignal;
./server/services/tradingEngine.ts:2553:    switch (strategy) {
./server/services/tradingEngine.ts:2555:        signal = this.momentumStrategy(pair, history, currentPrice);
./server/services/tradingEngine.ts:2558:        signal = this.meanReversionStrategy(pair, history, currentPrice);
./server/services/tradingEngine.ts:2561:        signal = this.scalpingStrategy(pair, history, currentPrice);
./server/services/tradingEngine.ts:2564:        signal = this.gridStrategy(pair, history, currentPrice);
./server/services/tradingEngine.ts:2567:        return { action: "hold", pair, confidence: 0, reason: "Estrategia desconocida" };
./server/services/tradingEngine.ts:2570:    if (mtfAnalysis && signal.action !== "hold") {
./server/services/tradingEngine.ts:2571:      const mtfBoost = this.applyMTFFilter(signal, mtfAnalysis);
./server/services/tradingEngine.ts:2572:      if (mtfBoost.filtered) {
./server/services/tradingEngine.ts:2573:        return { action: "hold", pair, confidence: 0.3, reason: `Se√±al filtrada por MTF: ${mtfBoost.reason}` };
./server/services/tradingEngine.ts:2575:      signal.confidence = Math.min(0.95, signal.confidence + mtfBoost.confidenceBoost);
./server/services/tradingEngine.ts:2576:      signal.reason += ` | MTF: ${mtfAnalysis.summary}`;
./server/services/tradingEngine.ts:2579:    return signal;
./server/services/tradingEngine.ts:2582:  private applyMTFFilter(signal: TradeSignal, mtf: TrendAnalysis): { filtered: boolean; confidenceBoost: number; reason: string } {
./server/services/tradingEngine.ts:2583:    if (signal.action === "buy") {
./server/services/tradingEngine.ts:2585:        return { filtered: true, confidenceBoost: 0, reason: "Tendencia 1h y 4h bajista" };
./server/services/tradingEngine.ts:2588:        return { filtered: true, confidenceBoost: 0, reason: `Alineaci√≥n MTF negativa (${mtf.alignment.toFixed(2)})` };
./server/services/tradingEngine.ts:2591:        return { filtered: false, confidenceBoost: 0.15, reason: "Confirmado por MTF alcista" };
./server/services/tradingEngine.ts:2594:        return { filtered: false, confidenceBoost: 0.1, reason: "Tendencia 4h alcista" };
./server/services/tradingEngine.ts:2598:    if (signal.action === "sell") {
./server/services/tradingEngine.ts:2600:        return { filtered: true, confidenceBoost: 0, reason: "Tendencia 1h y 4h alcista" };
./server/services/tradingEngine.ts:2603:        return { filtered: true, confidenceBoost: 0, reason: `Alineaci√≥n MTF positiva (${mtf.alignment.toFixed(2)})` };
./server/services/tradingEngine.ts:2606:        return { filtered: false, confidenceBoost: 0.15, reason: "Confirmado por MTF bajista" };
./server/services/tradingEngine.ts:2609:        return { filtered: false, confidenceBoost: 0.1, reason: "Tendencia 4h bajista" };
./server/services/tradingEngine.ts:2613:    return { filtered: false, confidenceBoost: 0, reason: "Sin filtro MTF aplicado" };
./server/services/tradingEngine.ts:2639:    if (macd.histogram > 0 && macd.macd > macd.signal) { buySignals++; reasons.push("MACD alcista"); }
./server/services/tradingEngine.ts:2640:    else if (macd.histogram < 0 && macd.macd < macd.signal) { sellSignals++; reasons.push("MACD bajista"); }
./server/services/tradingEngine.ts:2653:    const confidence = Math.min(0.95, 0.5 + (Math.max(buySignals, sellSignals) * 0.08));
./server/services/tradingEngine.ts:2659:        confidence,
./server/services/tradingEngine.ts:2668:        confidence,
./server/services/tradingEngine.ts:2673:    return { action: "hold", pair, confidence: 0.3, reason: `Sin se√±al clara (${buySignals} compra / ${sellSignals} venta)` };
./server/services/tradingEngine.ts:2687:    let confidence = 0.6;
./server/services/tradingEngine.ts:2690:      confidence += 0.15;
./server/services/tradingEngine.ts:2693:      if (rsi < 25) { confidence += 0.1; reasons.push(`RSI muy bajo (${rsi.toFixed(0)})`); }
./server/services/tradingEngine.ts:2695:        confidence += 0.05;
./server/services/tradingEngine.ts:2702:        confidence: Math.min(0.95, confidence),
./server/services/tradingEngine.ts:2708:      if (rsi < 35) { confidence += 0.1; reasons.push(`RSI bajo (${rsi.toFixed(0)})`); }
./server/services/tradingEngine.ts:2714:        confidence: Math.min(0.85, confidence),
./server/services/tradingEngine.ts:2720:      confidence += 0.15;
./server/services/tradingEngine.ts:2723:      if (rsi > 75) { confidence += 0.1; reasons.push(`RSI muy alto (${rsi.toFixed(0)})`); }
./server/services/tradingEngine.ts:2725:        confidence += 0.05;
./server/services/tradingEngine.ts:2732:        confidence: Math.min(0.95, confidence),
./server/services/tradingEngine.ts:2738:      if (rsi > 65) { confidence += 0.1; reasons.push(`RSI alto (${rsi.toFixed(0)})`); }
./server/services/tradingEngine.ts:2744:        confidence: Math.min(0.85, confidence),
./server/services/tradingEngine.ts:2749:    return { action: "hold", pair, confidence: 0.3, reason: `Precio en rango normal (Z=${zScore.toFixed(2)})` };
./server/services/tradingEngine.ts:2754:      return { action: "hold", pair, confidence: 0, reason: "Datos insuficientes para scalping" };
./server/services/tradingEngine.ts:2770:    let confidence = 0.65;
./server/services/tradingEngine.ts:2774:      return { action: "hold", pair, confidence: 0.2, reason: `Volatilidad ATR muy baja (${atrPercent.toFixed(2)}%)` };
./server/services/tradingEngine.ts:2778:    const entryThreshold = Math.max(0.2, atrPercent * 0.3);
./server/services/tradingEngine.ts:2780:    if (priceChange < -entryThreshold && volatility > 0.15) {
./server/services/tradingEngine.ts:2785:        confidence += 0.1;
./server/services/tradingEngine.ts:2789:        confidence += 0.05;
./server/services/tradingEngine.ts:2793:        confidence += 0.05;
./server/services/tradingEngine.ts:2798:        confidence += 0.05;
./server/services/tradingEngine.ts:2804:        confidence: Math.min(0.9, confidence),
./server/services/tradingEngine.ts:2809:    if (priceChange > entryThreshold && volatility > 0.15) {
./server/services/tradingEngine.ts:2814:        confidence += 0.1;
./server/services/tradingEngine.ts:2818:        confidence += 0.05;
./server/services/tradingEngine.ts:2822:        confidence += 0.05;
./server/services/tradingEngine.ts:2828:        confidence: Math.min(0.9, confidence),
./server/services/tradingEngine.ts:2833:    return { action: "hold", pair, confidence: 0.3, reason: `Sin oportunidad (cambio: ${priceChange.toFixed(2)}%, ATR: ${atrPercent.toFixed(2)}%)` };
./server/services/tradingEngine.ts:2838:      return { action: "hold", pair, confidence: 0, reason: "Datos insuficientes para grid" };
./server/services/tradingEngine.ts:2858:      return { action: "hold", pair, confidence: 0, reason: "Grid size inv√°lido" };
./server/services/tradingEngine.ts:2874:    let confidence = 0.7;
./server/services/tradingEngine.ts:2878:      confidence += 0.1; // Volatilidad ideal para grid
./server/services/tradingEngine.ts:2880:      confidence -= 0.1; // Demasiada volatilidad
./server/services/tradingEngine.ts:2887:        confidence: Math.min(0.85, confidence),
./server/services/tradingEngine.ts:2896:        confidence: Math.min(0.85, confidence),
./server/services/tradingEngine.ts:2901:    return { action: "hold", pair, confidence: 0.3, reason: `Grid: Nivel ${levelFromMid}, ATR: ${atrPercent.toFixed(2)}%` };
./server/services/tradingEngine.ts:2939:  private calculateMACD(prices: number[]): { macd: number; signal: number; histogram: number } {
./server/services/tradingEngine.ts:2941:      return { macd: 0, signal: 0, histogram: 0 };
./server/services/tradingEngine.ts:2955:    const signal = macdHistory.length >= 9 ? this.calculateEMA(macdHistory.slice(-9), 9) : 0;
./server/services/tradingEngine.ts:2956:    const histogram = macd - signal;
./server/services/tradingEngine.ts:2958:    return { macd, signal, histogram };
./server/services/tradingEngine.ts:3196:    strategyMeta?: { strategyId: string; timeframe: string; confidence: number },
./server/services/tradingEngine.ts:3198:    sellContext?: { entryPrice: number; aiSampleId?: number } // For sells: pass entry price for correct P&L calculation
./server/services/tradingEngine.ts:3259:          const sgInfo = executionMeta && executionMeta.mode === "SMART_GUARD"
./server/services/tradingEngine.ts:3313:        const entryStrategyId = strategyMeta?.strategyId || "momentum_cycle";
./server/services/tradingEngine.ts:3314:        const entrySignalTf = strategyMeta?.timeframe || "cycle";
./server/services/tradingEngine.ts:3315:        const signalConfidence = strategyMeta?.confidence;
./server/services/tradingEngine.ts:3318:        const entryMode = currentConfig?.positionMode || "SINGLE";
./server/services/tradingEngine.ts:3320:        // In SMART_GUARD with multi-lot, always create new positions
./server/services/tradingEngine.ts:3321:        const shouldCreateNewLot = entryMode === "SMART_GUARD" || !existing || existing.amount <= 0;
./server/services/tradingEngine.ts:3326:          const avgPrice = (existing.amount * existing.entryPrice + volumeNum * price) / totalAmount;
./server/services/tradingEngine.ts:3330:            entryPrice: avgPrice,
./server/services/tradingEngine.ts:3334:          log(`DCA entry: ${pair} (${existing.lotId}) - preserved snapshot from original entry`, "trading");
./server/services/tradingEngine.ts:3340:            stopLossPercent: parseFloat(currentConfig?.stopLossPercent?.toString() || "5"),
./server/services/tradingEngine.ts:3342:            trailingStopEnabled: currentConfig?.trailingStopEnabled ?? false,
./server/services/tradingEngine.ts:3343:            trailingStopPercent: parseFloat(currentConfig?.trailingStopPercent?.toString() || "2"),
./server/services/tradingEngine.ts:3344:            positionMode: entryMode,
./server/services/tradingEngine.ts:3347:          // Add SMART_GUARD specific params using getSmartGuardParams() for per-pair override support
./server/services/tradingEngine.ts:3348:          if (entryMode === "SMART_GUARD") {
./server/services/tradingEngine.ts:3370:            entryPrice: price,
./server/services/tradingEngine.ts:3373:            entryStrategyId,
./server/services/tradingEngine.ts:3374:            entrySignalTf,
./server/services/tradingEngine.ts:3375:            signalConfidence,
./server/services/tradingEngine.ts:3376:            signalReason: reason,
./server/services/tradingEngine.ts:3377:            entryMode,
./server/services/tradingEngine.ts:3379:            // SMART_GUARD initial state
./server/services/tradingEngine.ts:3388:          if (entryMode === "SMART_GUARD") {
./server/services/tradingEngine.ts:3389:            log(`NEW LOT #${lotCount}: ${pair} (${lotId}) - SMART_GUARD snapshot saved (BE=${configSnapshot.sgBeAtPct}%, trail=${configSnapshot.sgTrailDistancePct}%, TP=${configSnapshot.sgTpFixedEnabled ? configSnapshot.sgTpFixedPct + '%' : 'OFF'})`, "trading");
./server/services/tradingEngine.ts:3391:            log(`NEW POSITION: ${pair} (${lotId}) - snapshot saved (SL=${configSnapshot.stopLossPercent}%, TP=${configSnapshot.takeProfitPercent}%, trailing=${configSnapshot.trailingStopEnabled}, mode=${entryMode})`, "trading");
./server/services/tradingEngine.ts:3400:              confidence: signalConfidence ?? 50,
./server/services/tradingEngine.ts:3407:              entryPrice: price.toString(),
./server/services/tradingEngine.ts:3408:              entryTs: new Date(),
./server/services/tradingEngine.ts:3430:          const pnl = (price - sellContext.entryPrice) * volumeNum;
./server/services/tradingEngine.ts:3438:                exitPrice: price.toString(),
./server/services/tradingEngine.ts:3439:                exitTs: new Date(),
./server/services/tradingEngine.ts:3466:        const strategyLabel = strategyMeta?.strategyId ? 
./server/services/tradingEngine.ts:3467:          ((strategyMeta?.timeframe && strategyMeta.timeframe !== "cycle") ? 
./server/services/tradingEngine.ts:3468:            `Momentum (Velas ${strategyMeta.timeframe})` : 
./server/services/tradingEngine.ts:3471:        const confidenceLabel = strategyMeta?.confidence ? ` | Confianza: ${(strategyMeta.confidence * 100).toFixed(0)}%` : "";
./server/services/tradingEngine.ts:3482:*Estrategia:* ${strategyLabel}${confidenceLabel}
./server/services/tradingEngine.ts:3500:        strategyId: strategyMeta?.strategyId || "momentum_cycle",
./server/services/tradingEngine.ts:3501:        timeframe: strategyMeta?.timeframe || "cycle",
./server/services/tradingEngine.ts:3502:        confidence: strategyMeta?.confidence,
./server/services/tradingEngine.ts:3621:    const higherHighs = recentCandles.filter((c, i) => i > 0 && c.high > recentCandles[i-1].high).length;
./server/services/tradingEngine.ts:3622:    const lowerLows = recentCandles.filter((c, i) => i > 0 && c.low < recentCandles[i-1].low).length;
./server/services/tradingEngine.ts:3644:    let confidence = 0.5;
./server/services/tradingEngine.ts:3648:      confidence = 0.9;
./server/services/tradingEngine.ts:3651:      confidence = 0.7;
./server/services/tradingEngine.ts:3654:      confidence = 0.5;
./server/services/tradingEngine.ts:3664:    return { shortTerm, mediumTerm, longTerm, alignment, confidence, summary };
./server/services/tradingEngine.ts:3708:      const entryPrice = position.entryPrice;
./server/services/tradingEngine.ts:3709:      const pnlUsd = (currentPrice - entryPrice) * amount;
./server/services/tradingEngine.ts:3710:      const pnlPct = ((currentPrice - entryPrice) / entryPrice) * 100;
./server/services/tradingEngine.ts:3733:          entryPrice: entryPrice.toString(),
./server/services/tradingEngine.ts:3746:*Precio entrada:* $${entryPrice.toFixed(2)}
./server/services/tradingEngine.ts:3804:      const actualPnlUsd = (currentPrice - entryPrice) * sellAmountFinal;
./server/services/tradingEngine.ts:3805:      const actualPnlPct = ((currentPrice - entryPrice) / entryPrice) * 100;
./server/services/tradingEngine.ts:3837:        entryPrice: entryPrice.toString(),
./server/services/tradingEngine.ts:3851:*Precio entrada:* $${entryPrice.toFixed(2)}
./server/services/tradingEngine.ts:3860:      log(`[MANUAL_CLOSE] Cierre exitoso ${pair} (${positionLotId}) - Order: ${txid}, PnL: $${actualPnlUsd.toFixed(2)}`, "trading");
./server/services/tradingEngine.ts:3880:  getOpenPositions(): Map<string, { amount: number; entryPrice: number }> {
./server/services/tradingEngine.ts:3888:      signal: string;
./server/services/tradingEngine.ts:3903:    // Mapeo de razones a espa√±ol (seg√∫n documento SMART_GUARD)
./server/services/tradingEngine.ts:3907:      "SMART_GUARD_POSITION_EXISTS": "Ya hay posici√≥n abierta en este par",
./server/services/tradingEngine.ts:3908:      "SMART_GUARD_MAX_LOTS_REACHED": "M√°ximo de lotes abiertos alcanzado para este par",
./server/services/tradingEngine.ts:3909:      "STOPLOSS_COOLDOWN": "Enfriamiento post stop-loss activo",
./server/services/tradingEngine.ts:3927:      signal: string;
./server/services/tradingEngine.ts:3951:        const totalPositionUsd = pairPositions.reduce((sum, p) => sum + (p.amount * p.entryPrice), 0);
./server/services/tradingEngine.ts:3967:          signal: result.signal,
./server/services/tradingEngine.ts:3981:        const totalPositionUsd = pairPositions.reduce((sum, p) => sum + (p.amount * p.entryPrice), 0);
./server/services/tradingEngine.ts:3998:          signal: "NONE",
./attached_assets/Pasted-Quiero-que-a-adas-al-panel-web-del-bot-una-NUEVA-PESTA-_1765418061834.txt:20:      - Qu√© estrategias incluye (momentum, mean reversion, scalping, grid, etc.)
./attached_assets/Pasted-Quiero-que-a-adas-al-panel-web-del-bot-una-NUEVA-PESTA-_1765418061834.txt:26:      3. Elegir estrategia
./attached_assets/Pasted-Quiero-que-a-adas-al-panel-web-del-bot-una-NUEVA-PESTA-_1765418061834.txt:27:      4. Ajustar par√°metros clave (riesgo, tama√±o de posici√≥n, stop loss, take profit, etc.)
./attached_assets/Pasted-Quiero-que-a-adas-al-panel-web-del-bot-una-NUEVA-PESTA-_1765418061834.txt:47:      - Par√°metros espec√≠ficos de cada estrategia (por ejemplo, EMAs, RSI, MACD, bandas de Bollinger, etc.)
./attached_assets/Pasted-Quiero-que-a-adas-al-panel-web-del-bot-una-NUEVA-PESTA-_1765418061834.txt:56:      - Checklist antes de dejar el bot trabajando (API correcta, saldo, modo correcto, estrategia elegida, etc.)
./attached_assets/Pasted-Quiero-mejorar-y-ordenar-completamente-la-configuraci-n_1765409483679.txt:87:    - estrategia actual,
./attached_assets/Pasted-Quiero-mejorar-y-ordenar-completamente-la-configuraci-n_1765409483679.txt:191:- C√≥mo se guardan ahora las credenciales y en qu√© modelo/tabla.
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765243031663.txt:39:kraken-bot-db  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765243031663.txt:43:kraken-bot-db  | 2025-12-09 01:15:05.405 UTC [47] LOG:  background worker "logical replication launcher" (PID 53) exited with exit code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765243031663.txt:49:kraken-bot-db  | server stopped
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242709259.txt:51:kraken-bot-db   | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242709259.txt:55:kraken-bot-db   | 2025-12-09 01:09:20.794 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242709259.txt:61:kraken-bot-db   | server stopped
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242709259.txt:178:kraken-bot-app exited with code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242335070.txt:39:kraken-bot-db   | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242335070.txt:43:kraken-bot-db   | 2025-12-09 01:03:09.427 UTC [47] LOG:  background worker "logical replication launcher" (PID 59) exited with exit code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242335070.txt:49:kraken-bot-db   | server stopped
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765242335070.txt:59:kraken-bot-app exited with code 127
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:33:[/share/ZFS37_DATA/share/Container/krakenbot] # SELECT sg_min_entry_usd FROM bot_config LIMIT 1;)
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:189:[/share/ZFS37_DATA/share/Container/krakenbot] # docker ps --filter "name=kraken-bot" --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:226:10:01:45 PM [express] GET /api/scan/diagnostic 200 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T22:01:45.872Z"}
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:267:10:03:16 PM [express] GET /api/open-positions 200 in 63ms :: [{"id":24,"lotId":"LOT-BTCUSD-1766261714737-e0dswz","pair":"BTC/USD","entryPrice":"88224.10000000","amount":"0.00085011","qtyRemaining":"0.00085011","qtyFilled":"0","highestPrice":"88369.90000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/1 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T20:15:14.828Z","updatedAt":"2025-12-20T21:20:26.788Z","currentPrice":"88187","unrealizedPnlUsd":"-0.03","unrealizedPnlPct":"-0.04","entryValueUsd":"75.00","currentValueUsd":"74.97"}]
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:268:10:03:18 PM [express] GET /api/open-positions 200 in 73ms :: [{"id":24,"lotId":"LOT-BTCUSD-1766261714737-e0dswz","pair":"BTC/USD","entryPrice":"88224.10000000","amount":"0.00085011","qtyRemaining":"0.00085011","qtyFilled":"0","highestPrice":"88369.90000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/1 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T20:15:14.828Z","updatedAt":"2025-12-20T21:20:26.788Z","currentPrice":"88186.9","unrealizedPnlUsd":"-0.03","unrealizedPnlPct":"-0.04","entryValueUsd":"75.00","currentValueUsd":"74.97"}]
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:269:10:03:18 PM [express] GET /api/open-positions 304 in 67ms :: [{"id":24,"lotId":"LOT-BTCUSD-1766261714737-e0dswz","pair":"BTC/USD","entryPrice":"88224.10000000","amount":"0.00085011","qtyRemaining":"0.00085011","qtyFilled":"0","highestPrice":"88369.90000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/1 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T20:15:14.828Z","updatedAt":"2025-12-20T21:20:26.788Z","currentPrice":"88186.9","unrealizedPnlUsd":"-0.03","unrealizedPnlPct":"-0.04","entryValueUsd":"75.00","currentValueUsd":"74.97"}]
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:270:10:03:29 PM [express] GET /api/scan/diagnostic 200 in 40ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T22:03:15.889Z"}
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:273:10:03:49 PM [express] GET /api/dashboard 200 in 378ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0017269408","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"308.0753"},"prices":{"XXBTZUSD":{"price":"88187.00000","change":"0.09"},"XETHZUSD":{"price":"2978.57000","change":"0.02"},"SOLUSD":{"price":"126.31000","change":"0.08"},"XXRPZUSD":{"price":"1.93200000","change":"1.26"},"TONUSD":{"price":"1.4940000","change":"0.40"}},"recentTrades":[{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64318695","realizedPnlPct":"-0.0562","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z"},{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53065384","realizedPnlPct":"0.0927","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z"},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z"},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z"},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z"},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z"},{"id":332,"tradeId":"KRAKEN-TZTRQO-DKEHH-CAO7O5","pair":"ETH/USD","type":"buy","price":"2844.79000000","amount":"0.01383878","status":"filled","krakenOrderId":"TZTRQO-DKEHH-CAO7O5","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T09:30:06.086Z","createdAt":"2025-12-20T19:26:52.315Z"},{"id":331,"tradeId":"KRAKEN-TWBCZT-PLFRN-Z63BB7","pair":"SOL/USD","type":"sell","price":"126.14000000","amount":"0.15151515","status":"filled","krakenOrderId":"TWBCZT-PLFRN-Z63BB7","entryPrice":"123.72000000","realizedPnlUsd":"0.21523416","realizedPnlPct":"1.9560","executedAt":"2025-12-18T16:27:42.316Z","createdAt":"2025-12-20T19:26:52.313Z"}]}
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:371:10:05:50 PM [trading] Posici√≥n recuperada: BTC/USD (LOT-BTCUSD-1766261714737-e0dswz) - 0.00085011 @ $88224.10000000 (momentum_candles_15m/15m) [snapshot: SMART_GUARD]
./attached_assets/Pasted-cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull-_1766268400139.txt:375:  "strategy": "momentum",
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:44:9:58:15 PM [trading] Posici√≥n recuperada: BTC/USD (LOT-BTCUSD-1766261714737-e0dswz) - 0.00085011 @ $88224.10000000 (momentum_candles_15m/15m) [snapshot: SMART_GUARD]
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:48:  "strategy": "momentum",
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:61:9:58:15 PM [express] GET /api/config 304 in 9ms :: {"id":1,"isActive":true,"strategy":"momentum","signalTimeframe":"15m","riskLevel":"high","activePairs":["BTC/USD","ETH/USD"],"stopLossPercent":"13.50","takeProfitPercent":"4.00","trailingStopEnabled":true,"trailingStopPercent":"10.00","nonceErrorAlertsEnabled":true,"dailyLossLimitEnabled":true,"dailyLossLimitPercent":"10.00","maxPairExposurePct":"100.00","maxTotalExposurePct":"100.00","riskPerTradePct":"100.00","tradingHoursEnabled":false,"tradingHoursStart":"0","tradingHoursEnd":"23","positionMode":"SMART_GUARD","sgMinEntryUsd":"200.00","sgAllowUnderMin":false,"sgBeAtPct":"2.50","sgFeeCushionPct":"0.45","sgFeeCushionAuto":true,"sgTrailStartPct":"4.00","sgTrailDistancePct":"2.50","sgTrailStepPct":"0.60","sgTpFixedEnabled":true,"sgTpFixedPct":"7.00","sgScaleOutEnabled":false,"sgScaleOutPct":"-30.00","sgMinPartUsd":"50.00","sgScaleOutThreshold":"80.00","sgMaxOpenLotsPerPair":2,"sgPairOverrides":null,"dryRunMode":false,"updatedAt":"2025-12-20T21:32:12.967Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:71:9:58:16 PM [express] GET /api/dashboard 200 in 433ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0017269408","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"308.0753"},"prices":{"XXBTZUSD":{"price":"88163.80000","change":"0.07"},"XETHZUSD":{"price":"2978.62000","change":"0.02"},"SOLUSD":{"price":"126.28000","change":"0.06"},"XXRPZUSD":{"price":"1.92999000","change":"1.15"},"TONUSD":{"price":"1.4940000","change":"0.40"}},"recentTrades":[{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64318695","realizedPnlPct":"-0.0562","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z"},{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53065384","realizedPnlPct":"0.0927","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z"},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z"},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z"},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z"},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z"},{"id":332,"tradeId":"KRAKEN-TZTRQO-DKEHH-CAO7O5","pair":"ETH/USD","type":"buy","price":"2844.79000000","amount":"0.01383878","status":"filled","krakenOrderId":"TZTRQO-DKEHH-CAO7O5","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T09:30:06.086Z","createdAt":"2025-12-20T19:26:52.315Z"},{"id":331,"tradeId":"KRAKEN-TWBCZT-PLFRN-Z63BB7","pair":"SOL/USD","type":"sell","price":"126.14000000","amount":"0.15151515","status":"filled","krakenOrderId":"TWBCZT-PLFRN-Z63BB7","entryPrice":"123.72000000","realizedPnlUsd":"0.21523416","realizedPnlPct":"1.9560","executedAt":"2025-12-18T16:27:42.316Z","createdAt":"2025-12-20T19:26:52.313Z"}]}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:73:9:58:16 PM [express] GET /api/dashboard 304 in 368ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0017269408","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"308.0753"},"prices":{"XXBTZUSD":{"price":"88163.80000","change":"0.07"},"XETHZUSD":{"price":"2978.62000","change":"0.02"},"SOLUSD":{"price":"126.28000","change":"0.06"},"XXRPZUSD":{"price":"1.92999000","change":"1.15"},"TONUSD":{"price":"1.4940000","change":"0.40"}},"recentTrades":[{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64318695","realizedPnlPct":"-0.0562","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z"},{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53065384","realizedPnlPct":"0.0927","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z"},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z"},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z"},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z"},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z"},{"id":332,"tradeId":"KRAKEN-TZTRQO-DKEHH-CAO7O5","pair":"ETH/USD","type":"buy","price":"2844.79000000","amount":"0.01383878","status":"filled","krakenOrderId":"TZTRQO-DKEHH-CAO7O5","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T09:30:06.086Z","createdAt":"2025-12-20T19:26:52.315Z"},{"id":331,"tradeId":"KRAKEN-TWBCZT-PLFRN-Z63BB7","pair":"SOL/USD","type":"sell","price":"126.14000000","amount":"0.15151515","status":"filled","krakenOrderId":"TWBCZT-PLFRN-Z63BB7","entryPrice":"123.72000000","realizedPnlUsd":"0.21523416","realizedPnlPct":"1.9560","executedAt":"2025-12-18T16:27:42.316Z","createdAt":"2025-12-20T19:26:52.313Z"}]}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:75:9:58:17 PM [express] GET /api/trades/closed 304 in 6ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:76:9:58:17 PM [express] GET /api/open-positions 200 in 63ms :: [{"id":24,"lotId":"LOT-BTCUSD-1766261714737-e0dswz","pair":"BTC/USD","entryPrice":"88224.10000000","amount":"0.00085011","qtyRemaining":"0.00085011","qtyFilled":"0","highestPrice":"88369.90000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/1 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T20:15:14.828Z","updatedAt":"2025-12-20T21:20:26.788Z","currentPrice":"88163.8","unrealizedPnlUsd":"-0.05","unrealizedPnlPct":"-0.07","entryValueUsd":"75.00","currentValueUsd":"74.95"}]
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:78:9:58:23 PM [express] GET /api/trades/closed 304 in 5ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:79:9:58:24 PM [express] GET /api/trades/closed 304 in 7ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:80:9:58:24 PM [express] GET /api/trades/closed 304 in 4ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:81:9:58:25 PM [express] GET /api/trades/closed 304 in 4ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:82:9:58:25 PM [express] GET /api/trades/closed 304 in 4ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:83:9:58:25 PM [express] GET /api/trades/closed 304 in 3ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:93:9:58:38 PM [express] GET /api/trades/closed 304 in 4ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:96:9:58:45 PM [express] GET /api/ai/status 304 in 5ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":87,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:97:9:58:46 PM [express] GET /api/ai/diagnostic 200 in 33ms :: {"operationsCount":195,"trainingTradesTotal":130,"closedTradesCount":128,"labeledTradesCount":87,"openTradesCount":2,"openLotsCount":2,"openTradesDescription":"training_trades con isClosed=false","openLotsDescription":"training_trades con qtyRemaining > 0","lastBackfillRun":"2025-12-20T21:15:47.541Z","lastBackfillError":null,"lastTrainRun":null,"lastTrainError":null,"modelVersion":null,"discardReasonsDataset":{"venta_sin_compra_previa":26,"comisiones_anormales":3,"hold_excesivo":1,"pnl_atipico":37},"lastBackfillDiscardReasons":{"venta_sin_compra_previa":115},"winRate":14.942528735632186,"avgPnlNet":-3.812755025977015,"avgHoldTimeMinutes":438.88505747126436,"env":"NAS/PROD","instanceId":"d85473ad0335-129-144ae4bc","dryRun":false}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:98:9:58:52 PM [express] GET /api/scan/diagnostic 200 in 3ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T21:58:45.870Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:99:9:58:55 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T21:58:45.870Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:100:9:58:55 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T21:58:45.870Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:101:9:58:55 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T21:58:45.870Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:104:9:59:01 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:106:9:59:11 PM [express] GET /api/scan/diagnostic 304 in 14ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T21:58:45.870Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:109:9:59:12 PM [express] GET /api/dashboard 200 in 549ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0017269408","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"308.0753"},"prices":{"XXBTZUSD":{"price":"88163.80000","change":"0.07"},"XETHZUSD":{"price":"2978.16000","change":"0.01"},"SOLUSD":{"price":"126.28000","change":"0.06"},"XXRPZUSD":{"price":"1.93000000","change":"1.15"},"TONUSD":{"price":"1.4940000","change":"0.40"}},"recentTrades":[{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64318695","realizedPnlPct":"-0.0562","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z"},{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53065384","realizedPnlPct":"0.0927","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z"},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z"},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z"},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z"},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z"},{"id":332,"tradeId":"KRAKEN-TZTRQO-DKEHH-CAO7O5","pair":"ETH/USD","type":"buy","price":"2844.79000000","amount":"0.01383878","status":"filled","krakenOrderId":"TZTRQO-DKEHH-CAO7O5","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T09:30:06.086Z","createdAt":"2025-12-20T19:26:52.315Z"},{"id":331,"tradeId":"KRAKEN-TWBCZT-PLFRN-Z63BB7","pair":"SOL/USD","type":"sell","price":"126.14000000","amount":"0.15151515","status":"filled","krakenOrderId":"TWBCZT-PLFRN-Z63BB7","entryPrice":"123.72000000","realizedPnlUsd":"0.21523416","realizedPnlPct":"1.9560","executedAt":"2025-12-18T16:27:42.316Z","createdAt":"2025-12-20T19:26:52.313Z"}]}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:110:9:59:12 PM [express] GET /api/dashboard 304 in 530ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0017269408","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"308.0753"},"prices":{"XXBTZUSD":{"price":"88163.80000","change":"0.07"},"XETHZUSD":{"price":"2978.16000","change":"0.01"},"SOLUSD":{"price":"126.28000","change":"0.06"},"XXRPZUSD":{"price":"1.93000000","change":"1.15"},"TONUSD":{"price":"1.4940000","change":"0.40"}},"recentTrades":[{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64318695","realizedPnlPct":"-0.0562","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z"},{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53065384","realizedPnlPct":"0.0927","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z"},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z"},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z"},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z"},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z"},{"id":332,"tradeId":"KRAKEN-TZTRQO-DKEHH-CAO7O5","pair":"ETH/USD","type":"buy","price":"2844.79000000","amount":"0.01383878","status":"filled","krakenOrderId":"TZTRQO-DKEHH-CAO7O5","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T09:30:06.086Z","createdAt":"2025-12-20T19:26:52.315Z"},{"id":331,"tradeId":"KRAKEN-TWBCZT-PLFRN-Z63BB7","pair":"SOL/USD","type":"sell","price":"126.14000000","amount":"0.15151515","status":"filled","krakenOrderId":"TWBCZT-PLFRN-Z63BB7","entryPrice":"123.72000000","realizedPnlUsd":"0.21523416","realizedPnlPct":"1.9560","executedAt":"2025-12-18T16:27:42.316Z","createdAt":"2025-12-20T19:26:52.313Z"}]}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:111:9:59:12 PM [express] GET /api/config 304 in 23ms :: {"id":1,"isActive":true,"strategy":"momentum","signalTimeframe":"15m","riskLevel":"high","activePairs":["BTC/USD","ETH/USD"],"stopLossPercent":"13.50","takeProfitPercent":"4.00","trailingStopEnabled":true,"trailingStopPercent":"10.00","nonceErrorAlertsEnabled":true,"dailyLossLimitEnabled":true,"dailyLossLimitPercent":"10.00","maxPairExposurePct":"100.00","maxTotalExposurePct":"100.00","riskPerTradePct":"100.00","tradingHoursEnabled":false,"tradingHoursStart":"0","tradingHoursEnd":"23","positionMode":"SMART_GUARD","sgMinEntryUsd":"200.00","sgAllowUnderMin":false,"sgBeAtPct":"2.50","sgFeeCushionPct":"0.45","sgFeeCushionAuto":true,"sgTrailStartPct":"4.00","sgTrailDistancePct":"2.50","sgTrailStepPct":"0.60","sgTpFixedEnabled":true,"sgTpFixedPct":"7.00","sgScaleOutEnabled":false,"sgScaleOutPct":"-30.00","sgMinPartUsd":"50.00","sgScaleOutThreshold":"80.00","sgMaxOpenLotsPerPair":2,"sgPairOverrides":null,"dryRunMode":false,"updatedAt":"2025-12-20T21:32:12.967Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:112:9:59:12 PM [express] GET /api/trades/closed 304 in 26ms :: {"trades":[{"id":343,"tradeId":"KRAKEN-TRTRKT-GL4GS-6Y74ZL","pair":"ETH/USD","type":"sell","price":"2981.66000000","amount":"0.02517328","status":"filled","krakenOrderId":"TRTRKT-GL4GS-6Y74ZL","entryPrice":"2978.89791648","realizedPnlUsd":"-0.53","realizedPnlPct":"0.09","executedAt":"2025-12-20T21:25:01.868Z","createdAt":"2025-12-20T21:29:07.189Z","totalUsd":"75.06","entryValueUsd":"74.99"},{"id":342,"tradeId":"AUTO-1766265901677","pair":"ETH/USD","type":"sell","price":"2981.61000000","amount":"0.02517328","status":"filled","krakenOrderId":"O2CDZH-Z3RDZ-DCXS5R","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:25:01.677Z","createdAt":"2025-12-20T21:25:01.678Z","totalUsd":"75.06","entryValueUsd":null},{"id":344,"tradeId":"KRAKEN-TDFHX3-5FYXR-26DBAB","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"TDFHX3-5FYXR-26DBAB","entryPrice":"2984.08798687","realizedPnlUsd":"-0.64","realizedPnlPct":"-0.06","executedAt":"2025-12-20T21:15:27.930Z","createdAt":"2025-12-20T21:29:07.192Z","totalUsd":"75.10","entryValueUsd":"75.14"},{"id":341,"tradeId":"AUTO-1766265327744","pair":"ETH/USD","type":"sell","price":"2982.41000000","amount":"0.02517961","status":"filled","krakenOrderId":"OBCCRY-UZTLG-AJQLM6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T21:15:27.744Z","createdAt":"2025-12-20T21:15:27.744Z","totalUsd":"75.10","entryValueUsd":null},{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"},{"id":303,"tradeId":"KRAKEN-TGFE45-BSKEB-FV3CVE","pair":"BTC/USD","type":"sell","price":"88067.90000000","amount":"0.00085022","status":"filled","krakenOrderId":"TGFE45-BSKEB-FV3CVE","entryPrice":"88185.26510100","realizedPnlUsd":"-0.70","realizedPnlPct":"-0.13","executedAt":"2025-12-20T15:30:19.063Z","createdAt":"2025-12-20T19:26:52.237Z","totalUsd":"74.88","entryValueUsd":"74.98"}],"total":195,"limit":10,"offset":0}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:113:9:59:13 PM [express] GET /api/open-positions 304 in 76ms :: [{"id":24,"lotId":"LOT-BTCUSD-1766261714737-e0dswz","pair":"BTC/USD","entryPrice":"88224.10000000","amount":"0.00085011","qtyRemaining":"0.00085011","qtyFilled":"0","highestPrice":"88369.90000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/1 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T20:15:14.828Z","updatedAt":"2025-12-20T21:20:26.788Z","currentPrice":"88163.8","unrealizedPnlUsd":"-0.05","unrealizedPnlPct":"-0.07","entryValueUsd":"75.00","currentValueUsd":"74.95"}]
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:131:9:59:28 PM [express] GET /api/ai/status 304 in 28ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":87,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:132:9:59:28 PM [express] GET /api/ai/diagnostic 304 in 43ms :: {"operationsCount":195,"trainingTradesTotal":130,"closedTradesCount":128,"labeledTradesCount":87,"openTradesCount":2,"openLotsCount":2,"openTradesDescription":"training_trades con isClosed=false","openLotsDescription":"training_trades con qtyRemaining > 0","lastBackfillRun":"2025-12-20T21:15:47.541Z","lastBackfillError":null,"lastTrainRun":null,"lastTrainError":null,"modelVersion":null,"discardReasonsDataset":{"venta_sin_compra_previa":26,"comisiones_anormales":3,"hold_excesivo":1,"pnl_atipico":37},"lastBackfillDiscardReasons":{"venta_sin_compra_previa":115},"winRate":14.942528735632186,"avgPnlNet":-3.812755025977015,"avgHoldTimeMinutes":438.88505747126436,"env":"NAS/PROD","instanceId":"d85473ad0335-129-144ae4bc","dryRun":false}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:139:9:59:54 PM [express] GET /api/scan/diagnostic 200 in 3ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T21:59:45.882Z"}
./attached_assets/Pasted-12-vulnerabilities-2-low-8-moderate-2-critical-To-addre_1766268137522.txt:175:10:01:45 PM [express] GET /api/scan/diagnostic 200 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al activa","exposureAvailable":{"maxPairAvailable":233.07511034900003,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":true,"positionUsd":75.000189651},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al activa","exposureAvailable":{"maxPairAvailable":308.0753,"maxTotalAvailable":233.07511034900003,"maxAllowed":233.07511034900003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":308.0753,"totalOpenPositions":1,"lastScanAt":"2025-12-20T22:01:45.872Z"}
./attached_assets/Pasted--docker-logs-f-kraken-bot-app-tail-50-migrate-Migration_1766264857423.txt:23:9:06:26 PM [trading] Posici√≥n recuperada: BTC/USD (LOT-BTCUSD-1766261714737-e0dswz) - 0.00085011 @ $88224.10000000 (momentum_candles_15m/15m) [snapshot: SMART_GUARD]
./attached_assets/Pasted--docker-logs-f-kraken-bot-app-tail-50-migrate-Migration_1766264857423.txt:24:9:06:26 PM [trading] Posici√≥n recuperada: ETH/USD (LOT-ETHUSD-1766261715545-jp6j2n) - 0.02517961 @ $2978.60000000 (momentum_candles_15m/15m) [snapshot: SMART_GUARD]
./attached_assets/Pasted--docker-logs-f-kraken-bot-app-tail-50-migrate-Migration_1766264857423.txt:29:  "strategy": "momentum",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:48:8:22:49 PM [express] GET /api/trades/closed 304 in 24ms :: {"trades":[{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":336,"tradeId":"AUTO-1766262038106","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"O44CSM-NNBFL-KJ5NNA","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.106Z","createdAt":"2025-12-20T20:20:38.107Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":335,"tradeId":"AUTO-1766262037597","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"OXS3ZW-QUBBS-ZYSARK","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.597Z","createdAt":"2025-12-20T20:20:37.598Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":334,"tradeId":"AUTO-1766261715543","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"O2Q2YP-5OROB-L37DL2","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.543Z","createdAt":"2025-12-20T20:15:15.543Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":333,"tradeId":"AUTO-1766261714733","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"OOY2HQ-XPL5U-ZENUZP","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.733Z","createdAt":"2025-12-20T20:15:14.734Z","totalUsd":"75.00","entryValueUsd":null},{"id":301,"tradeId":"AUTO-1766249119189","pair":"BTC/USD","type":"sell","price":"88094.80000000","amount":"0.00085022","status":"filled","krakenOrderId":"OJGYZW-GYGGF-ZDGFOM","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T16:45:19.189Z","createdAt":"2025-12-20T16:45:19.190Z","totalUsd":"74.90","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"}],"total":340,"limit":10,"offset":0}
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:50:8:22:52 PM [express] GET /api/config 304 in 5ms :: {"id":1,"isActive":true,"strategy":"momentum","signalTimeframe":"15m","riskLevel":"high","activePairs":["BTC/USD","ETH/USD","XRP/USD"],"stopLossPercent":"13.50","takeProfitPercent":"4.00","trailingStopEnabled":true,"trailingStopPercent":"10.00","nonceErrorAlertsEnabled":true,"dailyLossLimitEnabled":true,"dailyLossLimitPercent":"10.00","maxPairExposurePct":"100.00","maxTotalExposurePct":"100.00","riskPerTradePct":"100.00","tradingHoursEnabled":false,"tradingHoursStart":"0","tradingHoursEnd":"23","positionMode":"SMART_GUARD","sgMinEntryUsd":"200.00","sgAllowUnderMin":false,"sgBeAtPct":"2.50","sgFeeCushionPct":"0.45","sgFeeCushionAuto":true,"sgTrailStartPct":"4.00","sgTrailDistancePct":"2.50","sgTrailStepPct":"0.60","sgTpFixedEnabled":true,"sgTpFixedPct":"7.00","sgScaleOutEnabled":false,"sgScaleOutPct":"-30.00","sgMinPartUsd":"50.00","sgScaleOutThreshold":"80.00","sgMaxOpenLotsPerPair":2,"sgPairOverrides":null,"dryRunMode":false,"updatedAt":"2025-12-20T19:54:04.490Z"}
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:51:8:22:52 PM [express] GET /api/trades/closed 304 in 16ms :: {"trades":[{"id":337,"tradeId":"KRAKEN-TP6REN-PNHBG-N3V4GE","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"TP6REN-PNHBG-N3V4GE","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.252Z","createdAt":"2025-12-20T20:21:06.602Z","totalUsd":"75.00","entryValueUsd":null},{"id":336,"tradeId":"AUTO-1766262038106","pair":"ETH/USD","type":"buy","price":"2979.35000000","amount":"0.02517328","status":"filled","krakenOrderId":"O44CSM-NNBFL-KJ5NNA","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:38.106Z","createdAt":"2025-12-20T20:20:38.107Z","totalUsd":"75.00","entryValueUsd":null},{"id":338,"tradeId":"KRAKEN-TVGVXA-EXTMB-ICKOZ7","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"TVGVXA-EXTMB-ICKOZ7","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.742Z","createdAt":"2025-12-20T20:21:06.605Z","totalUsd":"75.00","entryValueUsd":null},{"id":335,"tradeId":"AUTO-1766262037597","pair":"BTC/USD","type":"buy","price":"88237.00000000","amount":"0.00084998","status":"filled","krakenOrderId":"OXS3ZW-QUBBS-ZYSARK","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:20:37.597Z","createdAt":"2025-12-20T20:20:37.598Z","totalUsd":"75.00","entryValueUsd":null},{"id":339,"tradeId":"KRAKEN-T2HMMV-ONBL6-QQV3TD","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"T2HMMV-ONBL6-QQV3TD","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.682Z","createdAt":"2025-12-20T20:21:06.608Z","totalUsd":"75.00","entryValueUsd":null},{"id":334,"tradeId":"AUTO-1766261715543","pair":"ETH/USD","type":"buy","price":"2978.60000000","amount":"0.02517961","status":"filled","krakenOrderId":"O2Q2YP-5OROB-L37DL2","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:15.543Z","createdAt":"2025-12-20T20:15:15.543Z","totalUsd":"75.00","entryValueUsd":null},{"id":340,"tradeId":"KRAKEN-TG6LWY-GW2UP-KPBJF4","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"TG6LWY-GW2UP-KPBJF4","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.873Z","createdAt":"2025-12-20T20:21:06.611Z","totalUsd":"75.00","entryValueUsd":null},{"id":333,"tradeId":"AUTO-1766261714733","pair":"BTC/USD","type":"buy","price":"88224.10000000","amount":"0.00085011","status":"filled","krakenOrderId":"OOY2HQ-XPL5U-ZENUZP","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T20:15:14.733Z","createdAt":"2025-12-20T20:15:14.734Z","totalUsd":"75.00","entryValueUsd":null},{"id":301,"tradeId":"AUTO-1766249119189","pair":"BTC/USD","type":"sell","price":"88094.80000000","amount":"0.00085022","status":"filled","krakenOrderId":"OJGYZW-GYGGF-ZDGFOM","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T16:45:19.189Z","createdAt":"2025-12-20T16:45:19.190Z","totalUsd":"74.90","entryValueUsd":null},{"id":302,"tradeId":"KRAKEN-TZJPYU-OFG4D-AXWCOD","pair":"BTC/USD","type":"sell","price":"88094.70490000","amount":"0.00085022","status":"filled","krakenOrderId":"TZJPYU-OFG4D-AXWCOD","entryPrice":"88200.70203947","realizedPnlUsd":"-0.69","realizedPnlPct":"-0.12","executedAt":"2025-12-20T16:45:19.156Z","createdAt":"2025-12-20T19:26:52.233Z","totalUsd":"74.90","entryValueUsd":"74.99"}],"total":340,"limit":10,"offset":0}
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:115:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:124:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:133:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:167:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:176:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:185:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:223:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:232:      "signal": "NONE",
./attached_assets/Pasted-t-process-processTicksAndRejections-node-internal-proce_1766262485991.txt:241:      "signal": "NONE",
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:9:2025-12-20 20:20:36.762 UTC [65] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:11:2025-12-20 20:20:37.608 UTC [69] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions" where "open_positions"."lot_id" = $1 limit $2
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:13:2025-12-20 20:20:38.116 UTC [67] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions" where "open_positions"."lot_id" = $1 limit $2
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:15:2025-12-20 20:20:48.898 UTC [86] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:17:2025-12-20 20:21:18.933 UTC [113] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:19:2025-12-20 20:21:46.765 UTC [125] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:21:2025-12-20 20:22:17.814 UTC [157] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:23:2025-12-20 20:22:25.854 UTC [165] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:25:2025-12-20 20:22:36.167 UTC [174] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:27:2025-12-20 20:22:37.352 UTC [175] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:29:2025-12-20 20:22:40.197 UTC [176] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:31:2025-12-20 20:22:44.547 UTC [184] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:33:2025-12-20 20:22:49.964 UTC [194] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:35:2025-12-20 20:22:52.526 UTC [193] STATEMENT:  select "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at" from "open_positions"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:37:2025-12-20 20:23:07.288 UTC [204] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:39:2025-12-20 20:23:37.261 UTC [228] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:41:2025-12-20 20:23:37.333 UTC [229] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:43:2025-12-20 20:24:07.299 UTC [254] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:47:2025-12-20 20:26:07.268 UTC [355] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:49:2025-12-20 20:27:07.253 UTC [405] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-ostgreSQL-Database-directory-appears-to-contain-a-datab_1766262443712.txt:51:2025-12-20 20:27:07.321 UTC [407] STATEMENT:  update "open_positions" set "highest_price" = $1, "updated_at" = $2 where "open_positions"."lot_id" = $3 returning "id", "lot_id", "pair", "entry_price", "amount", "qty_remaining", "qty_filled", "highest_price", "trade_id", "kraken_order_id", "entry_strategy_id", "entry_signal_tf", "signal_confidence", "signal_reason", "entry_mode", "config_snapshot_json", "sg_break_even_activated", "sg_current_stop_price", "sg_trailing_activated", "sg_scale_out_done", "opened_at", "updated_at"
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:1:1:19:49 PM [express] GET /api/dashboard 200 in 530ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0008764708","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"385.8579"},"prices":{"XXBTZUSD":{"price":"88000.00000","change":"-0.12"},"XETHZUSD":{"price":"2972.65000","change":"-0.18"},"SOLUSD":{"price":"125.77000","change":"-0.35"},"XXRPZUSD":{"price":"1.92888000","change":"1.09"},"TONUSD":{"price":"1.4840000","change":"-0.27"}},"recentTrades":[{"id":298,"tradeId":"AUTO-1766236523042","pair":"ETH/USD","type":"sell","price":"2976.02000000","amount":"0.02510326","status":"filled","krakenOrderId":"OLPTY5-5C73E-VIV4D2","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T13:15:23.042Z","createdAt":"2025-12-20T13:15:23.043Z"},{"id":297,"tradeId":"AUTO-1766235622969","pair":"ETH/USD","type":"buy","price":"2987.66000000","amount":"0.02510326","status":"filled","krakenOrderId":"OBMDXM-Q44UY-JPKG7I","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T13:00:22.969Z","createdAt":"2025-12-20T13:00:22.970Z"},{"id":296,"tradeId":"AUTO-1766230225690","pair":"BTC/USD","type":"buy","price":"88212.10000000","amount":"0.00085022","status":"filled","krakenOrderId":"OXZWXO-A5HE7-NGX53G","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T11:30:25.690Z","createdAt":"2025-12-20T11:30:25.690Z"},{"id":295,"tradeId":"AUTO-1766226625709","pair":"SOL/USD","type":"sell","price":"126.02000000","amount":"0.59599491","status":"filled","krakenOrderId":"O6DRRA-ST37Z-O4KWYL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T10:30:25.709Z","createdAt":"2025-12-20T10:30:25.710Z"},{"id":294,"tradeId":"AUTO-1766203224526","pair":"BTC/USD","type":"sell","price":"88183.80000000","amount":"0.00085153","status":"filled","krakenOrderId":"OV4RNM-BGCBN-K5JYJG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T04:00:24.526Z","createdAt":"2025-12-20T04:00:24.527Z"},{"id":293,"tradeId":"AUTO-1766197808270","pair":"BTC/USD","type":"buy","price":"88076.70000000","amount":"0.00085153","status":"filled","krakenOrderId":"OO2ZAD-ABFZE-MAH626","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T02:30:08.270Z","createdAt":"2025-12-20T02:30:08.271Z"},{"id":292,"tradeId":"AUTO-1766189708327","pair":"SOL/USD","type":"buy","price":"125.84000000","amount":"0.59599491","status":"filled","krakenOrderId":"OPN6E3-GUS6C-AZGPSN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T00:15:08.327Z","createdAt":"2025-12-20T00:15:08.328Z"},{"id":291,"tradeId":"AUTO-1766179807569","pair":"XRP/USD","type":"sell","price":"1.90539000","amount":"41.32345243","status":"filled","krakenOrderId":"O52RAG-MSPVG-KRDO6J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:30:07.569Z","createdAt":"2025-12-19T21:30:07.569Z"},{"id":290,"tradeId":"AUTO-1766178907186","pair":"ETH/USD","type":"sell","price":"2984.84000000","amount":"0.00646352","status":"filled","krakenOrderId":"ONJTJP-TCG72-YKNIIZ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:15:07.186Z","createdAt":"2025-12-19T21:15:07.187Z"},{"id":289,"tradeId":"AUTO-1766174404059","pair":"XRP/USD","type":"sell","price":"1.90731000","amount":"41.32345243","status":"filled","krakenOrderId":"OMHARR-NU4FY-AJXHFY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T20:00:04.059Z","createdAt":"2025-12-19T20:00:04.060Z"}]}
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:23:      "signal": "NONE",
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:32:      "signal": "NONE",
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:43:1:19:52 PM [express] GET /api/trades/closed 200 in 5ms :: {"trades":[{"id":298,"tradeId":"AUTO-1766236523042","pair":"ETH/USD","type":"sell","price":"2976.02000000","amount":"0.02510326","status":"filled","krakenOrderId":"OLPTY5-5C73E-VIV4D2","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T13:15:23.042Z","createdAt":"2025-12-20T13:15:23.043Z","totalUsd":"74.71","entryValueUsd":null},{"id":297,"tradeId":"AUTO-1766235622969","pair":"ETH/USD","type":"buy","price":"2987.66000000","amount":"0.02510326","status":"filled","krakenOrderId":"OBMDXM-Q44UY-JPKG7I","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T13:00:22.969Z","createdAt":"2025-12-20T13:00:22.970Z","totalUsd":"75.00","entryValueUsd":null},{"id":296,"tradeId":"AUTO-1766230225690","pair":"BTC/USD","type":"buy","price":"88212.10000000","amount":"0.00085022","status":"filled","krakenOrderId":"OXZWXO-A5HE7-NGX53G","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T11:30:25.690Z","createdAt":"2025-12-20T11:30:25.690Z","totalUsd":"75.00","entryValueUsd":null},{"id":295,"tradeId":"AUTO-1766226625709","pair":"SOL/USD","type":"sell","price":"126.02000000","amount":"0.59599491","status":"filled","krakenOrderId":"O6DRRA-ST37Z-O4KWYL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T10:30:25.709Z","createdAt":"2025-12-20T10:30:25.710Z","totalUsd":"75.11","entryValueUsd":null},{"id":294,"tradeId":"AUTO-1766203224526","pair":"BTC/USD","type":"sell","price":"88183.80000000","amount":"0.00085153","status":"filled","krakenOrderId":"OV4RNM-BGCBN-K5JYJG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T04:00:24.526Z","createdAt":"2025-12-20T04:00:24.527Z","totalUsd":"75.09","entryValueUsd":null},{"id":293,"tradeId":"AUTO-1766197808270","pair":"BTC/USD","type":"buy","price":"88076.70000000","amount":"0.00085153","status":"filled","krakenOrderId":"OO2ZAD-ABFZE-MAH626","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T02:30:08.270Z","createdAt":"2025-12-20T02:30:08.271Z","totalUsd":"75.00","entryValueUsd":null},{"id":292,"tradeId":"AUTO-1766189708327","pair":"SOL/USD","type":"buy","price":"125.84000000","amount":"0.59599491","status":"filled","krakenOrderId":"OPN6E3-GUS6C-AZGPSN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T00:15:08.327Z","createdAt":"2025-12-20T00:15:08.328Z","totalUsd":"75.00","entryValueUsd":null},{"id":291,"tradeId":"AUTO-1766179807569","pair":"XRP/USD","type":"sell","price":"1.90539000","amount":"41.32345243","status":"filled","krakenOrderId":"O52RAG-MSPVG-KRDO6J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:30:07.569Z","createdAt":"2025-12-19T21:30:07.569Z","totalUsd":"78.74","entryValueUsd":null},{"id":290,"tradeId":"AUTO-1766178907186","pair":"ETH/USD","type":"sell","price":"2984.84000000","amount":"0.00646352","status":"filled","krakenOrderId":"ONJTJP-TCG72-YKNIIZ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:15:07.186Z","createdAt":"2025-12-19T21:15:07.187Z","totalUsd":"19.29","entryValueUsd":null},{"id":289,"tradeId":"AUTO-1766174404059","pair":"XRP/USD","type":"sell","price":"1.90731000","amount":"41.32345243","status":"filled","krakenOrderId":"OMHARR-NU4FY-AJXHFY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T20:00:04.059Z","createdAt":"2025-12-19T20:00:04.060Z","totalUsd":"78.82","entryValueUsd":null}],"total":298,"limit":10,"offset":0}
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:44:1:19:52 PM [express] GET /api/open-positions 200 in 151ms :: [{"id":21,"lotId":"LOT-BTCUSD-1766230225694-9lp4l2","pair":"BTC/USD","entryPrice":"88212.10000000","amount":"0.00085022","highestPrice":"88281.40000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD bajista, Vela alcista fuerte, Volumen alto alcista (7.7x), Engulfing alcista | Se√±ales: 4/2 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T11:30:25.744Z","updatedAt":"2025-12-20T12:09:55.472Z","currentPrice":"88000","unrealizedPnlUsd":"-0.18","unrealizedPnlPct":"-0.24","entryValueUsd":"75.00","currentValueUsd":"74.82"},{"id":22,"lotId":"LOT-ETHUSD-1766235622974-xdvhvq","pair":"ETH/USD","entryPrice":"2987.66000000","amount":"0.02510326","highestPrice":"2989.93000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/0 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T13:00:22.983Z","updatedAt":"2025-12-20T13:07:22.632Z","currentPrice":"2971.63","unrealizedPnlUsd":"-0.40","unrealizedPnlPct":"-0.54","entryValueUsd":"75.00","currentValueUsd":"74.60"}]
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:45:1:19:56 PM [express] GET /api/open-positions 304 in 57ms :: [{"id":21,"lotId":"LOT-BTCUSD-1766230225694-9lp4l2","pair":"BTC/USD","entryPrice":"88212.10000000","amount":"0.00085022","highestPrice":"88281.40000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD bajista, Vela alcista fuerte, Volumen alto alcista (7.7x), Engulfing alcista | Se√±ales: 4/2 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T11:30:25.744Z","updatedAt":"2025-12-20T12:09:55.472Z","currentPrice":"88000","unrealizedPnlUsd":"-0.18","unrealizedPnlPct":"-0.24","entryValueUsd":"75.00","currentValueUsd":"74.82"},{"id":22,"lotId":"LOT-ETHUSD-1766235622974-xdvhvq","pair":"ETH/USD","entryPrice":"2987.66000000","amount":"0.02510326","highestPrice":"2989.93000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD alcista, Vela alcista fuerte, Engulfing alcista | Se√±ales: 4/0 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T13:00:22.983Z","updatedAt":"2025-12-20T13:07:22.632Z","currentPrice":"2971.63","unrealizedPnlUsd":"-0.40","unrealizedPnlPct":"-0.54","entryValueUsd":"75.00","currentValueUsd":"74.60"}]
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:54:1:19:58 PM [express] GET /api/open-positions 200 in 56ms :: [{"id":21,"lotId":"LOT-BTCUSD-1766230225694-9lp4l2","pair":"BTC/USD","entryPrice":"88212.10000000","amount":"0.00085022","highestPrice":"88281.40000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD bajista, Vela alcista fuerte, Volumen alto alcista (7.7x), Engulfing alcista | Se√±ales: 4/2 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T11:30:25.744Z","updatedAt":"2025-12-20T12:09:55.472Z","currentPrice":"88000","unrealizedPnlUsd":"-0.18","unrealizedPnlPct":"-0.24","entryValueUsd":"75.00","currentValueUsd":"74.82"}]
./attached_assets/Pasted-1-19-49-PM-express-GET-api-dashboard-200-in-530ms-krake_1766236873001.txt:55:1:20:20 PM [express] GET /api/dashboard 200 in 457ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0008764708","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"385.8579"},"prices":{"XXBTZUSD":{"price":"87976.90000","change":"-0.15"},"XETHZUSD":{"price":"2970.37000","change":"-0.25"},"SOLUSD":{"price":"125.69000","change":"-0.41"},"XXRPZUSD":{"price":"1.92795000","change":"1.04"},"TONUSD":{"price":"1.4840000","change":"-0.27"}},"recentTrades":[{"id":298,"tradeId":"AUTO-1766236523042","pair":"ETH/USD","type":"sell","price":"2976.02000000","amount":"0.02510326","status":"filled","krakenOrderId":"OLPTY5-5C73E-VIV4D2","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T13:15:23.042Z","createdAt":"2025-12-20T13:15:23.043Z"},{"id":297,"tradeId":"AUTO-1766235622969","pair":"ETH/USD","type":"buy","price":"2987.66000000","amount":"0.02510326","status":"filled","krakenOrderId":"OBMDXM-Q44UY-JPKG7I","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T13:00:22.969Z","createdAt":"2025-12-20T13:00:22.970Z"},{"id":296,"tradeId":"AUTO-1766230225690","pair":"BTC/USD","type":"buy","price":"88212.10000000","amount":"0.00085022","status":"filled","krakenOrderId":"OXZWXO-A5HE7-NGX53G","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T11:30:25.690Z","createdAt":"2025-12-20T11:30:25.690Z"},{"id":295,"tradeId":"AUTO-1766226625709","pair":"SOL/USD","type":"sell","price":"126.02000000","amount":"0.59599491","status":"filled","krakenOrderId":"O6DRRA-ST37Z-O4KWYL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T10:30:25.709Z","createdAt":"2025-12-20T10:30:25.710Z"},{"id":294,"tradeId":"AUTO-1766203224526","pair":"BTC/USD","type":"sell","price":"88183.80000000","amount":"0.00085153","status":"filled","krakenOrderId":"OV4RNM-BGCBN-K5JYJG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T04:00:24.526Z","createdAt":"2025-12-20T04:00:24.527Z"},{"id":293,"tradeId":"AUTO-1766197808270","pair":"BTC/USD","type":"buy","price":"88076.70000000","amount":"0.00085153","status":"filled","krakenOrderId":"OO2ZAD-ABFZE-MAH626","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T02:30:08.270Z","createdAt":"2025-12-20T02:30:08.271Z"},{"id":292,"tradeId":"AUTO-1766189708327","pair":"SOL/USD","type":"buy","price":"125.84000000","amount":"0.59599491","status":"filled","krakenOrderId":"OPN6E3-GUS6C-AZGPSN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T00:15:08.327Z","createdAt":"2025-12-20T00:15:08.328Z"},{"id":291,"tradeId":"AUTO-1766179807569","pair":"XRP/USD","type":"sell","price":"1.90539000","amount":"41.32345243","status":"filled","krakenOrderId":"O52RAG-MSPVG-KRDO6J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:30:07.569Z","createdAt":"2025-12-19T21:30:07.569Z"},{"id":290,"tradeId":"AUTO-1766178907186","pair":"ETH/USD","type":"sell","price":"2984.84000000","amount":"0.00646352","status":"filled","krakenOrderId":"ONJTJP-TCG72-YKNIIZ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:15:07.186Z","createdAt":"2025-12-19T21:15:07.187Z"},{"id":289,"tradeId":"AUTO-1766174404059","pair":"XRP/USD","type":"sell","price":"1.90731000","amount":"41.32345243","status":"filled","krakenOrderId":"OMHARR-NU4FY-AJXHFY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T20:00:04.059Z","createdAt":"2025-12-19T20:00:04.060Z"}]}
./attached_assets/Pasted--cd-share-ZFS37-DATA-share-Container-krakenbot-git-pull_1766236026891.txt:27:    Update the SMART_GUARD logic to use a configurable minimum trade entry size, preventing trades from falling below the configured threshold.
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:39:kraken-bot-db  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:43:kraken-bot-db  | 2025-12-09 00:50:45.699 UTC [47] LOG:  background worker "logical replication launcher" (PID 53) exited with exit code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:49:kraken-bot-db  | server stopped
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:67:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:76:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:85:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:94:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765241496632.txt:103:kraken-bot-app exited with code 254
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234154353.txt:41:kraken-bot-db  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234154353.txt:45:kraken-bot-db  | 2025-12-08 22:41:20.228 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234154353.txt:51:kraken-bot-db  | server stopped
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234154353.txt:69:kraken-bot-app exited with code 0
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234075207.txt:41:kraken-bot-db  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234075207.txt:45:kraken-bot-db  | 2025-12-08 22:41:20.228 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234075207.txt:51:kraken-bot-db  | server stopped
./attached_assets/Pasted-Attached-file-Pasted-kraken-bot-db-The-files-belonging-_1765234075207.txt:69:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:39:kraken-bot-db  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:43:kraken-bot-db  | 2025-12-08 22:41:20.228 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:49:kraken-bot-db  | server stopped
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:67:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:76:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:85:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:94:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765233748083.txt:103:kraken-bot-app exited with code 254
./attached_assets/Pasted-kraken-bot-db-kraken-bot-db-PostgreSQL-Database-directo_1765231062487.txt:29:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-kraken-bot-db-PostgreSQL-Database-directo_1765231062487.txt:46:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-kraken-bot-db-PostgreSQL-Database-directo_1765231062487.txt:55:kraken-bot-app exited with code 0
./attached_assets/Pasted-kraken-bot-db-kraken-bot-db-PostgreSQL-Database-directo_1765231062487.txt:64:kraken-bot-app exited with code 254
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765228257774.txt:51:kraken-bot-db   | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765228257774.txt:61:kraken-bot-db   | 2025-12-08 21:08:53.118 UTC [41] LOG:  background worker "logical replication launcher" (PID 47) exited with exit code 1
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765228257774.txt:73:kraken-bot-db   | server stopped
./attached_assets/Pasted-kraken-bot-db-The-files-belonging-to-this-database-syst_1765228257774.txt:149:kraken-bot-app exited with code 254
./shared/schema.ts:9:  strategy: text("strategy").notNull().default("momentum"),
./shared/schema.ts:10:  signalTimeframe: text("signal_timeframe").notNull().default("cycle"),
./shared/schema.ts:13:  stopLossPercent: decimal("stop_loss_percent", { precision: 5, scale: 2 }).notNull().default("5.00"),
./shared/schema.ts:15:  trailingStopEnabled: boolean("trailing_stop_enabled").notNull().default(false),
./shared/schema.ts:16:  trailingStopPercent: decimal("trailing_stop_percent", { precision: 5, scale: 2 }).notNull().default("2.00"),
./shared/schema.ts:27:  // SMART_GUARD configuration
./shared/schema.ts:28:  sgMinEntryUsd: decimal("sg_min_entry_usd", { precision: 10, scale: 2 }).notNull().default("100.00"),
./shared/schema.ts:43:  // SMART_GUARD pair overrides (JSON: { "BTC/USD": { trailDistancePct: 1.0 }, ... })
./shared/schema.ts:70:  entryPrice: decimal("entry_price", { precision: 18, scale: 8 }),
./shared/schema.ts:121:  entryPrice: decimal("entry_price", { precision: 18, scale: 8 }).notNull(),
./shared/schema.ts:128:  entryStrategyId: text("entry_strategy_id").notNull().default("momentum_cycle"),
./shared/schema.ts:129:  entrySignalTf: text("entry_signal_tf").notNull().default("cycle"),
./shared/schema.ts:130:  signalConfidence: decimal("signal_confidence", { precision: 5, scale: 2 }),
./shared/schema.ts:131:  signalReason: text("signal_reason"),
./shared/schema.ts:132:  entryMode: text("entry_mode"),
./shared/schema.ts:134:  // SMART_GUARD dynamic state
./shared/schema.ts:136:  sgCurrentStopPrice: decimal("sg_current_stop_price", { precision: 18, scale: 8 }),
./shared/schema.ts:137:  sgTrailingActivated: boolean("sg_trailing_activated").default(false),
./shared/schema.ts:180:  entryTs: timestamp("entry_ts").notNull(),
./shared/schema.ts:181:  exitTs: timestamp("exit_ts"),
./shared/schema.ts:182:  entryPrice: decimal("entry_price", { precision: 18, scale: 8 }).notNull(),
./shared/schema.ts:183:  exitPrice: decimal("exit_price", { precision: 18, scale: 8 }),
./shared/schema.ts:193:export const aiShadowDecisions = pgTable("ai_shadow_decisions", {
./shared/schema.ts:206:  strategyId: text("strategy_id"),
./shared/schema.ts:210:  entryPrice: decimal("entry_price", { precision: 18, scale: 8 }).notNull(),
./shared/schema.ts:211:  exitPrice: decimal("exit_price", { precision: 18, scale: 8 }),
./shared/schema.ts:212:  entryAmount: decimal("entry_amount", { precision: 18, scale: 8 }).notNull(),
./shared/schema.ts:213:  exitAmount: decimal("exit_amount", { precision: 18, scale: 8 }),
./shared/schema.ts:215:  entryFee: decimal("entry_fee", { precision: 18, scale: 8 }).notNull().default("0"),
./shared/schema.ts:216:  exitFee: decimal("exit_fee", { precision: 18, scale: 8 }),
./shared/schema.ts:228:  entryTs: timestamp("entry_ts").notNull(),
./shared/schema.ts:229:  exitTs: timestamp("exit_ts"),
./shared/schema.ts:235:  filterEnabled: boolean("filter_enabled").default(false),
./shared/schema.ts:236:  shadowEnabled: boolean("shadow_enabled").default(false),
./shared/schema.ts:237:  modelPath: text("model_path"),
./shared/schema.ts:238:  modelVersion: text("model_version"),
./client/src/index.css:103:  text-shadow: 0 0 10px hsl(180 100% 50% / 0.5);
./client/src/index.css:108:  backdrop-filter: blur(12px);
./client/src/hooks/useTerminalWebSocket.ts:146:  const stopSource = useCallback(() => {
./client/src/hooks/useTerminalWebSocket.ts:178:    stopSource,
./client/src/hooks/use-toast.ts:124:        toasts: state.toasts.filter((t) => t.id !== action.toastId),
./client/src/pages/Terminal.tsx:49:  entryPrice: string;
./client/src/pages/Terminal.tsx:56:  entryValueUsd: string;
./client/src/pages/Terminal.tsx:58:  entryStrategyId: string;
./client/src/pages/Terminal.tsx:59:  entrySignalTf: string;
./client/src/pages/Terminal.tsx:60:  signalConfidence: string | null;
./client/src/pages/Terminal.tsx:62:  entryMode?: string | null;
./client/src/pages/Terminal.tsx:73:  entryPrice: string | null;
./client/src/pages/Terminal.tsx:75:  entryValueUsd: string | null;
./client/src/pages/Terminal.tsx:375:  const formatStrategyLabel = (strategyId: string, timeframe: string) => {
./client/src/pages/Terminal.tsx:376:    const strategyMap: Record<string, string> = {
./client/src/pages/Terminal.tsx:391:    const strategyName = strategyMap[strategyId] || strategyId.split('_')[0]?.substring(0, 3).toUpperCase() || "MOM";
./client/src/pages/Terminal.tsx:394:    return { strategyName, tfLabel, isCandles };
./client/src/pages/Terminal.tsx:523:                    <SelectTrigger className="w-[90px] h-8 text-xs font-mono bg-card/50 border-border/50" data-testid="select-type-filter">
./client/src/pages/Terminal.tsx:534:                    <SelectTrigger className="w-[100px] h-8 text-xs font-mono bg-card/50 border-border/50" data-testid="select-pair-filter">
./client/src/pages/Terminal.tsx:546:                    <SelectTrigger className="w-[100px] h-8 text-xs font-mono bg-card/50 border-border/50" data-testid="select-result-filter">
./client/src/pages/Terminal.tsx:637:                        const strategyInfo = formatStrategyLabel(pos.entryStrategyId || "momentum", pos.entrySignalTf || "cycle");
./client/src/pages/Terminal.tsx:655:                                  <Badge variant="outline" className={`text-[10px] px-1.5 py-0 font-mono ${strategyInfo.isCandles ? 'border-cyan-500/50 text-cyan-400' : 'border-primary/50 text-primary'}`}>
./client/src/pages/Terminal.tsx:656:                                    {strategyInfo.isCandles ? <CandlestickChart className="h-2.5 w-2.5 mr-0.5" /> : <Activity className="h-2.5 w-2.5 mr-0.5" />}
./client/src/pages/Terminal.tsx:657:                                    {strategyInfo.strategyName}/{strategyInfo.tfLabel}
./client/src/pages/Terminal.tsx:659:                                  {pos.entryMode && (
./client/src/pages/Terminal.tsx:662:                                      {pos.entryMode}
./client/src/pages/Terminal.tsx:670:                                  {botConfig?.positionMode === 'SMART_GUARD' && (
./client/src/pages/Terminal.tsx:687:                                  <div className="font-mono font-medium text-sm">${formatPrice(pos.entryPrice)}</div>
./client/src/pages/Terminal.tsx:691:                                  <div className="font-mono font-medium text-sm text-blue-400">${parseFloat(pos.entryValueUsd).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
./client/src/pages/Strategies.tsx:18:  strategy: string;
./client/src/pages/Strategies.tsx:19:  signalTimeframe: string;
./client/src/pages/Strategies.tsx:22:  stopLossPercent: string;
./client/src/pages/Strategies.tsx:24:  trailingStopEnabled: boolean;
./client/src/pages/Strategies.tsx:25:  trailingStopPercent: string;
./client/src/pages/Strategies.tsx:46:  { id: "low", name: "Bajo", description: "Posiciones peque√±as, stops ajustados", color: "text-green-500" },
./client/src/pages/Strategies.tsx:87:      ? currentPairs.filter(p => p !== pair)
./client/src/pages/Strategies.tsx:134:                {STRATEGIES.map((strategy) => (
./client/src/pages/Strategies.tsx:136:                    key={strategy.id}
./client/src/pages/Strategies.tsx:137:                    onClick={() => updateMutation.mutate({ strategy: strategy.id })}
./client/src/pages/Strategies.tsx:139:                      config?.strategy === strategy.id
./client/src/pages/Strategies.tsx:143:                    data-testid={`strategy-${strategy.id}`}
./client/src/pages/Strategies.tsx:146:                      <div className={`p-2 rounded-lg ${config?.strategy === strategy.id ? "bg-primary/20" : "bg-muted"}`}>
./client/src/pages/Strategies.tsx:147:                        <strategy.icon className={`h-5 w-5 ${config?.strategy === strategy.id ? "text-primary" : "text-muted-foreground"}`} />
./client/src/pages/Strategies.tsx:150:                        <div className="font-medium">{strategy.name}</div>
./client/src/pages/Strategies.tsx:151:                        <div className="text-sm text-muted-foreground">{strategy.description}</div>
./client/src/pages/Strategies.tsx:153:                      {config?.strategy === strategy.id && (
./client/src/pages/Strategies.tsx:162:            {config?.strategy === "momentum" && (
./client/src/pages/Strategies.tsx:175:                      onClick={() => updateMutation.mutate({ signalTimeframe: tf.id } as any)}
./client/src/pages/Strategies.tsx:177:                        config?.signalTimeframe === tf.id
./client/src/pages/Strategies.tsx:184:                        <div className={`p-2 rounded-lg ${config?.signalTimeframe === tf.id ? "bg-cyan-500/20" : "bg-muted"}`}>
./client/src/pages/Strategies.tsx:186:                            <Clock className={`h-4 w-4 ${config?.signalTimeframe === tf.id ? "text-cyan-500" : "text-muted-foreground"}`} />
./client/src/pages/Strategies.tsx:188:                            <CandlestickChart className={`h-4 w-4 ${config?.signalTimeframe === tf.id ? "text-cyan-500" : "text-muted-foreground"}`} />
./client/src/pages/Strategies.tsx:195:                        {config?.signalTimeframe === tf.id && (
./client/src/pages/Strategies.tsx:296:              <CardDescription>Configura stop-loss, take-profit y trailing stop para proteger tu capital</CardDescription>
./client/src/pages/Strategies.tsx:306:                    <span className="font-mono text-lg text-red-500">-{parseFloat(config?.stopLossPercent || "5").toFixed(1)}%</span>
./client/src/pages/Strategies.tsx:309:                    value={[parseFloat(config?.stopLossPercent || "5")]}
./client/src/pages/Strategies.tsx:310:                    onValueChange={(value) => updateMutation.mutate({ stopLossPercent: value[0].toString() } as any)}
./client/src/pages/Strategies.tsx:315:                    data-testid="slider-stop-loss"
./client/src/pages/Strategies.tsx:351:                    checked={config?.trailingStopEnabled || false}
./client/src/pages/Strategies.tsx:352:                    onCheckedChange={(checked) => updateMutation.mutate({ trailingStopEnabled: checked } as any)}
./client/src/pages/Strategies.tsx:353:                    data-testid="switch-trailing-stop"
./client/src/pages/Strategies.tsx:357:                {config?.trailingStopEnabled && (
./client/src/pages/Strategies.tsx:361:                      <span className="font-mono text-lg text-cyan-500">{parseFloat(config?.trailingStopPercent || "2").toFixed(1)}%</span>
./client/src/pages/Strategies.tsx:364:                      value={[parseFloat(config?.trailingStopPercent || "2")]}
./client/src/pages/Strategies.tsx:365:                      onValueChange={(value) => updateMutation.mutate({ trailingStopPercent: value[0].toString() } as any)}
./client/src/pages/Strategies.tsx:370:                      data-testid="slider-trailing-stop"
./client/src/pages/Strategies.tsx:383:                  <br />‚Ä¢ <span className="text-red-500">Stop-Loss:</span> Se vende si baja a ${(100000 * (1 - parseFloat(config?.stopLossPercent || "5") / 100)).toLocaleString()}
./client/src/pages/Strategies.tsx:385:                  {config?.trailingStopEnabled && (
./client/src/pages/Strategies.tsx:387:                      <br />‚Ä¢ <span className="text-cyan-500">Trailing Stop:</span> Si sube a $105,000 y luego cae {config?.trailingStopPercent}%, se vende a ${(105000 * (1 - parseFloat(config?.trailingStopPercent || "2") / 100)).toLocaleString()}
./client/src/pages/Settings.tsx:27:  filterEnabled: boolean;
./client/src/pages/Settings.tsx:28:  shadowEnabled: boolean;
./client/src/pages/Settings.tsx:29:  modelLoaded: boolean;
./client/src/pages/Settings.tsx:53:  modelVersion: string | null;
./client/src/pages/Settings.tsx:64:  strategy: string;
./client/src/pages/Settings.tsx:67:  stopLossPercent: string;
./client/src/pages/Settings.tsx:69:  trailingStopEnabled: boolean;
./client/src/pages/Settings.tsx:70:  trailingStopPercent: string;
./client/src/pages/Settings.tsx:76:  // SMART_GUARD fields
./client/src/pages/Settings.tsx:215:      toast.error("Error al entrenar modelo");
./client/src/pages/Settings.tsx:220:    mutationFn: async (payload: { filterEnabled?: boolean; shadowEnabled?: boolean }) => {
./client/src/pages/Settings.tsx:504:                        <SelectItem value="SMART_GUARD">SMART_GUARD</SelectItem>
./client/src/pages/Settings.tsx:512:                    : config?.positionMode === "SMART_GUARD"
./client/src/pages/Settings.tsx:520:                  ) : config?.positionMode === "SMART_GUARD" ? (
./client/src/pages/Settings.tsx:522:                      <strong>Modo SMART_GUARD activo:</strong> Una posici√≥n por par con protecci√≥n inteligente: break-even autom√°tico, stop din√°mico (trailing) y salida escalonada opcional.
./client/src/pages/Settings.tsx:531:                {config?.positionMode === "SMART_GUARD" && (
./client/src/pages/Settings.tsx:535:                      Configuraci√≥n SMART_GUARD
./client/src/pages/Settings.tsx:550:                          data-testid="input-sg-min-entry"
./client/src/pages/Settings.tsx:552:                        <p className="text-xs text-muted-foreground" data-testid="text-sg-min-entry-desc">No entrar si el monto disponible es menor a este valor.</p>
./client/src/pages/Settings.tsx:574:                        <p className="text-xs text-muted-foreground" data-testid="text-sg-max-lots-desc">N√∫mero m√°ximo de posiciones abiertas por par (1 = una entrada, 2+ = permitir DCA en SMART_GUARD).</p>
./client/src/pages/Settings.tsx:587:                        <p className="text-xs text-muted-foreground" data-testid="text-sg-be-at-desc">Mover stop a break-even cuando la ganancia alcance este %.</p>
./client/src/pages/Settings.tsx:622:                        <p className="text-xs text-muted-foreground" data-testid="text-sg-trail-start-desc">El trailing stop se activa cuando la ganancia alcanza este %.</p>
./client/src/pages/Settings.tsx:635:                        <p className="text-xs text-muted-foreground" data-testid="text-sg-trail-distance-desc">Distancia del stop respecto al precio m√°ximo alcanzado.</p>
./client/src/pages/Settings.tsx:648:                        <p className="text-xs text-muted-foreground" data-testid="text-sg-trail-step-desc">El stop sube en escalones de al menos este % para evitar spam.</p>
./client/src/pages/Settings.tsx:684:                          <p className="text-xs text-muted-foreground" data-testid="text-sg-scale-out-desc">Vender una parte cuando la se√±al es muy fuerte, el resto con trailing.</p>
./client/src/pages/Settings.tsx:749:                    <CardDescription>Filtro predictivo basado en Machine Learning.</CardDescription>
./client/src/pages/Settings.tsx:782:                          {aiDiagnostic.modelVersion && (
./client/src/pages/Settings.tsx:783:                            <span className="text-xs font-mono text-primary">{aiDiagnostic.modelVersion}</span>
./client/src/pages/Settings.tsx:870:                                    desc: 'Exit timestamp antes de entry timestamp' 
./client/src/pages/Settings.tsx:883:                              üí° Estos trades se excluyen para evitar sesgos en el modelo ML
./client/src/pages/Settings.tsx:944:                          checked={aiStatus.shadowEnabled}
./client/src/pages/Settings.tsx:945:                          onCheckedChange={(checked) => toggleAiMutation.mutate({ shadowEnabled: checked })}
./client/src/pages/Settings.tsx:946:                          data-testid="switch-ai-shadow"
./client/src/pages/Settings.tsx:952:                          <p className="text-xs text-muted-foreground">Bloquea trades con baja probabilidad de √©xito</p>
./client/src/pages/Settings.tsx:955:                          checked={aiStatus.filterEnabled}
./client/src/pages/Settings.tsx:957:                          onCheckedChange={(checked) => toggleAiMutation.mutate({ filterEnabled: checked })}
./client/src/pages/Settings.tsx:958:                          data-testid="switch-ai-filter"
./client/src/pages/Settings.tsx:996:                    <p className="text-sm text-muted-foreground">Pol√≠tica de reinicio de Docker (--restart unless-stopped)</p>
./client/src/pages/Settings.tsx:1076:  const availablePairs = activePairs.filter(p => !pairsWithOverrides.includes(p));
./client/src/pages/Settings.tsx:1154:                    e.stopPropagation();
./client/src/pages/Settings.tsx:1229:  const availableFields = OVERRIDE_FIELDS.filter(f => !activeKeys.includes(f.key));
./client/src/pages/Dashboard.tsx:18:  strategy: string;
./client/src/pages/Monitor.tsx:121:  const filteredEvents = useMemo(() => {
./client/src/pages/Monitor.tsx:122:    return events.filter((event) => {
./client/src/pages/Monitor.tsx:141:    const last24h = events.filter(e => {
./client/src/pages/Monitor.tsx:148:      errors: last24h.filter(e => e.level === "ERROR").length,
./client/src/pages/Monitor.tsx:149:      warnings: last24h.filter(e => e.level === "WARN").length,
./client/src/pages/Monitor.tsx:150:      trades: last24h.filter(e => e.type === "TRADE_EXECUTED").length,
./client/src/pages/Monitor.tsx:161:    const fromEvents = events.map(e => e.meta?.pair).filter((p): p is string => Boolean(p));
./client/src/pages/Monitor.tsx:171:    navigator.clipboard.writeText(JSON.stringify(filteredEvents, null, 2));
./client/src/pages/Monitor.tsx:175:    const blob = new Blob([JSON.stringify(filteredEvents, null, 2)], { type: "application/json" });
./client/src/pages/Monitor.tsx:186:      prev.includes(level) ? prev.filter(l => l !== level) : [...prev, level]
./client/src/pages/Monitor.tsx:273:                      data-testid={`button-filter-${level.toLowerCase()}`}
./client/src/pages/Monitor.tsx:349:                <div className="flex flex-wrap gap-1" data-testid="filter-type-container">
./client/src/pages/Monitor.tsx:360:                        prev.includes(type) ? prev.filter(t => t !== type) : [...prev, type]
./client/src/pages/Monitor.tsx:362:                      data-testid={`filter-type-${type}`}
./client/src/pages/Monitor.tsx:368:                    <Button variant="ghost" size="sm" className="h-5 text-xs" onClick={() => setTypeFilter([])} data-testid="button-clear-type-filter">
./client/src/pages/Monitor.tsx:373:                <div className="flex flex-wrap gap-1" data-testid="filter-pair-container">
./client/src/pages/Monitor.tsx:384:                        prev.includes(pair) ? prev.filter(p => p !== pair) : [...prev, pair]
./client/src/pages/Monitor.tsx:386:                      data-testid={`filter-pair-${pair.replace("/", "-")}`}
./client/src/pages/Monitor.tsx:392:                    <Button variant="ghost" size="sm" className="h-5 text-xs" onClick={() => setPairFilter([])} data-testid="button-clear-pair-filter">
./client/src/pages/Monitor.tsx:404:                {filteredEvents.length === 0 ? (
./client/src/pages/Monitor.tsx:409:                  filteredEvents.map((event, idx) => (
./client/src/pages/Monitor.tsx:522:    stopSource,
./client/src/pages/Monitor.tsx:597:              onClick={stopSource}
./client/src/pages/Monitor.tsx:598:              data-testid="button-stop-source"
./client/src/pages/Monitor.tsx:713:  signal: string;
./client/src/pages/Monitor.tsx:736:  const getSignalBadge = (signal: string) => {
./client/src/pages/Monitor.tsx:737:    switch (signal) {
./client/src/pages/Monitor.tsx:844:                          <td className="py-2 px-3">{getSignalBadge(p.signal)}</td>
./client/src/pages/Guide.tsx:80:                  de compra/venta de forma aut√≥noma seg√∫n la estrategia configurada.
./client/src/pages/Guide.tsx:162:                    { step: 3, title: "Elegir estrategia", desc: "En la p√°gina Estrategias, selecciona el algoritmo que mejor se adapte a tu estilo (momentum, scalping, etc.).", icon: Activity },
./client/src/pages/Guide.tsx:199:                  <AccordionItem value="strategy">
./client/src/pages/Guide.tsx:229:                  <AccordionItem value="signalmode">
./client/src/pages/Guide.tsx:237:                      <p><strong>¬øQu√© es?</strong> Define cu√°ndo y c√≥mo el bot eval√∫a las se√±ales de trading cuando usas la estrategia Momentum.</p>
./client/src/pages/Guide.tsx:274:                          <p className="text-muted-foreground text-xs">Posiciones peque√±as, stops ajustados. Menor ganancia pero menor riesgo.</p>
./client/src/pages/Guide.tsx:288:                  <AccordionItem value="stoploss">
./client/src/pages/Guide.tsx:332:                  <AccordionItem value="trailing">
./client/src/pages/Guide.tsx:340:                      <p><strong>¬øQu√© es?</strong> Un stop loss din√°mico que sigue al precio cuando este sube, asegurando ganancias progresivamente.</p>
./client/src/pages/Guide.tsx:344:                          Si activas Trailing Stop al 2% y el precio sube un 5%, el stop se mueve autom√°ticamente para asegurar al menos un 3% de ganancia.
./client/src/pages/Guide.tsx:427:                            <li>‚Ä¢ <strong>ATR:</strong> Volatilidad para ajustar stops din√°micos</li>
./client/src/pages/Guide.tsx:514:                          ‚Ä¢ Puedes ver en la tabla de posiciones qu√© estrategia abri√≥ cada trade<br/>
./client/src/pages/Guide.tsx:515:                          ‚Ä¢ Al ampliar una posici√≥n existente, se mantiene la estrategia original<br/>
./client/src/pages/Guide.tsx:556:                  <AccordionItem value="filters">
./client/src/components/dashboard/ChartWidget.tsx:128:                  <stop offset="5%" stopColor="#00FF88" stopOpacity={0.4} />
./client/src/components/dashboard/ChartWidget.tsx:129:                  <stop offset="50%" stopColor="#00FF88" stopOpacity={0.15} />
./client/src/components/dashboard/ChartWidget.tsx:130:                  <stop offset="95%" stopColor="#00FF88" stopOpacity={0} />
./client/src/components/dashboard/BotControl.tsx:33:  const strategyId = config?.strategy || "momentum";
./client/src/components/dashboard/BotControl.tsx:36:  const currentStrategy = STRATEGIES[strategyId] || STRATEGIES.momentum;
./client/src/components/dashboard/AssetCard.tsx:17:    <Card className="glass-panel border-border/50 shadow-lg relative overflow-hidden group">
./client/src/components/ui/button.tsx:17:          "bg-destructive text-destructive-foreground shadow-sm border-destructive-border",
./client/src/components/ui/button.tsx:20:          // Inherits the current text color. Uses shadow-xs. no shadow on active
./client/src/components/ui/button.tsx:22:          " border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",
./client/src/components/ui/button.tsx:24:          // @replit border, no hover, no shadow, secondary border.
./client/src/components/ui/alert-dialog.tsx:37:        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
./client/src/components/ui/input-otp.tsx:42:        "relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",
./client/src/components/ui/dropdown-menu.tsx:50:      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
./client/src/components/ui/dropdown-menu.tsx:68:        "z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",
./client/src/components/ui/slider.tsx:21:    <SliderPrimitive.Thumb className="block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50" />
./client/src/components/ui/toggle.tsx:14:          "border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",
./client/src/components/ui/calendar.tsx:73:          "has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",
./client/src/components/ui/input.tsx:11:          "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
./client/src/components/ui/sonner.tsx:18:            "group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",
./client/src/components/ui/switch.tsx:12:      "peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
./client/src/components/ui/switch.tsx:20:        "pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"
./client/src/components/ui/select.tsx:22:      "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
./client/src/components/ui/select.tsx:78:        "relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",
./client/src/components/ui/context-menu.tsx:47:      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",
./client/src/components/ui/context-menu.tsx:63:        "z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",
./client/src/components/ui/dialog.tsx:39:        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
./client/src/components/ui/menubar.tsx:44:      "flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm",
./client/src/components/ui/menubar.tsx:95:      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]",
./client/src/components/ui/menubar.tsx:118:          "z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]",
./client/src/components/ui/popover.tsx:22:        "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",
./client/src/components/ui/navigation-menu.tsx:89:        "origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",
./client/src/components/ui/navigation-menu.tsx:112:    <div className="relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md" />
./client/src/components/ui/button-group.tsx:52:        "bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none",
./client/src/components/ui/input-group.tsx:15:        "group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]",
./client/src/components/ui/input-group.tsx:81:  "flex items-center gap-2 text-sm shadow-none",
./client/src/components/ui/input-group.tsx:137:        "flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",
./client/src/components/ui/input-group.tsx:153:        "flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent",
./client/src/components/ui/checkbox.tsx:14:      "grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",
./client/src/components/ui/sheet.tsx:34:  "fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",
./client/src/components/ui/badge.tsx:15:          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate
./client/src/components/ui/badge.tsx:16:          "border-transparent bg-primary text-primary-foreground shadow-xs",
./client/src/components/ui/badge.tsx:21:          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate
./client/src/components/ui/badge.tsx:22:          "border-transparent bg-destructive text-destructive-foreground shadow-xs",
./client/src/components/ui/badge.tsx:23:          // @replit shadow-xs" - use badge outline variable
./client/src/components/ui/toast.tsx:26:  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
./client/src/components/ui/tabs.tsx:30:      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
./client/src/components/ui/card.tsx:12:      "rounded-xl border bg-card text-card-foreground shadow",
./client/src/components/ui/hover-card.tsx:19:      "z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]",
./client/src/components/ui/textarea.tsx:12:        "flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
./client/src/components/ui/sidebar.tsx:247:          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
./client/src/components/ui/sidebar.tsx:314:        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
./client/src/components/ui/sidebar.tsx:330:      className={cn("bg-background h-8 w-full shadow-none", className)}
./client/src/components/ui/sidebar.tsx:484:          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
./client/src/components/ui/chart.tsx:69:  const colorConfig = Object.entries(config).filter(
./client/src/components/ui/chart.tsx:180:          "grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",
./client/src/components/ui/chart.tsx:187:            .filter((item) => item.type !== "none")
./client/src/components/ui/chart.tsx:289:          .filter((item) => item.type !== "none")
./client/src/components/ui/radio-group.tsx:29:        "aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:57:8:39:29 PM [express] GET /api/config 200 in 3ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:36:59.418Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:59:8:39:42 PM [express] GET /api/dashboard 304 in 17ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:61:8:40:02 PM [express] GET /api/dashboard 304 in 22ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:66:8:40:33 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:36:59.418Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:67:8:40:37 PM [express] POST /api/config 200 in 6ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:68:8:40:37 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:69:8:40:41 PM [express] GET /api/dashboard 200 in 4ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"mean_reversion","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:78:8:44:32 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:79:8:44:34 PM [express] POST /api/config 200 in 4ms :: {"id":1,"isActive":false,"strategy":"scalping","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:34.067Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:80:8:44:34 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"scalping","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:34.067Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:81:8:44:35 PM [express] POST /api/config 200 in 3ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:82:8:44:35 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:84:8:44:39 PM [express] GET /api/dashboard 200 in 418ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3325.00000","change":"6.42"},"SOLUSD":{"price":"139.96000","change":"5.01"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:85:8:44:50 PM [express] GET /api/dashboard 200 in 356ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3326.19000","change":"6.46"},"SOLUSD":{"price":"140.00000","change":"5.04"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:86:8:44:55 PM [express] GET /api/dashboard 200 in 262ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3327.19000","change":"6.49"},"SOLUSD":{"price":"140.00000","change":"5.04"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:92:8:46:01 PM [express] GET /api/dashboard 200 in 389ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.60000","change":"2.60"},"XETHZUSD":{"price":"3326.92000","change":"6.48"},"SOLUSD":{"price":"139.97000","change":"5.02"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:93:8:46:03 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:94:8:46:36 PM [express] POST /api/config 200 in 15ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:46:36.293Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:95:8:46:36 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:46:36.293Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:96:8:46:39 PM [express] POST /api/config 200 in 4ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:39.897Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:97:8:46:39 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:39.897Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:98:8:46:48 PM [express] POST /api/config 200 in 116ms :: {"id":1,"isActive":true,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:48.753Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:99:8:46:48 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":true,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:48.753Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:101:8:51:15 PM [express] GET /api/dashboard 200 in 363ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93166.50000","change":"2.78"},"XETHZUSD":{"price":"3336.95000","change":"6.80"},"SOLUSD":{"price":"140.28000","change":"5.25"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:102:9:10:18 PM [express] GET /api/dashboard 200 in 372ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93018.70000","change":"2.61"},"XETHZUSD":{"price":"3313.01000","change":"6.04"},"SOLUSD":{"price":"139.74000","change":"4.85"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:109:8:39:29 PM [express] GET /api/config 200 in 3ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:36:59.418Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:111:8:39:42 PM [express] GET /api/dashboard 304 in 17ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:113:8:40:02 PM [express] GET /api/dashboard 304 in 22ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:118:8:40:33 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:36:59.418Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:119:8:40:37 PM [express] POST /api/config 200 in 6ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:120:8:40:37 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:121:8:40:41 PM [express] GET /api/dashboard 200 in 4ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"mean_reversion","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:130:8:44:32 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:131:8:44:34 PM [express] POST /api/config 200 in 4ms :: {"id":1,"isActive":false,"strategy":"scalping","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:34.067Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:132:8:44:34 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"scalping","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:34.067Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:133:8:44:35 PM [express] POST /api/config 200 in 3ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:134:8:44:35 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:136:8:44:39 PM [express] GET /api/dashboard 200 in 418ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3325.00000","change":"6.42"},"SOLUSD":{"price":"139.96000","change":"5.01"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:137:8:44:50 PM [express] GET /api/dashboard 200 in 356ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3326.19000","change":"6.46"},"SOLUSD":{"price":"140.00000","change":"5.04"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:138:8:44:55 PM [express] GET /api/dashboard 200 in 262ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3327.19000","change":"6.49"},"SOLUSD":{"price":"140.00000","change":"5.04"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:144:8:46:01 PM [express] GET /api/dashboard 200 in 389ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.60000","change":"2.60"},"XETHZUSD":{"price":"3326.92000","change":"6.48"},"SOLUSD":{"price":"139.97000","change":"5.02"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:145:8:46:03 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:146:8:46:36 PM [express] POST /api/config 200 in 15ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:46:36.293Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:147:8:46:36 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:46:36.293Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:148:8:46:39 PM [express] POST /api/config 200 in 4ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:39.897Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:149:8:46:39 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:39.897Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:150:8:46:48 PM [express] POST /api/config 200 in 116ms :: {"id":1,"isActive":true,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:48.753Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:151:8:46:48 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":true,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:48.753Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:153:8:51:15 PM [express] GET /api/dashboard 200 in 363ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93166.50000","change":"2.78"},"XETHZUSD":{"price":"3336.95000","change":"6.80"},"SOLUSD":{"price":"140.28000","change":"5.25"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:154:9:10:18 PM [express] GET /api/dashboard 200 in 372ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93018.70000","change":"2.61"},"XETHZUSD":{"price":"3313.01000","change":"6.04"},"SOLUSD":{"price":"139.74000","change":"4.85"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:199:kraken-bot-db   | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:203:kraken-bot-db   | 2025-12-09 20:36:05.312 UTC [42] LOG:  background worker "logical replication launcher" (PID 48) exited with exit code 1
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:209:kraken-bot-db   | server stopped
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:293:kraken-bot-app  | 8:36:59 PM [express] GET /api/dashboard 200 in 27ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:296:kraken-bot-app  | 8:37:28 PM [express] GET /api/dashboard 304 in 24ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:302:kraken-bot-app  | 8:39:28 PM [express] GET /api/dashboard 304 in 5ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:303:kraken-bot-app  | 8:39:29 PM [express] GET /api/config 200 in 3ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:36:59.418Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:305:kraken-bot-app  | 8:39:42 PM [express] GET /api/dashboard 304 in 17ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:307:kraken-bot-app  | 8:40:02 PM [express] GET /api/dashboard 304 in 22ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"momentum","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:312:kraken-bot-app  | 8:40:33 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:36:59.418Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:313:kraken-bot-app  | 8:40:37 PM [express] POST /api/config 200 in 6ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:314:kraken-bot-app  | 8:40:37 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:315:kraken-bot-app  | 8:40:41 PM [express] GET /api/dashboard 200 in 4ms :: {"krakenConnected":false,"telegramConnected":false,"botActive":false,"strategy":"mean_reversion","balances":{},"prices":{},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:324:kraken-bot-app  | 8:44:32 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"mean_reversion","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:40:37.370Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:325:kraken-bot-app  | 8:44:34 PM [express] POST /api/config 200 in 4ms :: {"id":1,"isActive":false,"strategy":"scalping","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:34.067Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:326:kraken-bot-app  | 8:44:34 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"scalping","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:34.067Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:327:kraken-bot-app  | 8:44:35 PM [express] POST /api/config 200 in 3ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:328:kraken-bot-app  | 8:44:35 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:330:kraken-bot-app  | 8:44:39 PM [express] GET /api/dashboard 200 in 418ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3325.00000","change":"6.42"},"SOLUSD":{"price":"139.96000","change":"5.01"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:331:kraken-bot-app  | 8:44:50 PM [express] GET /api/dashboard 200 in 356ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3326.19000","change":"6.46"},"SOLUSD":{"price":"140.00000","change":"5.04"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:332:kraken-bot-app  | 8:44:55 PM [express] GET /api/dashboard 200 in 262ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.70000","change":"2.60"},"XETHZUSD":{"price":"3327.19000","change":"6.49"},"SOLUSD":{"price":"140.00000","change":"5.04"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:338:kraken-bot-app  | 8:46:01 PM [express] GET /api/dashboard 200 in 389ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":false,"strategy":"grid","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93008.60000","change":"2.60"},"XETHZUSD":{"price":"3326.92000","change":"6.48"},"SOLUSD":{"price":"139.97000","change":"5.02"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:339:kraken-bot-app  | 8:46:03 PM [express] GET /api/config 304 in 2ms :: {"id":1,"isActive":false,"strategy":"grid","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:44:35.114Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:340:kraken-bot-app  | 8:46:36 PM [express] POST /api/config 200 in 15ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:46:36.293Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:341:kraken-bot-app  | 8:46:36 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD","SOL/USD"],"updatedAt":"2025-12-09T20:46:36.293Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:342:kraken-bot-app  | 8:46:39 PM [express] POST /api/config 200 in 4ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:39.897Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:343:kraken-bot-app  | 8:46:39 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":false,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:39.897Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:344:kraken-bot-app  | 8:46:48 PM [express] POST /api/config 200 in 116ms :: {"id":1,"isActive":true,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:48.753Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:345:kraken-bot-app  | 8:46:48 PM [express] GET /api/config 200 in 2ms :: {"id":1,"isActive":true,"strategy":"momentum","riskLevel":"medium","activePairs":["BTC/USD","ETH/USD"],"updatedAt":"2025-12-09T20:46:48.753Z"}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:347:kraken-bot-app  | 8:51:15 PM [express] GET /api/dashboard 200 in 363ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93166.50000","change":"2.78"},"XETHZUSD":{"price":"3336.95000","change":"6.80"},"SOLUSD":{"price":"140.28000","change":"5.25"}},"recentTrades":[]}
./attached_assets/Pasted--opkg-update-opkg-install-git-Downloading-http-bin-entw_1765315122034.txt:348:kraken-bot-app  | 9:10:18 PM [express] GET /api/dashboard 200 in 372ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0000000000","XXRP":"0.00001000","ZUSD":"0.0065"},"prices":{"XXBTZUSD":{"price":"93018.70000","change":"2.61"},"XETHZUSD":{"price":"3313.01000","change":"6.04"},"SOLUSD":{"price":"139.74000","change":"4.85"}},"recentTrades":[]}
./attached_assets/Pasted-IMPORTANTE-AUDITOR-A-SOLO-LECTURA-NO-MODIFICAR-NADA-Qui_1765725045604.txt:5:NO modifiques c√≥digo, configuraci√≥n, modelos ni datos SIN MI APROBACI√ìN EXPRESA.
./attached_assets/Pasted-IMPORTANTE-AUDITOR-A-SOLO-LECTURA-NO-MODIFICAR-NADA-Qui_1765725045604.txt:19:2) Para CADA modelo (Deep LSTM v4, Transformer Market-BERT, XGBoost Ensemble):
./attached_assets/Pasted-IMPORTANTE-AUDITOR-A-SOLO-LECTURA-NO-MODIFICAR-NADA-Qui_1765725045604.txt:23:   - Confirma si existe inferencia REAL (predict) conectada al motor de trading
./attached_assets/Pasted-IMPORTANTE-AUDITOR-A-SOLO-LECTURA-NO-MODIFICAR-NADA-Qui_1765725045604.txt:25:   - Indica si existen pesos/modelos persistidos
./attached_assets/Pasted-IMPORTANTE-AUDITOR-A-SOLO-LECTURA-NO-MODIFICAR-NADA-Qui_1765725045604.txt:47:   - Marca cada modelo como:
./attached_assets/Pasted-REPLIT-RESOLUCI-N-DE-DESAF-OS-PARA-MOMENTUM-VELAS-DESAF_1765672660640.txt:8:   - Guardar en memoria/DB: lastEvaluatedCandleCloseTime por (pair, timeframe, strategy)
./attached_assets/Pasted-REPLIT-RESOLUCI-N-DE-DESAF-OS-PARA-MOMENTUM-VELAS-DESAF_1765672660640.txt:53:- Estado persistente por (pair, tf, strategy):
./attached_assets/Pasted-REPLIT-RESOLUCI-N-DE-DESAF-OS-PARA-MOMENTUM-VELAS-DESAF_1765672660640.txt:58:  if closeTs <= lastEvaluatedCandleTs: skip signal evaluation
./attached_assets/Pasted-REPLIT-RESOLUCI-N-DE-DESAF-OS-PARA-MOMENTUM-VELAS-DESAF_1765672660640.txt:64:- Entre cierres de vela, el bot NO debe abrir/cerrar por ‚Äúse√±al‚Äù (solo por risk exits).
./attached_assets/Pasted-REPLIT-INSTRUCCIONES-MODO-MOMENTUM-VELAS-OBJETIVO-A-adi_1765672412419.txt:69:- Trailing stop
./attached_assets/Pasted-REPLIT-INSTRUCCIONES-MODO-MOMENTUM-VELAS-OBJETIVO-A-adi_1765672412419.txt:81:- Las posiciones abiertas se gestionan con su estrategia original hasta cerrarse.
./attached_assets/Pasted-REPLIT-INSTRUCCIONES-MODO-MOMENTUM-VELAS-OBJETIVO-A-adi_1765672412419.txt:95:- ‚ÄúMomentum (Velas)‚Äù aparece como estrategia independiente.
./attached_assets/Pasted-REPLIT-INSTRUCCIONES-CONSOLIDADAS-UI-DATOS-DE-TRADING-O_1765670223953.txt:85:- Trailing stop
./attached_assets/Pasted--LTIMO-PASO-OBLIGATORIO-PRUEBA-Y-VERIFICACI-N-DE-SMART-_1766053871122.txt:1:√öLTIMO PASO (OBLIGATORIO): PRUEBA Y VERIFICACI√ìN DE SMART_GUARD EN REPLIT (DRY_RUN)
./attached_assets/Pasted--LTIMO-PASO-OBLIGATORIO-PRUEBA-Y-VERIFICACI-N-DE-SMART-_1766053871122.txt:4:Probar en Replit (modo DRY_RUN) que SMART_GUARD funciona correctamente, especialmente en:
./attached_assets/Pasted--LTIMO-PASO-OBLIGATORIO-PRUEBA-Y-VERIFICACI-N-DE-SMART-_1766053871122.txt:6:- Bloqueo por posici√≥n abierta (SMART_GUARD_POSITION_EXISTS)
./attached_assets/Pasted--LTIMO-PASO-OBLIGATORIO-PRUEBA-Y-VERIFICACI-N-DE-SMART-_1766053871122.txt:16:  - meta incluye: usdDisponible, orderUsdProposed, orderUsdFinal, minOrderUsd=100, allowUnderMin=false, mode=SMART_GUARD
./attached_assets/Pasted--LTIMO-PASO-OBLIGATORIO-PRUEBA-Y-VERIFICACI-N-DE-SMART-_1766053871122.txt:28:- Config: SMART_GUARD activo y regla de ‚Äúposici√≥n abierta‚Äù activa
./attached_assets/Pasted--LTIMO-PASO-OBLIGATORIO-PRUEBA-Y-VERIFICACI-N-DE-SMART-_1766053871122.txt:31:  - TRADE_SKIPPED con reason=SMART_GUARD_POSITION_EXISTS
./attached_assets/Pasted-S-apruebo-implementar-el-fix-del-m-nimo-en-SMART-GUARD-_1766052196028.txt:1:S√ç, apruebo implementar el fix del m√≠nimo en SMART_GUARD.
./attached_assets/Pasted-S-apruebo-implementar-el-fix-del-m-nimo-en-SMART-GUARD-_1766052196028.txt:7:- Debe cubrir TODOS los paths de compra (SMART_GUARD, DCA, recompras, etc.) sin depender de ‚ÄúCaso A/B‚Äù.
./attached_assets/Pasted-S-apruebo-implementar-el-fix-del-m-nimo-en-SMART-GUARD-_1766052196028.txt:43:- Verificar que solo se env√≠a Telegram tras confirmaci√≥n de order ACK/FILLED (seg√∫n c√≥mo lo est√©is modelando)
./attached_assets/Pasted-PROBLEMA-Hay-inconsistencia-Telegram-muestra-Operaci-n-_1766051290146.txt:2:Hay inconsistencia: Telegram muestra ‚ÄúOperaci√≥n Autom√°tica Ejecutada‚Äù (BUY ETH/USD con ID), pero en el monitor de eventos existe TRADE_SKIPPED a la misma hora: ‚ÄúSe√±al BUY ignorada - modo SMART_GUARD con posici√≥n abierta (SMART_GUARD_POSITION_EXISTS)‚Äù. Adem√°s, esa supuesta compra no aparece en el panel de posiciones abiertas.
./attached_assets/Pasted-PROBLEMA-Hay-inconsistencia-Telegram-muestra-Operaci-n-_1766051290146.txt:19:- Confirmar en el c√≥digo que la condici√≥n SMART_GUARD_POSITION_EXISTS corta la ejecuci√≥n antes de ‚ÄúplaceOrder‚Äù.
./attached_assets/Pasted-Antes-de-cambiar-nada-m-s-necesito-que-me-confirm-is-EX_1766159961670.txt:1:Antes de cambiar nada m√°s, necesito que me confirm√©is EXACTAMENTE c√≥mo est√° implementada la regla de entrada en SMART_GUARD.
./attached_assets/Pasted-Antes-de-cambiar-nada-m-s-necesito-que-me-confirm-is-EX_1766159961670.txt:9:- Estamos viendo TRADE_SKIPPED por EXPOSURE_ZERO y por SMART_GUARD_MAX_LOTS_REACHED.
./attached_assets/Pasted-Antes-de-cambiar-nada-m-s-necesito-que-me-confirm-is-EX_1766159961670.txt:10:- Queremos saber si se est√° bloqueando por exposici√≥n (maxPair/maxTotal) incluso en SMART_GUARD, y en qu√© orden se eval√∫an: slots vs exposici√≥n vs m√≠nimos.
./attached_assets/Pasted-Antes-de-cambiar-nada-m-s-necesito-que-me-confirm-is-EX_1766159961670.txt:13:A) El flujo exacto (orden) de validaciones para BUY en SMART_GUARD:
./attached_assets/Pasted-Antes-de-cambiar-nada-m-s-necesito-que-me-confirm-is-EX_1766159961670.txt:18:   - validaci√≥n exposici√≥n (maxPairExposurePct / maxTotalExposurePct) -> si aplica o NO aplica en SMART_GUARD
./attached_assets/Pasted-Antes-de-cambiar-nada-m-s-necesito-que-me-confirm-is-EX_1766159961670.txt:20:B) Pegad el bloque de c√≥digo completo (o funciones completas) donde se decide BUY para SMART_GUARD.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096103134.txt:1:REPLIT ‚Äî BUG + FIX REQUERIDO (SMART_GUARD m√≠nimos en DRY_RUN)
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096103134.txt:8:1) En DRY_RUN hay un ‚Äúmonto fijo de simulaci√≥n‚Äù (tipo 14 USD) o una ruta de c√°lculo distinta que NO respeta SMART_GUARD m√≠nimos.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096103134.txt:18:A) MINIMO CONFIGURABLE (SMART_GUARD)
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096103134.txt:19:if positionMode=="SMART_GUARD" && sgAllowUnderMin==false && orderUsdFinal < sgMinEntryUsd:
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096103134.txt:40:  - se marca como TEST y se desactiva cuando positionMode=SMART_GUARD.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096103134.txt:59:- Nunca se ejecuta NI se simula una BUY en SMART_GUARD por debajo de sgMinEntryUsd si sgAllowUnderMin=false.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096024936.txt:1:REPLIT ‚Äî BUG + FIX REQUERIDO (SMART_GUARD m√≠nimos en DRY_RUN)
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096024936.txt:8:1) En DRY_RUN hay un ‚Äúmonto fijo de simulaci√≥n‚Äù (tipo 14 USD) o una ruta de c√°lculo distinta que NO respeta SMART_GUARD m√≠nimos.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096024936.txt:18:A) MINIMO CONFIGURABLE (SMART_GUARD)
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096024936.txt:19:if positionMode=="SMART_GUARD" && sgAllowUnderMin==false && orderUsdFinal < sgMinEntryUsd:
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096024936.txt:40:  - se marca como TEST y se desactiva cuando positionMode=SMART_GUARD.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766096024936.txt:59:- Nunca se ejecuta NI se simula una BUY en SMART_GUARD por debajo de sgMinEntryUsd si sgAllowUnderMin=false.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766095899279.txt:1:REPLIT ‚Äî BUG + FIX REQUERIDO (SMART_GUARD m√≠nimos en DRY_RUN)
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766095899279.txt:8:1) En DRY_RUN hay un ‚Äúmonto fijo de simulaci√≥n‚Äù (tipo 14 USD) o una ruta de c√°lculo distinta que NO respeta SMART_GUARD m√≠nimos.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766095899279.txt:18:A) MINIMO CONFIGURABLE (SMART_GUARD)
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766095899279.txt:19:if positionMode=="SMART_GUARD" && sgAllowUnderMin==false && orderUsdFinal < sgMinEntryUsd:
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766095899279.txt:40:  - se marca como TEST y se desactiva cuando positionMode=SMART_GUARD.
./attached_assets/Pasted-REPLIT-BUG-FIX-REQUERIDO-SMART-GUARD-m-nimos-en-DRY-RUN_1766095899279.txt:59:- Nunca se ejecuta NI se simula una BUY en SMART_GUARD por debajo de sgMinEntryUsd si sgAllowUnderMin=false.
./attached_assets/Pasted-BUG-CR-TICO-Cierre-manual-rompe-API-NAS-Error-en-logs-P_1766090359997.txt:19:  (probable: server/routes.ts handler de positions close o un servicio llamado desde ah√≠).
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:9:kraken-bot-app   node:20-alpine       "docker-entrypoint.s‚Ä¶"   app        5 minutes ago   Up 5 minutes             0.0.0.0:3000->5000/tcp
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:10:kraken-bot-db    postgres:16-alpine   "docker-entrypoint.s‚Ä¶"   postgres   5 minutes ago   Up 5 minutes (healthy)   5432/tcp
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:70:    restart: unless-stopped
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:93:    restart: unless-stopped
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:144:kraken-bot-app   node:20-alpine       "docker-entrypoint.s‚Ä¶"   app        7 minutes ago   Up 7 minutes             0.0.0.0:3000->5000/tcp
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:145:kraken-bot-db    postgres:16-alpine   "docker-entrypoint.s‚Ä¶"   postgres   7 minutes ago   Up 7 minutes (healthy)   5432/tcp
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:269:kraken-bot-app  | 8:05:58 PM [express] GET /api/ai/status 304 in 33ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":63,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:307:kraken-bot-app  | 8:06:09 PM [express] GET /api/trades/closed 304 in 19ms :: {"trades":[{"id":274,"tradeId":"AUTO-1766082613434","pair":"SOL/USD","type":"sell","price":"122.72000000","amount":"0.29513616","status":"filled","krakenOrderId":"OOMDJX-HNFFV-2K6KZL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T18:30:13.434Z","createdAt":"2025-12-18T18:30:13.434Z","totalUsd":"36.22","entryValueUsd":null},{"id":273,"tradeId":"AUTO-1766076312936","pair":"SOL/USD","type":"buy","price":"127.06000000","amount":"0.59027231","status":"filled","krakenOrderId":"OWZQL4-UNANG-QR3R7J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T16:45:12.936Z","createdAt":"2025-12-18T16:45:12.936Z","totalUsd":"75.00","entryValueUsd":null},{"id":272,"tradeId":"AUTO-1766075262277","pair":"SOL/USD","type":"sell","price":"126.06000000","amount":"0.15151515","status":"filled","krakenOrderId":"OE5JKG-KZHAZ-U65A75","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T16:27:42.277Z","createdAt":"2025-12-18T16:27:42.278Z","totalUsd":"19.10","entryValueUsd":null},{"id":183,"tradeId":"KRAKEN-TKO75M-FLXN5-PMUB3A","pair":"BTC/USD","type":"sell","price":"86849.80000000","amount":"0.00017152","status":"filled","krakenOrderId":"TKO75M-FLXN5-PMUB3A","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T09:08:20.952Z","createdAt":"2025-12-18T09:16:56.160Z","totalUsd":"14.90","entryValueUsd":null},{"id":184,"tradeId":"KRAKEN-TFP2UX-5YZPT-5HQK2O","pair":"SOL/USD","type":"sell","price":"122.55005000","amount":"0.15151516","status":"filled","krakenOrderId":"TFP2UX-5YZPT-5HQK2O","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T07:45:20.697Z","createdAt":"2025-12-18T09:16:56.163Z","totalUsd":"18.57","entryValueUsd":null},{"id":182,"tradeId":"AUTO-1766043920498","pair":"SOL/USD","type":"sell","price":"122.56000000","amount":"0.15151516","status":"filled","krakenOrderId":"OSOCVO-J4NHE-ZDHUJV","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T07:45:20.498Z","createdAt":"2025-12-18T07:45:20.499Z","totalUsd":"18.57","entryValueUsd":null},{"id":185,"tradeId":"KRAKEN-TCU342-533RH-YKOTIN","pair":"XRP/USD","type":"sell","price":"1.84369000","amount":"13.42880317","status":"filled","krakenOrderId":"TCU342-533RH-YKOTIN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T05:15:19.899Z","createdAt":"2025-12-18T09:16:56.166Z","totalUsd":"24.76","entryValueUsd":null},{"id":181,"tradeId":"AUTO-1766034919817","pair":"XRP/USD","type":"sell","price":"1.84371000","amount":"13.42880317","status":"filled","krakenOrderId":"OVMK52-4TCFF-7G76SM","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T05:15:19.817Z","createdAt":"2025-12-18T05:15:19.818Z","totalUsd":"24.76","entryValueUsd":null},{"id":180,"tradeId":"AUTO-1766028620920","pair":"SOL/USD","type":"sell","price":"123.16000000","amount":"0.30303030","status":"filled","krakenOrderId":"OZHY2N-CVJYQ-P6Y7Y6","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T03:30:20.920Z","createdAt":"2025-12-18T03:30:20.921Z","totalUsd":"37.32","entryValueUsd":null},{"id":186,"tradeId":"KRAKEN-TYCBPD-WYNF2-QBDYUG","pair":"SOL/USD","type":"sell","price":"123.24002000","amount":"0.30303030","status":"filled","krakenOrderId":"TYCBPD-WYNF2-QBDYUG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-18T03:30:20.899Z","createdAt":"2025-12-18T09:16:56.170Z","totalUsd":"37.35","entryValueUsd":null}],"total":274,"limit":10,"offset":0}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-curl-s-http_1766089352608.txt:323:^[[1;5Fckraken-bot-app  | 8:18:38 PM [express] GET /api/ai/status 304 in 13ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":63,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-CAMBIO-M-NIMO-HISTORIAL-POSIC_1765653014003.txt:15:  - entryTime
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-CAMBIO-M-NIMO-HISTORIAL-POSIC_1765653014003.txt:16:  - entryPrice (precio medio de compra)
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-CAMBIO-M-NIMO-HISTORIAL-POSIC_1765653014003.txt:20:  - unrealizedUsd = (lastPrice - entryPrice) * qty
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-CAMBIO-M-NIMO-HISTORIAL-POSIC_1765653014003.txt:22:  - (opcional) strategyName
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-CAMBIO-M-NIMO-HISTORIAL-POSIC_1765653014003.txt:25:- Opci√≥n r√°pida (recomendada): usar el ‚Äúestado interno‚Äù del bot si ya guarda la √∫ltima compra por par (entryPrice/qty).
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:4:Crear un modo/estrategia nueva ‚ÄúMomentum (Velas)‚Äù que genere se√±ales con velas reales (5m/15m/1h), manteniendo TODA la gesti√≥n de riesgo existente (tama√±o de trade, exposici√≥n, SL/TP/Trailing). Adem√°s, al cambiar de modo, NO tocar posiciones abiertas: cada posici√≥n conserva el modelo con el que se abri√≥ para poder comparar rendimiento por modelo.
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:15:1) ‚ÄúMomentum (Velas)‚Äù NO debe usar priceHistory de ciclos (10‚Äì30s) para entry/exit.
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:16:2) La se√±al (entry/exit) debe calcularse con OHLC de Kraken del timeframe elegido:
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:21:1) Al cambiar de estrategia/mode:
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:23:   - NO recalcular su ‚Äúmodelo‚Äù con el modo nuevo.
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:25:   - entryStrategy: "momentum_cycle" o "momentum_candles"
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:26:   - entrySignalTf: "cycle_30s" o "5m"/"15m"/"1h"
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:27:   - entryAt, entryPrice, qty, pair
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:29:   - Cada posici√≥n se eval√∫a con SU entryStrategy + entrySignalTf, aunque el usuario cambie el modo global.
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:52:   - entryStrategy + entrySignalTf
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:54:   - PnL, winrate, n¬∫ trades por modelo (para ver qu√© rinde mejor)
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:58:- Cada posici√≥n muestra en UI con qu√© modelo/TF fue abierta.
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-Opci-n-C-Momentum-Velas-selec_1765651641507.txt:61:- El rendimiento se puede comparar por modelo/TF.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:1:OBJETIVO: Implementar ‚ÄúModo nuevo‚Äù (Momentum por Velas / Opci√≥n C) sin afectar posiciones abiertas, usando enfoque ‚ÄúGrandfather‚Äù (Opci√≥n 2) + trazabilidad por posici√≥n para comparar rendimiento por modelo/estrategia.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:5:- Las posiciones ya abiertas deben conservar el ‚Äúmodelo/estrategia‚Äù con el que fueron abiertas hasta que se cierren.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:10:- entryStrategy: string (ej: "momentum_cycle", "momentum_candles")
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:11:- entrySignalTf: string (ej: "cycle_30s", "5m", "15m", "1h")
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:12:- entryFilterTfs: array/string (ej: ["1h","4h"])
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:13:- entryAt: timestamp
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:14:- entryPrice: number
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:16:- optionally: entryConfidence / signalReason (texto corto)
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:20:- Mostrar estos campos en UI (Wallet/Positions) para saber ‚Äúcon qu√© modelo se abri√≥‚Äù.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:22:3) L√ìGICA DE SALIDA (exit) ‚Äúpor origen‚Äù
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:24:  - Calcular la salida (exit signal) usando el MISMO entryStrategy + entrySignalTf guardados en la posici√≥n.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:25:  - Es decir, aunque el usuario cambie el modo global, esa posici√≥n sigue evalu√°ndose con su propia estrategia de origen.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:32:- A√±adir una estrategia nueva en la pantalla ‚ÄúEstrategias‚Äù:
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:34:- Dentro de esa estrategia:
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:37:- Nota: este modo NO debe usar priceHistory de ciclos para generar entry/exit.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:43:- Stops/TP/Trailing pueden evaluarse con mayor frecuencia (loop), pero la se√±al de estrategia debe ser por velas.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:47:  - Agrupar PnL, winrate, drawdown por entryStrategy y entrySignalTf.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:52:  - A√±adir un filtro o desglose ‚ÄúRendimiento por estrategia/modelo‚Äù.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:59:- Una posici√≥n abierta antes del cambio sigue usando su estrategia de origen para se√±ales de salida.
./attached_assets/Pasted-OBJETIVO-Implementar-Modo-nuevo-Momentum-por-Velas-Opci_1765649656520.txt:61:- El rendimiento se puede comparar por modelo/estrategia en performance.
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:3:12:51:09 PM [express] GET /api/ai/diagnostic 304 in 35ms :: {"operationsCount":296,"trainingTradesTotal":111,"closedTradesCount":109,"labeledTradesCount":69,"openTradesCount":2,"openLotsCount":2,"openTradesDescription":"training_trades con isClosed=false","openLotsDescription":"training_trades con qtyRemaining > 0","lastBackfillRun":"2025-12-20T02:54:43.811Z","lastBackfillError":null,"lastTrainRun":null,"lastTrainError":null,"modelVersion":null,"discardReasonsDataset":{"venta_sin_compra_previa":26,"comisiones_anormales":3,"hold_excesivo":1,"pnl_atipico":36},"lastBackfillDiscardReasons":{"venta_excede_lotes":1,"venta_sin_compra_previa":181},"winRate":13.043478260869565,"avgPnlNet":-4.713763697536237,"avgHoldTimeMinutes":453.6666666666667,"env":"NAS/PROD","instanceId":"ca9c2d593c43-127-014c60be","dryRun":false}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:4:12:51:09 PM [express] GET /api/ai/status 304 in 16ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":69,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:25:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:34:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:45:12:51:39 PM [express] GET /api/ai/status 304 in 40ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":69,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:46:12:52:09 PM [express] GET /api/ai/diagnostic 304 in 38ms :: {"operationsCount":296,"trainingTradesTotal":111,"closedTradesCount":109,"labeledTradesCount":69,"openTradesCount":2,"openLotsCount":2,"openTradesDescription":"training_trades con isClosed=false","openLotsDescription":"training_trades con qtyRemaining > 0","lastBackfillRun":"2025-12-20T02:54:43.811Z","lastBackfillError":null,"lastTrainRun":null,"lastTrainError":null,"modelVersion":null,"discardReasonsDataset":{"venta_sin_compra_previa":26,"comisiones_anormales":3,"hold_excesivo":1,"pnl_atipico":36},"lastBackfillDiscardReasons":{"venta_excede_lotes":1,"venta_sin_compra_previa":181},"winRate":13.043478260869565,"avgPnlNet":-4.713763697536237,"avgHoldTimeMinutes":453.6666666666667,"env":"NAS/PROD","instanceId":"ca9c2d593c43-127-014c60be","dryRun":false}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:47:12:52:09 PM [express] GET /api/ai/status 304 in 3ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":69,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:68:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:77:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:88:12:52:39 PM [express] GET /api/ai/status 304 in 4ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":69,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:89:12:53:09 PM [express] GET /api/ai/diagnostic 304 in 20ms :: {"operationsCount":296,"trainingTradesTotal":111,"closedTradesCount":109,"labeledTradesCount":69,"openTradesCount":2,"openLotsCount":2,"openTradesDescription":"training_trades con isClosed=false","openLotsDescription":"training_trades con qtyRemaining > 0","lastBackfillRun":"2025-12-20T02:54:43.811Z","lastBackfillError":null,"lastTrainRun":null,"lastTrainError":null,"modelVersion":null,"discardReasonsDataset":{"venta_sin_compra_previa":26,"comisiones_anormales":3,"hold_excesivo":1,"pnl_atipico":36},"lastBackfillDiscardReasons":{"venta_excede_lotes":1,"venta_sin_compra_previa":181},"winRate":13.043478260869565,"avgPnlNet":-4.713763697536237,"avgHoldTimeMinutes":453.6666666666667,"env":"NAS/PROD","instanceId":"ca9c2d593c43-127-014c60be","dryRun":false}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:90:12:53:09 PM [express] GET /api/ai/status 304 in 2ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":69,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:111:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:120:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:131:12:53:39 PM [express] GET /api/ai/status 304 in 4ms :: {"phase":"red","phaseLabel":"Recolectando datos","completeSamples":69,"minSamplesForTrain":300,"minSamplesForActivate":300,"canTrain":false,"canActivate":false,"filterEnabled":false,"shadowEnabled":false,"modelLoaded":false,"lastTrainTs":null,"threshold":0.6,"metrics":null}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:133:12:54:03 PM [express] GET /api/scan/diagnostic 200 in 4ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:134:12:54:07 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:135:12:54:08 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:136:12:54:08 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:137:12:54:08 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:138:12:54:08 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:139:12:54:08 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:140:12:54:09 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:53:39.334Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:141:12:54:09 PM [express] GET /api/scan/diagnostic 200 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:145:12:54:17 PM [express] GET /api/dashboard 200 in 556ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0008764708","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"386.7502"},"prices":{"XXBTZUSD":{"price":"88188.30000","change":"0.09"},"XETHZUSD":{"price":"2987.37000","change":"0.32"},"SOLUSD":{"price":"126.21000","change":"0.00"},"XXRPZUSD":{"price":"1.94127000","change":"1.74"},"TONUSD":{"price":"1.4860000","change":"-0.13"}},"recentTrades":[{"id":296,"tradeId":"AUTO-1766230225690","pair":"BTC/USD","type":"buy","price":"88212.10000000","amount":"0.00085022","status":"filled","krakenOrderId":"OXZWXO-A5HE7-NGX53G","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T11:30:25.690Z","createdAt":"2025-12-20T11:30:25.690Z"},{"id":295,"tradeId":"AUTO-1766226625709","pair":"SOL/USD","type":"sell","price":"126.02000000","amount":"0.59599491","status":"filled","krakenOrderId":"O6DRRA-ST37Z-O4KWYL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T10:30:25.709Z","createdAt":"2025-12-20T10:30:25.710Z"},{"id":294,"tradeId":"AUTO-1766203224526","pair":"BTC/USD","type":"sell","price":"88183.80000000","amount":"0.00085153","status":"filled","krakenOrderId":"OV4RNM-BGCBN-K5JYJG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T04:00:24.526Z","createdAt":"2025-12-20T04:00:24.527Z"},{"id":293,"tradeId":"AUTO-1766197808270","pair":"BTC/USD","type":"buy","price":"88076.70000000","amount":"0.00085153","status":"filled","krakenOrderId":"OO2ZAD-ABFZE-MAH626","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T02:30:08.270Z","createdAt":"2025-12-20T02:30:08.271Z"},{"id":292,"tradeId":"AUTO-1766189708327","pair":"SOL/USD","type":"buy","price":"125.84000000","amount":"0.59599491","status":"filled","krakenOrderId":"OPN6E3-GUS6C-AZGPSN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T00:15:08.327Z","createdAt":"2025-12-20T00:15:08.328Z"},{"id":291,"tradeId":"AUTO-1766179807569","pair":"XRP/USD","type":"sell","price":"1.90539000","amount":"41.32345243","status":"filled","krakenOrderId":"O52RAG-MSPVG-KRDO6J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:30:07.569Z","createdAt":"2025-12-19T21:30:07.569Z"},{"id":290,"tradeId":"AUTO-1766178907186","pair":"ETH/USD","type":"sell","price":"2984.84000000","amount":"0.00646352","status":"filled","krakenOrderId":"ONJTJP-TCG72-YKNIIZ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:15:07.186Z","createdAt":"2025-12-19T21:15:07.187Z"},{"id":289,"tradeId":"AUTO-1766174404059","pair":"XRP/USD","type":"sell","price":"1.90731000","amount":"41.32345243","status":"filled","krakenOrderId":"OMHARR-NU4FY-AJXHFY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T20:00:04.059Z","createdAt":"2025-12-19T20:00:04.060Z"},{"id":288,"tradeId":"AUTO-1766167225795","pair":"ETH/USD","type":"sell","price":"2944.19000000","amount":"0.01684920","status":"filled","krakenOrderId":"OOBHD6-UHWTH-GJZIYY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T18:00:25.795Z","createdAt":"2025-12-19T18:00:25.795Z"},{"id":287,"tradeId":"AUTO-1766164526342","pair":"XRP/USD","type":"buy","price":"1.90256000","amount":"15.27888154","status":"filled","krakenOrderId":"OSKEL5-7MJBA-UKXUTN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T17:15:26.342Z","createdAt":"2025-12-19T17:15:26.343Z"}]}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:146:12:54:17 PM [express] GET /api/dashboard 304 in 357ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389100","TON":"0.000000","USDC":"0.00000000","XETH":"0.0000000000","XXBT":"0.0008764708","XXRP":"0.54307332","ZEUR":"0.0000","ZUSD":"386.7502"},"prices":{"XXBTZUSD":{"price":"88188.30000","change":"0.09"},"XETHZUSD":{"price":"2987.37000","change":"0.32"},"SOLUSD":{"price":"126.21000","change":"0.00"},"XXRPZUSD":{"price":"1.94127000","change":"1.74"},"TONUSD":{"price":"1.4860000","change":"-0.13"}},"recentTrades":[{"id":296,"tradeId":"AUTO-1766230225690","pair":"BTC/USD","type":"buy","price":"88212.10000000","amount":"0.00085022","status":"filled","krakenOrderId":"OXZWXO-A5HE7-NGX53G","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T11:30:25.690Z","createdAt":"2025-12-20T11:30:25.690Z"},{"id":295,"tradeId":"AUTO-1766226625709","pair":"SOL/USD","type":"sell","price":"126.02000000","amount":"0.59599491","status":"filled","krakenOrderId":"O6DRRA-ST37Z-O4KWYL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T10:30:25.709Z","createdAt":"2025-12-20T10:30:25.710Z"},{"id":294,"tradeId":"AUTO-1766203224526","pair":"BTC/USD","type":"sell","price":"88183.80000000","amount":"0.00085153","status":"filled","krakenOrderId":"OV4RNM-BGCBN-K5JYJG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T04:00:24.526Z","createdAt":"2025-12-20T04:00:24.527Z"},{"id":293,"tradeId":"AUTO-1766197808270","pair":"BTC/USD","type":"buy","price":"88076.70000000","amount":"0.00085153","status":"filled","krakenOrderId":"OO2ZAD-ABFZE-MAH626","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T02:30:08.270Z","createdAt":"2025-12-20T02:30:08.271Z"},{"id":292,"tradeId":"AUTO-1766189708327","pair":"SOL/USD","type":"buy","price":"125.84000000","amount":"0.59599491","status":"filled","krakenOrderId":"OPN6E3-GUS6C-AZGPSN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T00:15:08.327Z","createdAt":"2025-12-20T00:15:08.328Z"},{"id":291,"tradeId":"AUTO-1766179807569","pair":"XRP/USD","type":"sell","price":"1.90539000","amount":"41.32345243","status":"filled","krakenOrderId":"O52RAG-MSPVG-KRDO6J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:30:07.569Z","createdAt":"2025-12-19T21:30:07.569Z"},{"id":290,"tradeId":"AUTO-1766178907186","pair":"ETH/USD","type":"sell","price":"2984.84000000","amount":"0.00646352","status":"filled","krakenOrderId":"ONJTJP-TCG72-YKNIIZ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:15:07.186Z","createdAt":"2025-12-19T21:15:07.187Z"},{"id":289,"tradeId":"AUTO-1766174404059","pair":"XRP/USD","type":"sell","price":"1.90731000","amount":"41.32345243","status":"filled","krakenOrderId":"OMHARR-NU4FY-AJXHFY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T20:00:04.059Z","createdAt":"2025-12-19T20:00:04.060Z"},{"id":288,"tradeId":"AUTO-1766167225795","pair":"ETH/USD","type":"sell","price":"2944.19000000","amount":"0.01684920","status":"filled","krakenOrderId":"OOBHD6-UHWTH-GJZIYY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T18:00:25.795Z","createdAt":"2025-12-19T18:00:25.795Z"},{"id":287,"tradeId":"AUTO-1766164526342","pair":"XRP/USD","type":"buy","price":"1.90256000","amount":"15.27888154","status":"filled","krakenOrderId":"OSKEL5-7MJBA-UKXUTN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T17:15:26.342Z","createdAt":"2025-12-19T17:15:26.343Z"}]}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:147:12:54:22 PM [express] GET /api/trades/closed 200 in 5ms :: {"trades":[{"id":296,"tradeId":"AUTO-1766230225690","pair":"BTC/USD","type":"buy","price":"88212.10000000","amount":"0.00085022","status":"filled","krakenOrderId":"OXZWXO-A5HE7-NGX53G","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T11:30:25.690Z","createdAt":"2025-12-20T11:30:25.690Z","totalUsd":"75.00","entryValueUsd":null},{"id":295,"tradeId":"AUTO-1766226625709","pair":"SOL/USD","type":"sell","price":"126.02000000","amount":"0.59599491","status":"filled","krakenOrderId":"O6DRRA-ST37Z-O4KWYL","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T10:30:25.709Z","createdAt":"2025-12-20T10:30:25.710Z","totalUsd":"75.11","entryValueUsd":null},{"id":294,"tradeId":"AUTO-1766203224526","pair":"BTC/USD","type":"sell","price":"88183.80000000","amount":"0.00085153","status":"filled","krakenOrderId":"OV4RNM-BGCBN-K5JYJG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T04:00:24.526Z","createdAt":"2025-12-20T04:00:24.527Z","totalUsd":"75.09","entryValueUsd":null},{"id":293,"tradeId":"AUTO-1766197808270","pair":"BTC/USD","type":"buy","price":"88076.70000000","amount":"0.00085153","status":"filled","krakenOrderId":"OO2ZAD-ABFZE-MAH626","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T02:30:08.270Z","createdAt":"2025-12-20T02:30:08.271Z","totalUsd":"75.00","entryValueUsd":null},{"id":292,"tradeId":"AUTO-1766189708327","pair":"SOL/USD","type":"buy","price":"125.84000000","amount":"0.59599491","status":"filled","krakenOrderId":"OPN6E3-GUS6C-AZGPSN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-20T00:15:08.327Z","createdAt":"2025-12-20T00:15:08.328Z","totalUsd":"75.00","entryValueUsd":null},{"id":291,"tradeId":"AUTO-1766179807569","pair":"XRP/USD","type":"sell","price":"1.90539000","amount":"41.32345243","status":"filled","krakenOrderId":"O52RAG-MSPVG-KRDO6J","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:30:07.569Z","createdAt":"2025-12-19T21:30:07.569Z","totalUsd":"78.74","entryValueUsd":null},{"id":290,"tradeId":"AUTO-1766178907186","pair":"ETH/USD","type":"sell","price":"2984.84000000","amount":"0.00646352","status":"filled","krakenOrderId":"ONJTJP-TCG72-YKNIIZ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T21:15:07.186Z","createdAt":"2025-12-19T21:15:07.187Z","totalUsd":"19.29","entryValueUsd":null},{"id":289,"tradeId":"AUTO-1766174404059","pair":"XRP/USD","type":"sell","price":"1.90731000","amount":"41.32345243","status":"filled","krakenOrderId":"OMHARR-NU4FY-AJXHFY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T20:00:04.059Z","createdAt":"2025-12-19T20:00:04.060Z","totalUsd":"78.82","entryValueUsd":null},{"id":288,"tradeId":"AUTO-1766167225795","pair":"ETH/USD","type":"sell","price":"2944.19000000","amount":"0.01684920","status":"filled","krakenOrderId":"OOBHD6-UHWTH-GJZIYY","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T18:00:25.795Z","createdAt":"2025-12-19T18:00:25.795Z","totalUsd":"49.61","entryValueUsd":null},{"id":287,"tradeId":"AUTO-1766164526342","pair":"XRP/USD","type":"buy","price":"1.90256000","amount":"15.27888154","status":"filled","krakenOrderId":"OSKEL5-7MJBA-UKXUTN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-19T17:15:26.342Z","createdAt":"2025-12-19T17:15:26.343Z","totalUsd":"29.07","entryValueUsd":null}],"total":296,"limit":10,"offset":0}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:148:12:54:22 PM [express] GET /api/open-positions 200 in 61ms :: [{"id":21,"lotId":"LOT-BTCUSD-1766230225694-9lp4l2","pair":"BTC/USD","entryPrice":"88212.10000000","amount":"0.00085022","highestPrice":"88281.40000000","tradeId":null,"krakenOrderId":null,"entryStrategyId":"momentum_candles_15m","entrySignalTf":"15m","signalConfidence":"0.78","signalReason":"Momentum Velas COMPRA: MACD bajista, Vela alcista fuerte, Volumen alto alcista (7.7x), Engulfing alcista | Se√±ales: 4/2 [momentum_candles_15m]","entryMode":"SMART_GUARD","configSnapshotJson":{"sgBeAtPct":2.5,"positionMode":"SMART_GUARD","sgMinPartUsd":50,"sgTpFixedPct":7,"sgMinEntryUsd":200,"sgScaleOutPct":-30,"sgTrailStepPct":0.6,"sgAllowUnderMin":false,"sgFeeCushionPct":0.45,"sgTrailStartPct":4,"stopLossPercent":13.5,"sgFeeCushionAuto":true,"sgTpFixedEnabled":true,"sgScaleOutEnabled":false,"takeProfitPercent":4,"sgTrailDistancePct":2.5,"sgScaleOutThreshold":80,"trailingStopEnabled":true,"trailingStopPercent":10},"sgBreakEvenActivated":false,"sgCurrentStopPrice":null,"sgTrailingActivated":false,"sgScaleOutDone":false,"openedAt":"2025-12-20T11:30:25.744Z","updatedAt":"2025-12-20T12:09:55.472Z","currentPrice":"88188.3","unrealizedPnlUsd":"-0.02","unrealizedPnlPct":"-0.03","entryValueUsd":"75.00","currentValueUsd":"74.98"}]
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:149:12:54:32 PM [express] GET /api/scan/diagnostic 200 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:150:12:54:36 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:151:12:54:36 PM [express] GET /api/scan/diagnostic 304 in 3ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:152:12:54:37 PM [express] GET /api/scan/diagnostic 304 in 3ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:153:12:54:37 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:154:12:54:37 PM [express] GET /api/scan/diagnostic 304 in 2ms :: {"pairs":[{"pair":"BTC/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":311.75050833800003,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":true,"positionUsd":74.999691662},{"pair":"ETH/USD","signal":"NONE","razon":"Sin se√±al de trading activa","exposureAvailable":{"maxPairAvailable":386.7502,"maxTotalAvailable":311.75050833800003,"maxAllowed":311.75050833800003},"hasPosition":false}],"positionMode":"SMART_GUARD","usdBalance":386.7502,"totalOpenPositions":1,"lastScanAt":"2025-12-20T12:54:09.322Z"}
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:175:      "signal": "NONE",
./attached_assets/Pasted--scanTime-2025-12-20T12-50-09-328Z-12-51-09-PM-express-_1766235339950.txt:184:      "signal": "NONE",
./attached_assets/Pasted-Necesito-2-ajustes-UI-validaci-n-relacionados-con-l-mit_1766163588205.txt:1:Necesito 2 ajustes (UI + validaci√≥n) relacionados con l√≠mites globales vs SMART_GUARD:
./attached_assets/Pasted-Necesito-2-ajustes-UI-validaci-n-relacionados-con-l-mit_1766163588205.txt:3:1) Aclaraci√≥n UX (SMART_GUARD)
./attached_assets/Pasted-Necesito-2-ajustes-UI-validaci-n-relacionados-con-l-mit_1766163588205.txt:4:Confirmad que estos campos son GLOBALES (no espec√≠ficos de SMART_GUARD) y por eso no aparecen en el bloque ‚ÄúConfiguraci√≥n SMART_GUARD‚Äù:
./attached_assets/Pasted-Necesito-2-ajustes-UI-validaci-n-relacionados-con-l-mit_1766163588205.txt:9:Si es as√≠, a√±adid en el bloque SMART_GUARD un texto/tooltip visible que diga:
./attached_assets/Pasted-racias-con-vuestro-desglose-ya-se-ve-el-problema-real-1_1766160835248.txt:4:Necesitamos que en SMART_GUARD sea tambi√©n tama√±o m√≠nimo cuando haya saldo.
./attached_assets/Pasted-racias-con-vuestro-desglose-ya-se-ve-el-problema-real-1_1766160835248.txt:17:Aunque dec√≠s que SMART_GUARD ‚Äúno aplica exposici√≥n‚Äù, hay alg√∫n punto donde se est√° usando getAvailableExposure() para bloquear o para reportar.
./attached_assets/Pasted-racias-con-vuestro-desglose-ya-se-ve-el-problema-real-1_1766160835248.txt:20:- Unifiqu√©is el criterio: o SMART_GUARD ignora exposici√≥n (y entonces NO debe salir EXPOSURE_ZERO en SMART_GUARD),
./attached_assets/Pasted-racias-con-vuestro-desglose-ya-se-ve-el-problema-real-1_1766160835248.txt:21:  o SMART_GUARD s√≠ respeta al menos maxTotalExposurePct (recomendado para no sobreapalancar el balance).
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:4:1:14:38 AM [express] GET /api/dashboard 200 in 332ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91790.60000","change":"-0.81"},"XETHZUSD":{"price":"3210.62000","change":"-0.82"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:5:1:14:39 AM [express] GET /api/dashboard 304 in 313ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91790.60000","change":"-0.81"},"XETHZUSD":{"price":"3210.62000","change":"-0.82"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:6:1:14:44 AM [express] GET /api/dashboard 200 in 306ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91790.60000","change":"-0.81"},"XETHZUSD":{"price":"3213.86000","change":"-0.72"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:7:1:14:44 AM [express] GET /api/dashboard 200 in 298ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91791.50000","change":"-0.81"},"XETHZUSD":{"price":"3213.86000","change":"-0.72"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:10:1:20:03 AM [express] GET /api/dashboard 200 in 425ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91977.70000","change":"-0.61"},"XETHZUSD":{"price":"3229.89000","change":"-0.22"},"SOLUSD":{"price":"136.70000","change":"0.19"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:13:1:23:23 AM [express] GET /api/dashboard 200 in 246ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"92054.60000","change":"-0.53"},"XETHZUSD":{"price":"3231.09000","change":"-0.19"},"SOLUSD":{"price":"137.06000","change":"0.45"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:14:1:23:23 AM [express] GET /api/dashboard 304 in 249ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"92054.60000","change":"-0.53"},"XETHZUSD":{"price":"3231.09000","change":"-0.19"},"SOLUSD":{"price":"137.06000","change":"0.45"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:18:1:14:38 AM [express] GET /api/dashboard 200 in 332ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91790.60000","change":"-0.81"},"XETHZUSD":{"price":"3210.62000","change":"-0.82"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:19:1:14:39 AM [express] GET /api/dashboard 304 in 313ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91790.60000","change":"-0.81"},"XETHZUSD":{"price":"3210.62000","change":"-0.82"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:20:1:14:44 AM [express] GET /api/dashboard 200 in 306ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91790.60000","change":"-0.81"},"XETHZUSD":{"price":"3213.86000","change":"-0.72"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:21:1:14:44 AM [express] GET /api/dashboard 200 in 298ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91791.50000","change":"-0.81"},"XETHZUSD":{"price":"3213.86000","change":"-0.72"},"SOLUSD":{"price":"136.31000","change":"-0.10"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:24:1:20:03 AM [express] GET /api/dashboard 200 in 425ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"91977.70000","change":"-0.61"},"XETHZUSD":{"price":"3229.89000","change":"-0.22"},"SOLUSD":{"price":"136.70000","change":"0.19"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:27:1:23:23 AM [express] GET /api/dashboard 200 in 246ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"92054.60000","change":"-0.53"},"XETHZUSD":{"price":"3231.09000","change":"-0.19"},"SOLUSD":{"price":"137.06000","change":"0.45"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:28:1:23:23 AM [express] GET /api/dashboard 304 in 249ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"92054.60000","change":"-0.53"},"XETHZUSD":{"price":"3231.09000","change":"-0.19"},"SOLUSD":{"price":"137.06000","change":"0.45"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted--share-ZFS37-DATA-share-Container-krakenbot-docker-logs_1765502645112.txt:29:1:23:34 AM [express] GET /api/dashboard 200 in 323ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","balances":{"SOL":"0.0000007500","TON":"0.000000","USDC":"0.00000000","XXBT":"0.0003306300","XXRP":"0.00001000","ZEUR":"0.0000","ZUSD":"1.4471"},"prices":{"XXBTZUSD":{"price":"92067.60000","change":"-0.51"},"XETHZUSD":{"price":"3232.80000","change":"-0.13"},"SOLUSD":{"price":"137.08000","change":"0.47"}},"recentTrades":[{"id":1,"tradeId":"AUTO-1765422016638","pair":"BTC/USD","type":"buy","price":"89980.90000000","amount":"0.00033063","status":"filled","krakenOrderId":"ORHROD-QTP6E-VNPGCR","executedAt":"2025-12-11T03:00:16.638Z","createdAt":"2025-12-11T03:00:16.640Z"}]}
./attached_assets/Pasted-Pr-xima-mejora-que-quiero-implementar-control-de-exposi_1765495490460.txt:11:- Exposici√≥n por par: suma del nominal en USD de todas las posiciones abiertas en ese par (amount * entryPrice).
./attached_assets/Pasted-Pr-xima-mejora-que-quiero-implementar-control-de-exposi_1765495490460.txt:45:- No quiero que se cambie la l√≥gica de trading base (estrategias, SL, TP, trailing, l√≠mite diario), solo a√±adir esta capa de validaci√≥n ANTES de enviar la orden a Kraken.
./attached_assets/Pasted-Pr-xima-mejora-que-quiero-implementar-control-de-exposi_1765495463567.txt:11:- Exposici√≥n por par: suma del nominal en USD de todas las posiciones abiertas en ese par (amount * entryPrice).
./attached_assets/Pasted-Pr-xima-mejora-que-quiero-implementar-control-de-exposi_1765495463567.txt:45:- No quiero que se cambie la l√≥gica de trading base (estrategias, SL, TP, trailing, l√≠mite diario), solo a√±adir esta capa de validaci√≥n ANTES de enviar la orden a Kraken.
./attached_assets/Pasted-Sigue-habiendo-incoherencias-entre-el-PANEL-y-la-pesta-_1765421325577.txt:10:  - La estrategia y el riesgo que se muestran en el PANEL deben venir SIEMPRE de la configuraci√≥n real guardada en la base de datos (lo mismo que devuelve `/api/config`).
./attached_assets/Pasted-Sigue-habiendo-incoherencias-entre-el-PANEL-y-la-pesta-_1765421325577.txt:11:  - La √∫nica pantalla donde se puede cambiar estrategia, riesgo, pares, modo real, etc. debe ser la pesta√±a **Estrategias**.
./attached_assets/Pasted-Sigue-habiendo-incoherencias-entre-el-PANEL-y-la-pesta-_1765421325577.txt:15:- El PANEL no tenga estado propio ni ‚Äúvalores por defecto‚Äù para estrategia/riesgo.
./attached_assets/Pasted-Sigue-habiendo-incoherencias-entre-el-PANEL-y-la-pesta-_1765421325577.txt:49:- El PANEL debe ser un ‚ÄúDashboard de lectura‚Äù: mostrar estrategia, riesgo, pares, estado del bot, etc., SIEMPRE leyendo de la configuraci√≥n real.
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582329127.txt:22:2) Pares distintos entre Estrategias y Dashboard (probable hardcode)
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582329127.txt:42:- /estado ‚Üí estado del bot, estrategia, riesgo, pares activos.
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582329127.txt:44:- /config ‚Üí SL, TP, trailing, exposici√≥n.
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582329127.txt:100:- No tocar estrategias ni ejecuci√≥n.
./attached_assets/Pasted-ANTES-DE-TOCAR-NADA-VERIFICACI-N-SMART-GUARD-NO-CAMBIOS_1766045993569.txt:1:ANTES DE TOCAR NADA ‚Äî VERIFICACI√ìN SMART_GUARD (NO CAMBIOS A√öN)
./attached_assets/Pasted-ANTES-DE-TOCAR-NADA-VERIFICACI-N-SMART-GUARD-NO-CAMBIOS_1766045993569.txt:3:Necesito que verifiques en el c√≥digo si YA est√° implementada (y d√≥nde) la l√≥gica de entrada SMART_GUARD con estas reglas, para evitar conflictos y duplicados.
./attached_assets/Pasted-SMART-GUARD-BLOQUE-COMPLETO-REGLAS-DE-ENTRADA-L-GICA-CL_1766045961431.txt:1:SMART_GUARD ‚Äî BLOQUE COMPLETO (REGLAS DE ENTRADA + L√ìGICA CLARA)
./attached_assets/Pasted-SMART-GUARD-BLOQUE-COMPLETO-REGLAS-DE-ENTRADA-L-GICA-CL_1766045961431.txt:17:REGLA PRINCIPAL (ENTRADAS SMART_GUARD)
./attached_assets/Pasted-SMART-GUARD-BLOQUE-COMPLETO-REGLAS-DE-ENTRADA-L-GICA-CL_1766045961431.txt:18:1) Calcular orderUsd de forma normal para SMART_GUARD (ej: orderUsd = usdDisponible * 0.95 o lo que aplique)
./attached_assets/Pasted-PRUEBA-VERIFICACI-N-SMART-GUARD-sin-operar-a-ciegas-OBJ_1766015914747.txt:1:PRUEBA / VERIFICACI√ìN SMART_GUARD (sin ‚Äúoperar a ciegas‚Äù)
./attached_assets/Pasted-PRUEBA-VERIFICACI-N-SMART-GUARD-sin-operar-a-ciegas-OBJ_1766015914747.txt:19:- positionMode = SMART_GUARD
./attached_assets/Pasted-PRUEBA-VERIFICACI-N-SMART-GUARD-sin-operar-a-ciegas-OBJ_1766015914747.txt:26:  ‚ÄúSMART_GUARD BTC/USD: No entro ‚Äî m√≠nimo $1000, disponible $X‚Äù
./attached_assets/Pasted-PRUEBA-VERIFICACI-N-SMART-GUARD-sin-operar-a-ciegas-OBJ_1766015914747.txt:38:  ‚ÄúSMART_GUARD BTC/USD: Entrada reducida ‚Äî usando $X disponibles (m√≠nimo $200)‚Äù
./attached_assets/Pasted-PRUEBA-VERIFICACI-N-SMART-GUARD-sin-operar-a-ciegas-OBJ_1766015914747.txt:52:   - entry_mode = 'SMART_GUARD'
./attached_assets/Pasted-PRUEBA-VERIFICACI-N-SMART-GUARD-sin-operar-a-ciegas-OBJ_1766015914747.txt:61:3) 1 query de DB (resultado) mostrando entry_mode + config_snapshot_json para una posici√≥n SMART_GUARD
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:1:INSTRUCCIONES PARA REPLIT ‚Äî IMPLEMENTAR 3 PENDIENTES SMART_GUARD (SIN CAMBIAR LO YA HECHO)
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:4:Completar SMART_GUARD con:
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:18:- Si el bot detecta se√±al BUY para un par en SMART_GUARD:
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:22:      entryUsd = min( usdDisponibleParaEntrar, sgHardMaxEntryUsd (si existe), tama√±o calculado actual (si lo manten√©is) )
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:29:  "SMART_GUARD BTC/USD: No entro ‚Äî m√≠nimo por operaci√≥n 100 USD, disponible 43 USD"
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:68:- Si existe sgPairOverrides[pair], debe sobreescribir SOLO los par√°metros de SMART_GUARD para ese par:
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:87:- ‚ÄúDistancia del stop din√°mico (%)‚Äù
./attached_assets/Pasted-INSTRUCCIONES-PARA-REPLIT-IMPLEMENTAR-3-PENDIENTES-SMAR_1766015048250.txt:88:- ‚ÄúPaso m√≠nimo del stop (%)‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:1:CHECKLIST SMART_GUARD (3 FASES) + INSTRUCCIONES PARA QUE REPLIT LO VERIFIQUE
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:15:-- entry_mode (text)
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:20:[ ] 1.2 Al abrir posici√≥n: se guarda entry_mode="SMART_GUARD"
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:24:  ‚ÄúOPEN_POSITION saved entry_mode=SMART_GUARD‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:27:SELECT id, pair, entry_mode
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:32:‚úÖ si las nuevas salen con entry_mode=SMART_GUARD
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:36:SELECT id, pair, entry_mode, jsonb_typeof(config_snapshot_json) AS t, config_snapshot_json
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:41:‚úÖ si t='object' y contiene campos Smart Guard (m√≠nimo, BE, trailing, etc.)
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:55:FASE 2 ‚Äî L√≥gica SMART_GUARD (entrada m√≠nima + salida inteligente)
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:58:[ ] 2.1 El panel tiene modo SMART_GUARD en ‚ÄúModo de posici√≥n‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:60:- Captura del UI donde se ve ‚ÄúSINGLE / DCA / SMART_GUARD‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:81:  openPositions.get(pair) bloquea re-entrada en el mismo par para SMART_GUARD
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:92:  ‚ÄúBE activado: ETH/USD ‚Äî ganancia=2.1% ‚Üí stop a entry + 0.45% (comisiones)‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:95:[ ] 2.5 Stop din√°mico (trailing) con: empieza, distancia, pasos, y ‚Äúsolo ajusta a favor‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:98:  - ‚ÄúActivar stop din√°mico‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:103:- En c√≥digo hay ‚Äúratchet‚Äù: nuevoStop = max(stopActual, stopCalculado)
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:107:  ‚ÄúTRAIL: BTC/USD ‚Äî stop sube de 1.90 a 1.93‚Äù
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:122:  signal + motivo + saldo disponible + por qu√© NO entra
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:149:1) Poner modo SMART_GUARD.
./attached_assets/Pasted-CHECKLIST-SMART-GUARD-3-FASES-INSTRUCCIONES-PARA-QUE-RE_1766014654282.txt:152:4) Abrir una posici√≥n nueva ‚Üí comprobar en DB entry_mode + snapshot.
./attached_assets/Pasted-Quiero-que-el-bot-tenga-en-cuenta-SIEMPRE-las-comisione_1765646363950.txt:22:Para cada operaci√≥n cerrada (o para cada round-trip si as√≠ lo ten√©is modelado), quiero ver en el hist√≥rico:
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:1:S√ç. PRUEBA ESTAS FUNCIONALIDADES ESPEC√çFICAS (SMART_GUARD + overrides por par + alertas):
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:9:- Forzar un escenario (o usar /api/test/signal en DEV) para que:
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:12:     - meta debe incluir: pair, lotId, entryPrice, currentPrice, stopPriceNuevo, profitPct, env, instanceId
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:15:  C) Trailing actualice stop (solo si mejora y cumple sgTrailStepPct) => evento + Telegram con throttle:
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:17:     - verificar que NO manda mensajes si no mejora el stop
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:23:  - los updates de trailing no spamean (throttle)
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:41:- La 3¬™ BUY => TRADE_SKIPPED reason=SMART_GUARD_MAX_LOTS_REACHED
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766087769696.txt:59:y 2 ejemplos de Telegram (1 activaci√≥n y 1 trailing update) con prefijo de entorno.
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:1:S√ç. PRUEBA ESTAS FUNCIONALIDADES ESPEC√çFICAS (SMART_GUARD + overrides por par + alertas):
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:9:- Forzar un escenario (o usar /api/test/signal en DEV) para que:
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:12:     - meta debe incluir: pair, lotId, entryPrice, currentPrice, stopPriceNuevo, profitPct, env, instanceId
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:15:  C) Trailing actualice stop (solo si mejora y cumple sgTrailStepPct) => evento + Telegram con throttle:
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:17:     - verificar que NO manda mensajes si no mejora el stop
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:23:  - los updates de trailing no spamean (throttle)
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:41:- La 3¬™ BUY => TRADE_SKIPPED reason=SMART_GUARD_MAX_LOTS_REACHED
./attached_assets/Pasted-S-PRUEBA-ESTAS-FUNCIONALIDADES-ESPEC-FICAS-SMART-GUARD-_1766086957413.txt:59:y 2 ejemplos de Telegram (1 activaci√≥n y 1 trailing update) con prefijo de entorno.
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:7:- Trailing (sgTrailingActivated pasa de false‚Üítrue) y cuando se actualiza el stop (sgCurrentStopPrice mejora)
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:13:   - Updates stop: solo si mejora y supera sgTrailStepPct (ya existe) + no m√°s de 1 msg cada X min (configurable)
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:16:   - incluir pair, lote (lotId corto), acci√≥n, nuevo stop, trigger (%profit), motivo
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:20:   - Incluir meta con: pair, lotId, entryPrice, currentPrice, stopPrice, profitPct, env, instanceId
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:23:- Activar BE/trailing/scale-out genera 1 evento + 1 Telegram (sin repetici√≥n).
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:24:- Update de stop genera mensaje solo cuando mejora y pasa el step + throttle.
./attached_assets/Pasted-APROBADO-implementar-pendientes-con-prioridad-y-alcance_1766086381251.txt:59:- DCA dentro de SMART_GUARD
./attached_assets/Pasted-CIERRE-Y-VERIFICACI-N-FINAL-OBLIGATORIO-2-AJUSTES-RECOM_1766078147442.txt:7:1) /api/test/signal (DEV/DRY_RUN)
./attached_assets/Pasted-CIERRE-Y-VERIFICACI-N-FINAL-OBLIGATORIO-2-AJUSTES-RECOM_1766078147442.txt:15:     => 2 PROCEED y 3¬™ TRADE_SKIPPED reason=SMART_GUARD_MAX_LOTS_REACHED
./attached_assets/Pasted-CIERRE-Y-VERIFICACI-N-FINAL-OBLIGATORIO-2-AJUSTES-RECOM_1766078147442.txt:34:  - mostrar claramente L1/L2 (o lotId corto), openedMode/entryMode, qtyRemaining, entryPrice
./attached_assets/Pasted-CIERRE-Y-VERIFICACI-N-FINAL-OBLIGATORIO-2-AJUSTES-RECOM_1766078147442.txt:42:  SMART_GUARD_MAX_LOTS_REACHED -> "M√°ximo de lotes alcanzado"
./attached_assets/Pasted-CIERRE-Y-VERIFICACI-N-FINAL-OBLIGATORIO-2-AJUSTES-RECOM_1766078147442.txt:52:- Confirmaci√≥n expl√≠cita: /api/test/signal est√° bloqueado en NAS/PROD.
./attached_assets/Pasted-IMPORTANTE-ANTES-DE-HACER-NADA-NUEVO-VERIFICA-EL-C-DIGO_1766074427160.txt:15:H) UI Modo de Posici√≥n (selector SINGLE/DCA/SMART_GUARD)
./attached_assets/Pasted-IMPORTANTE-ANTES-DE-HACER-NADA-NUEVO-VERIFICA-EL-C-DIGO_1766074427160.txt:16:A) 2 slots por par (sgMaxOpenLotsPerPair) SOLO en SMART_GUARD
./attached_assets/Pasted-IMPORTANTE-ANTES-DE-HACER-NADA-NUEVO-VERIFICA-EL-C-DIGO_1766074427160.txt:23:+ Endpoint de test: POST /api/test/signal (solo DEV/DRY_RUN)
./attached_assets/Pasted-IMPORTANTE-ANTES-DE-HACER-NADA-NUEVO-VERIFICA-EL-C-DIGO_1766074427160.txt:30:- Paso 1: Endpoint /api/test/signal (solo REPLIT/DEV, DRY_RUN) para probar SMART_GUARD sin depender del mercado.
./attached_assets/Pasted-IMPORTANTE-ANTES-DE-HACER-NADA-NUEVO-VERIFICA-EL-C-DIGO_1766074427160.txt:40:  - SMART_GUARD_POSITION_EXISTS
./attached_assets/Pasted-IMPORTANTE-ANTES-DE-HACER-NADA-NUEVO-VERIFICA-EL-C-DIGO_1766074427160.txt:41:  - SMART_GUARD_MAX_LOTS_REACHED
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:1:OBJETIVO (SMART_GUARD)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:2:Mejorar SMART_GUARD para que:
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:3:1) Permita hasta 2 posiciones/lotes abiertos por PAR (solo pares USD) EXCLUSIVAMENTE en SMART_GUARD.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:9:5) (NUEVO) En la pesta√±a ‚ÄúEstrategia‚Äù, a√±adir un selector/interruptores para el ‚ÄúModo de posici√≥n‚Äù (SINGLE / DCA / SMART_GUARD) y que quede claro cu√°l est√° activo y c√≥mo afecta al comportamiento.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:13:  - d√≥nde se decide el modo por par (SMART_GUARD/SINGLE/DCA)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:19:H) (NUEVO) UI ‚ÄúMODO DE POSICI√ìN‚Äù EN PESTA√ëA ESTRATEGIA (SINGLE / DCA / SMART_GUARD)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:23:    - SINGLE | DCA | SMART_GUARD
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:28:  - SMART_GUARD: reglas Smart Guard (m√≠nimos, slots, bloqueo por posici√≥n, etc.)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:33:  - positionMode = "SINGLE" | "DCA" | "SMART_GUARD"
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:34:- Si el sistema ya guarda estrategia por par, respetarlo; si es global, aplicarlo globalmente.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:43:- Si el usuario activa SMART_GUARD:
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:55:A) 2 POSICIONES/L0TES SOLO EN SMART_GUARD (SLOTS)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:58:   - Este par√°metro SOLO se respeta si strategy/mode del par es SMART_GUARD.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:64:     - reason: SMART_GUARD_MAX_LOTS_REACHED
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:70:   - strategy="SMART_GUARD"
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:71:   - openedMode="SMART_GUARD" (y mantener el campo para auditor√≠a futura)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:72:   - lotId, entryTxid/orderId, entryTs, entryQty, entryPrice, entryFeeUsd
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:77:   - "Modo apertura: SMART_GUARD"
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:79:   - qty restante, entry, PnL realizado (si hay parciales), tiempo abierto
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:82:   - pair, strategy, openedMode, lotId, env, instanceId
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:86:1) M√≠nimo configurable por orden (SMART_GUARD)
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:91:- if strategy==SMART_GUARD && !sgAllowUnderMin && orderUsdFinal < sgMinEntryUsd:
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:136:- Por defecto, EXCLUIR manuales del entrenamiento del modelo (para no contaminar).
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:148:1) SMART_GUARD con sgMaxOpenLotsPerPair=2:
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:150:   - 3¬™ BUY => TRADE_SKIPPED SMART_GUARD_MAX_LOTS_REACHED
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:158:   - Cambiar SINGLE/DCA/SMART_GUARD y comprobar /api/config + evento CONFIG_CHANGED + UI ‚ÄúActivo ahora‚Äù.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:161:- En SMART_GUARD, nunca se ejecuta/simula una BUY < sgMinEntryUsd si allowUnderMin=false.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:162:- Las 2 posiciones por par solo existen en SMART_GUARD.
./attached_assets/Pasted-OBJETIVO-SMART-GUARD-Mejorar-SMART-GUARD-para-que-1-Per_1766074063219.txt:164:- El cierre manual funciona, queda trazado y no entrena el modelo por defecto.
./attached_assets/Pasted-REPLIT-CAMBIO-SOLO-A-PARTIR-DE-AHORA-COMPATIBILIDAD-CON_1766012614654.txt:7:- entry_mode TEXT NULL
./attached_assets/Pasted-REPLIT-CAMBIO-SOLO-A-PARTIR-DE-AHORA-COMPATIBILIDAD-CON_1766012614654.txt:11:- Guardar entry_mode (modo actual del panel / o el modo nuevo)
./attached_assets/Pasted-REPLIT-CAMBIO-SOLO-A-PARTIR-DE-AHORA-COMPATIBILIDAD-CON_1766012614654.txt:12:- Guardar config_snapshot_json (par√°metros efectivos usados al entrar: SL/TP/trailing + overrides por par + lo que aplique)
./attached_assets/Pasted-REPLIT-CAMBIO-SOLO-A-PARTIR-DE-AHORA-COMPATIBILIDAD-CON_1766012614654.txt:26:- entry_mode
./attached_assets/Pasted-REPLIT-CAMBIO-SOLO-A-PARTIR-DE-AHORA-COMPATIBILIDAD-CON_1766012614654.txt:27:- snapshot (o un resumen de snapshot: SL/TP/trailing/‚Ä¶)
./attached_assets/Pasted-REPLIT-CAMBIO-SOLO-A-PARTIR-DE-AHORA-COMPATIBILIDAD-CON_1766012614654.txt:29:- pair, timestamps, fees, qty, entryPrice, exitPrice, pnl, holdTime
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:2:A√±adir un 3er modo en ‚ÄúModo de posici√≥n‚Äù llamado: SMART_GUARD
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:11:- SMART_GUARD  ‚Üí ‚ÄúEntrada m√≠nima + protecci√≥n de comisiones + stop que se ajusta a favor‚Äù
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:13:Cuando el usuario elige SMART_GUARD, mostrar esta secci√≥n de ajustes (SIN tecnicismos):
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:29:- ‚ÄúActivar stop que se ajusta a favor‚Äù               [default: ON]
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:33:- ‚ÄúNo bajar nunca el stop (solo mejora)‚Äù             [default: ON]
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:38:  Nota UI: ‚ÄúSi esto est√° ON, puede cerrar antes que el stop ajustable.‚Äù
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:52:- ‚ÄúEmpezar stop ajustable a ( % )‚Äù
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:59:Renombrar prefijo BOT1_ ‚Üí SG_ (SMART_GUARD)
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:62:POSITION_MODE="SMART_GUARD"
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:76:# STOP AJUSTABLE A FAVOR (trailing)
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:117:  2) Si SG_TWO_STEP_EXIT_ENABLED=true y ‚Äúexcepcional‚Äù ‚Üí vende una parte en STEP1; el resto lo gestiona el stop ajustable.
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:118:  3) Si no, el stop ajustable se encarga de la salida.
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:119:- ‚ÄúNo bajar nunca el stop‚Äù (SG_STOP_ONLY_IMPROVES=true): solo se mueve a favor para proteger ganancias (evita retroceder y ‚Äúdarle aire‚Äù al precio en contra).
./attached_assets/Pasted-OBJETIVO-A-adir-un-3er-modo-en-Modo-de-posici-n-llamado_1766011281281.txt:121:LISTO PARA REPLIT: implementar SMART_GUARD en el dropdown ‚ÄúModo de posici√≥n‚Äù + secci√≥n de ajustes con textos claros (UI) y estas claves internas (SG_*).
./attached_assets/Pasted-REPLIT-IMPLEMENTAR-MONITOR-TIPO-TELE-EVENTOS-TERMINAL-L_1765838850977.txt:9:  1) EVENTOS (WS /ws/events) ‚Üí trades/stop-loss/errores/eventos del bot
./attached_assets/Pasted-REPLIT-A-ADIR-LOGS-DE-ESCANEO-DE-MERCADO-EN-EL-MONITOR-_1765836817150.txt:22:    - signal: BUY/SELL/NONE
./attached_assets/Pasted-REPLIT-A-ADIR-LOGS-DE-ESCANEO-DE-MERCADO-EN-EL-MONITOR-_1765836817150.txt:29:- Solo si signal=BUY/SELL y NO se ejecuta.
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:1:e":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:2:kraken-bot-app  | 9:17:07 PM [express] GET /api/events 304 in 2ms :: [{"id":336,"timestamp":"2025-12-15T21:09:02.517Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":[],"balanceUsd":418.9089,"openPositions":1}},{"id":335,"timestamp":"2025-12-15T21:09:00.898Z","level":"INFO","type":"BOT_STOPPED","message":"Motor de trading detenido","meta":null},{"id":334,"timestamp":"2025-12-15T19:48:52.935Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:3:kraken-bot-app  | 9:17:10 PM [express] GET /api/dashboard 200 in 911ms :: {"krakenConnected":true,"telegramConnected":true,"botActive":true,"strategy":"momentum","activePairs":["BTC/USD","ETH/USD","SOL/USD","XRP/USD","TON/USD"],"balances":{"EUR.HOLD":"0.0000","SOL":"0.0193389000","TON":"0.000030","USDC":"0.00000000","XETH":"0.0000698100","XXBT":"0.0005778908","XXRP":"0.00000000","ZEUR":"0.0000","ZUSD":"418.9089"},"prices":{"XXBTZUSD":{"price":"85704.90000","change":"-2.79"},"XETHZUSD":{"price":"2925.54000","change":"-4.50"},"SOLUSD":{"price":"125.11000","change":"-3.30"},"XXRPZUSD":{"price":"1.88408000","change":"-4.79"},"TONUSD":{"price":"1.4710000","change":"-5.22"}},"recentTrades":[{"id":154,"tradeId":"AUTO-1765821081580","pair":"ETH/USD","type":"sell","price":"2939.49000000","amount":"0.01526598","status":"filled","krakenOrderId":"OMQJJG-JRLPO-GMWYF2","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T17:51:21.580Z","createdAt":"2025-12-15T17:51:21.580Z"},{"id":153,"tradeId":"AUTO-1765817481481","pair":"ETH/BTC","type":"sell","price":"0.03452000","amount":"0.01533578","status":"filled","krakenOrderId":"OZDV5I-QLHX7-QII4WQ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T16:51:21.481Z","createdAt":"2025-12-15T16:51:21.482Z"},{"id":152,"tradeId":"AUTO-1765816671103","pair":"TON/USD","type":"sell","price":"1.48200000","amount":"64.61073194","status":"filled","krakenOrderId":"OWRANE-T3DQ4-MKQTUN","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T16:37:51.103Z","createdAt":"2025-12-15T16:37:51.104Z"},{"id":151,"tradeId":"AUTO-1765809279737","pair":"SOL/USD","type":"buy","price":"132.49000000","amount":"0.17161598","status":"filled","krakenOrderId":"OW2Z3G-53JHC-B52L2V","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T14:34:39.737Z","createdAt":"2025-12-15T14:34:39.737Z"},{"id":150,"tradeId":"AUTO-1765808109771","pair":"XRP/USD","type":"sell","price":"1.97607000","amount":"17.87573535","status":"filled","krakenOrderId":"OLKMQ4-3ZNQU-CHXHBI","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T14:15:09.771Z","createdAt":"2025-12-15T14:15:09.772Z"},{"id":149,"tradeId":"AUTO-1765803428474","pair":"TON/USD","type":"buy","price":"1.57700000","amount":"63.41154090","status":"filled","krakenOrderId":"OG2OIA-TRU3P-HG7ER5","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T12:57:08.474Z","createdAt":"2025-12-15T12:57:08.475Z"},{"id":148,"tradeId":"AUTO-1765801537969","pair":"XRP/USD","type":"sell","price":"1.98648000","amount":"35.75147070","status":"filled","krakenOrderId":"OTXQVR-MLNZR-2COHTK","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T12:25:37.969Z","createdAt":"2025-12-15T12:25:37.970Z"},{"id":147,"tradeId":"AUTO-1765801268100","pair":"SOL/USD","type":"sell","price":"132.13000000","amount":"0.10903925","status":"filled","krakenOrderId":"O3J447-UUWV3-ZUCWFJ","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T12:21:08.100Z","createdAt":"2025-12-15T12:21:08.100Z"},{"id":146,"tradeId":"AUTO-1765796857592","pair":"SOL/USD","type":"sell","price":"132.65000000","amount":"0.21807851","status":"filled","krakenOrderId":"OQMLXG-2KIXO-4XYFJH","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T11:07:37.592Z","createdAt":"2025-12-15T11:07:37.593Z"},{"id":145,"tradeId":"AUTO-1765793466653","pair":"XRP/USD","type":"buy","price":"1.99608000","amount":"50.09819246","status":"filled","krakenOrderId":"OXJXN7-UGSZM-EFNTNG","entryPrice":null,"realizedPnlUsd":null,"realizedPnlPct":null,"executedAt":"2025-12-15T10:11:06.653Z","createdAt":"2025-12-15T10:11:06.654Z"}]}
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:4:kraken-bot-app  | 9:17:12 PM [express] GET /api/events 304 in 2ms :: [{"id":336,"timestamp":"2025-12-15T21:09:02.517Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":[],"balanceUsd":418.9089,"openPositions":1}},{"id":335,"timestamp":"2025-12-15T21:09:00.898Z","level":"INFO","type":"BOT_STOPPED","message":"Motor de trading detenido","meta":null},{"id":334,"timestamp":"2025-12-15T19:48:52.935Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:5:kraken-bot-app  | 9:17:17 PM [express] GET /api/events 304 in 3ms :: [{"id":336,"timestamp":"2025-12-15T21:09:02.517Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":[],"balanceUsd":418.9089,"openPositions":1}},{"id":335,"timestamp":"2025-12-15T21:09:00.898Z","level":"INFO","type":"BOT_STOPPED","message":"Motor de trading detenido","meta":null},{"id":334,"timestamp":"2025-12-15T19:48:52.935Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:6:kraken-bot-app  | 9:17:22 PM [express] GET /api/events 304 in 3ms :: [{"id":336,"timestamp":"2025-12-15T21:09:02.517Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":[],"balanceUsd":418.9089,"openPositions":1}},{"id":335,"timestamp":"2025-12-15T21:09:00.898Z","level":"INFO","type":"BOT_STOPPED","message":"Motor de trading detenido","meta":null},{"id":334,"timestamp":"2025-12-15T19:48:52.935Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:7:kraken-bot-app  | 9:17:27 PM [express] GET /api/events 304 in 4ms :: [{"id":336,"timestamp":"2025-12-15T21:09:02.517Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":[],"balanceUsd":418.9089,"openPositions":1}},{"id":335,"timestamp":"2025-12-15T21:09:00.898Z","level":"INFO","type":"BOT_STOPPED","message":"Motor de trading detenido","meta":null},{"id":334,"timestamp":"2025-12-15T19:48:52.935Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-e-2928-25768668-price-0-03415-error-EOrder-Insufficient_1765833575237.txt:11:kraken-bot-app  | 9:18:28 PM [express] GET /api/events 304 in 14ms :: [{"id":336,"timestamp":"2025-12-15T21:09:02.517Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":[],"balanceUsd":418.9089,"openPositions":1}},{"id":335,"timestamp":"2025-12-15T21:09:00.898Z","level":"INFO","type":"BOT_STOPPED","message":"Motor de trading detenido","meta":null},{"id":334,"timestamp":"2025-12-15T19:48:52.935Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2928.25768668","price":0.03415,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":333,"timestamp":"2025-12-15T18:34:22.085Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en XRP/USD","meta":{"pair":"XRP/USD","registeredAmount":17.87573535,"realBalance":0,"newUsdBalance":418.9089}},{"id":332,"timestamp":"2025-12-15T18:34:21.735Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en XRP/USD","meta":{"pair":"XRP/USD","entryPrice":1.99636367,"currentPrice":1.8764,"priceChange":-6.00910905175909,"stopLossPercent":6,"cooldownMinutes":30}},{"id":331,"timestamp":"2025-12-15T18:21:52.308Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":330,"timestamp":"2025-12-15T18:21:51.871Z","level":"WARN","type":"ORPHAN_POSITION_CLEANED","message":"Posici√≥n hu√©rfana eliminada en SOL/USD","meta":{"pair":"SOL/USD","registeredAmount":0.28065523,"realBalance":0.0193389,"newUsdBalance":418.9089}},{"id":329,"timestamp":"2025-12-15T18:21:51.647Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en SOL/USD","meta":{"pair":"SOL/USD","entryPrice":132.42028557,"currentPrice":124.38,"priceChange":-6.0717929548262095,"stopLossPercent":6,"cooldownMinutes":30}},{"id":328,"timestamp":"2025-12-15T18:19:22.096Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2924.83182217","price":0.03419,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":327,"timestamp":"2025-12-15T17:51:21.840Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/USD","meta":{"pair":"ETH/USD","type":"sell","volume":0.01526598,"price":2939.49,"totalUsd":44.8741955502,"txid":"OMQJJG-JRLPO-GMWYF2","reason":"Stop-Loss activado (-6.19% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":326,"timestamp":"2025-12-15T17:51:21.449Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en ETH/USD","meta":{"pair":"ETH/USD","entryPrice":3133.48931668,"currentPrice":2939.49,"priceChange":-6.19115934582303,"stopLossPercent":6,"cooldownMinutes":30}},{"id":325,"timestamp":"2025-12-15T17:50:52.108Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2909.51411114","price":0.03437,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":324,"timestamp":"2025-12-15T17:29:52.051Z","level":"ERROR","type":"TRADE_FAILED","message":"Error ejecutando buy en ETH/BTC","meta":{"pair":"ETH/BTC","type":"buy","volume":"2898.55072464","price":0.0345,"error":"[\"EOrder:Insufficient funds\"]"}},{"id":323,"timestamp":"2025-12-15T16:51:21.727Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en ETH/BTC","meta":{"pair":"ETH/BTC","type":"sell","volume":0.01533578,"price":0.03452,"totalUsd":0.0005293911256000001,"txid":"OZDV5I-QLHX7-QII4WQ","reason":"Momentum bajista: RSI sobrecomprado (70), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":322,"timestamp":"2025-12-15T16:37:51.416Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"sell","volume":64.61073194,"price":1.482,"totalUsd":95.75310473507999,"txid":"OWRANE-T3DQ4-MKQTUN","reason":"Stop-Loss activado (-6.01% < -6%)","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":321,"timestamp":"2025-12-15T16:37:50.958Z","level":"WARN","type":"STOP_LOSS_HIT","message":"Stop-Loss activado en TON/USD","meta":{"pair":"TON/USD","entryPrice":1.57680737,"currentPrice":1.482,"priceChange":-6.012615859348759,"stopLossPercent":6,"cooldownMinutes":30}},{"id":320,"timestamp":"2025-12-15T15:37:50.565Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":319,"timestamp":"2025-12-15T15:37:50.366Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":318,"timestamp":"2025-12-15T15:23:15.489Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":317,"timestamp":"2025-12-15T15:23:15.228Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":316,"timestamp":"2025-12-15T15:17:50.428Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":278.9015}},{"id":315,"timestamp":"2025-12-15T15:17:50.125Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":278.9015,"openPositions":5}},{"id":314,"timestamp":"2025-12-15T14:35:45.291Z","level":"INFO","type":"DAILY_LIMIT_RESET","message":"Nuevo d√≠a de trading: 2025-12-15","meta":{"date":"2025-12-15","previousDayPnL":0,"startBalance":216.0935}},{"id":313,"timestamp":"2025-12-15T14:35:45.054Z","level":"INFO","type":"BOT_STARTED","message":"Motor de trading iniciado","meta":{"strategy":"momentum","riskLevel":"high","activePairs":["XRP/USD","BTC/USD","SOL/USD","TON/USD","ETH/USD"],"balanceUsd":216.0935,"openPositions":5}},{"id":312,"timestamp":"2025-12-15T14:34:40.045Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.55,"cooldownMinutes":15}},{"id":311,"timestamp":"2025-12-15T14:34:39.983Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"buy","volume":0.17161598,"price":132.49,"totalUsd":22.737401190200003,"txid":"OW2Z3G-53JHC-B52L2V","reason":"Momentum alcista: RSI sobrevendido (29), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":310,"timestamp":"2025-12-15T14:34:39.607Z","level":"INFO","type":"TRADE_ADJUSTED","message":"Trade ajustado por l√≠mite de exposici√≥n","meta":{"pair":"SOL/USD","originalAmountUsd":100,"adjustedAmountUsd":22.737401064582656,"maxPairAvailable":105.02955548608192,"maxTotalAvailable":22.737401064582656,"riskPerTradePct":45}},{"id":309,"timestamp":"2025-12-15T14:15:10.032Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":17.87573535,"price":1.97607,"totalUsd":35.3237043530745,"txid":"OLKMQ4-3ZNQU-CHXHBI","reason":"Momentum bajista: RSI sobrecomprado (71), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bearish, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":308,"timestamp":"2025-12-15T13:52:38.905Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.3704,"cooldownMinutes":15}},{"id":307,"timestamp":"2025-12-15T13:33:38.442Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.93859,"cooldownMinutes":15}},{"id":306,"timestamp":"2025-12-15T13:22:39.340Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.255000000000003,"cooldownMinutes":15}},{"id":305,"timestamp":"2025-12-15T13:22:08.618Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.561,"cooldownMinutes":15}},{"id":304,"timestamp":"2025-12-15T13:18:38.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.368100000000002,"cooldownMinutes":15}},{"id":303,"timestamp":"2025-12-15T12:57:08.731Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en TON/USD","meta":{"pair":"TON/USD","type":"buy","volume":63.4115409,"price":1.577,"totalUsd":99.9999999993,"txid":"OG2OIA-TRU3P-HG7ER5","reason":"Momentum alcista: RSI sobrevendido (0), MACD bajista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":302,"timestamp":"2025-12-15T12:25:38.117Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"sell","volume":35.7514707,"price":1.98648,"totalUsd":71.019581516136,"txid":"OTXQVR-MLNZR-2COHTK","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":301,"timestamp":"2025-12-15T12:21:08.392Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.10903925,"price":132.13,"totalUsd":14.4073561025,"txid":"O3J447-UUWV3-ZUCWFJ","reason":"Momentum bajista: RSI sobrecomprado (74), MACD bajista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: neutral, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":300,"timestamp":"2025-12-15T12:13:37.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.567,"cooldownMinutes":15}},{"id":299,"timestamp":"2025-12-15T12:02:08.904Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5322,"cooldownMinutes":15}},{"id":298,"timestamp":"2025-12-15T11:56:07.742Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.96269,"cooldownMinutes":15}},{"id":297,"timestamp":"2025-12-15T11:40:38.022Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":296,"timestamp":"2025-12-15T11:38:37.776Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.267,"cooldownMinutes":15}},{"id":295,"timestamp":"2025-12-15T11:24:37.431Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.918,"cooldownMinutes":15}},{"id":294,"timestamp":"2025-12-15T11:07:37.729Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade SELL ejecutado en SOL/USD","meta":{"pair":"SOL/USD","type":"sell","volume":0.21807851,"price":132.65,"totalUsd":28.928114351500003,"txid":"OQMLXG-2KIXO-4XYFJH","reason":"Momentum bajista: RSI sobrecomprado (76), MACD alcista, Precio cerca de Bollinger superior | Se√±ales: 4 venta vs 1 compra | MTF: 5m: neutral, 1h: bullish, 4h: neutral","strategyId":"momentum_cycle","timeframe":"cycle"}},{"id":293,"timestamp":"2025-12-15T11:01:37.262Z","level":"INFO","type":"PAIR_COOLDOWN","message":"TON/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"TON/USD","maxAllowed":0,"minRequired":1.572,"cooldownMinutes":15}},{"id":292,"timestamp":"2025-12-15T11:01:07.182Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.98473,"cooldownMinutes":15}},{"id":291,"timestamp":"2025-12-15T10:50:37.430Z","level":"INFO","type":"PAIR_COOLDOWN","message":"SOL/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"SOL/USD","maxAllowed":0,"minRequired":13.243000000000002,"cooldownMinutes":15}},{"id":290,"timestamp":"2025-12-15T10:36:07.052Z","level":"INFO","type":"PAIR_COOLDOWN","message":"XRP/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"XRP/USD","maxAllowed":0,"minRequired":19.9553,"cooldownMinutes":15}},{"id":289,"timestamp":"2025-12-15T10:20:36.987Z","level":"INFO","type":"PAIR_COOLDOWN","message":"ETH/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"ETH/USD","maxAllowed":0,"minRequired":31.5433,"cooldownMinutes":15}},{"id":288,"timestamp":"2025-12-15T10:18:37.234Z","level":"INFO","type":"PAIR_COOLDOWN","message":"BTC/USD en cooldown - sin exposici√≥n disponible","meta":{"pair":"BTC/USD","maxAllowed":0,"minRequired":8.97971,"cooldownMinutes":15}},{"id":287,"timestamp":"2025-12-15T10:11:06.891Z","level":"INFO","type":"TRADE_EXECUTED","message":"Trade BUY ejecutado en XRP/USD","meta":{"pair":"XRP/USD","type":"buy","volume":50.09819246,"price":1.99608,"totalUsd":100.0000000055568,"txid":"OXJXN7-UGSZM-EFNTNG","reason":"Momentum alcista: RSI sobrevendido (30), MACD alcista, Precio cerca de Bollinger inferior | Se√±ales: 4 compra vs 1 venta | MTF: 5m: neutral, 1h: neutral, 4h: bearish","strategyId":"momentum_cycle","timeframe":"cycle"}}]
./attached_assets/Pasted-NO-PUBLIQUES-TODAV-A-QUIERO-VERIFICACI-N-COMPLETA-DE-NO_1765807817718.txt:31:  - aiConfig (modelVersion, lastTrainTs, lastTrainError, metricsJson)
./attached_assets/Pasted-NO-PUBLIQUES-TODAV-A-QUIERO-VERIFICACI-N-COMPLETA-DE-NO_1765807817718.txt:40:  - exitTs > entryTs
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582361270.txt:22:2) Pares distintos entre Estrategias y Dashboard (probable hardcode)
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582361270.txt:42:- /estado ‚Üí estado del bot, estrategia, riesgo, pares activos.
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582361270.txt:44:- /config ‚Üí SL, TP, trailing, exposici√≥n.
./attached_assets/Pasted-Te-paso-un-resumen-nico-con-las-mejoras-que-quiero-que-_1765582361270.txt:100:- No tocar estrategias ni ejecuci√≥n.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:9:     (symbol/pair + estrategia/bot_id + ventana temporal + acumulaci√≥n de cantidad + ordertxid si existe).
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:18:     - stop/take profit si existe.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:22:   - Prohibido incluir precio futuro, m√°ximos/m√≠nimos posteriores, PnL futuro o cualquier dato posterior al entry_time.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:23:   - Guardar un snapshot de features en entry_time.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:28:   - Registrar versi√≥n de modelo y fecha de entrenamiento.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:31:   - Shadow Mode: el modelo predice y se registra, pero NO bloquea trades.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:32:   - Filtro Activo: solo si el modelo cumple umbral configurado (ej. F1/precision).
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:33:   - Registrar decisi√≥n del modelo por trade: score, threshold, decisi√≥n, y raz√≥n.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758690326.txt:58:- Entrenar modelo produce m√©tricas y un artefacto versionado.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:9:     (symbol/pair + estrategia/bot_id + ventana temporal + acumulaci√≥n de cantidad + ordertxid si existe).
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:18:     - stop/take profit si existe.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:22:   - Prohibido incluir precio futuro, m√°ximos/m√≠nimos posteriores, PnL futuro o cualquier dato posterior al entry_time.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:23:   - Guardar un snapshot de features en entry_time.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:28:   - Registrar versi√≥n de modelo y fecha de entrenamiento.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:31:   - Shadow Mode: el modelo predice y se registra, pero NO bloquea trades.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:32:   - Filtro Activo: solo si el modelo cumple umbral configurado (ej. F1/precision).
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:33:   - Registrar decisi√≥n del modelo por trade: score, threshold, decisi√≥n, y raz√≥n.
./attached_assets/Pasted-OBJETIVO-Hacer-el-entrenamiento-de-IA-CONSISTENTE-y-til_1765758500140.txt:58:- Entrenar modelo produce m√©tricas y un artefacto versionado.
./attached_assets/Pasted-CONFIRMACI-N-FINAL-S-confirmo-que-quiero-implementar-el_1765727032212.txt:31:   - Guardado real del modelo y de las m√©tricas
./attached_assets/Pasted-CONFIRMACI-N-FINAL-S-confirmo-que-quiero-implementar-el_1765727032212.txt:63:No actives la IA, no entrenes modelos y no modifiques el trading real
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:12:Implementar el pipeline completo de IA (recolecci√≥n ‚Üí entrenamiento ‚Üí shadow ‚Üí activaci√≥n filtro) con ‚Äúsem√°foro‚Äù simple:
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:14:- Amarillo 200‚Äì299: permitir entrenamiento y shadow (no bloquea)
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:15:- Verde ‚â• 300 + shadow 7 d√≠as positivo: habilitar bot√≥n ‚ÄúActivar IA‚Äù
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:27:- Guardado real del modelo (/data/models/ai_filter.joblib) + status (/data/models/ai_status.json)
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:33:- Se registran decisiones shadow con resultado real posterior
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:34:- Persistencia real: ai_shadow_decisions con:
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:37:  - GET /api/ai/shadow/report?window=7d
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:38:    -> devuelve ‚Äúshadow_pnl_delta‚Äù (mejora neta estimada) y resumen
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:42:- Bypass si no hay modelo o si hay error
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:47:- Eliminar del frontend cualquier modelo no implementado (NO LSTM, NO Transformer).
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:55:  - ‚ÄúIniciar Shadow 7 d√≠as‚Äù (si hay modelo entrenado)
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:56:  - ‚ÄúActivar IA‚Äù (solo si completos ‚â• 300 Y shadow 7 d√≠as positivo)
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:66:- Confirmar que los modelos se guardan y se cargan de rutas reales
./attached_assets/Pasted-IMPORTANTE-OBLIGATORIO-CERO-PLACEHOLDERS-CERO-TEXTO-HAR_1765726764963.txt:67:- Confirmar logs en consola para cada acci√≥n (retrain, shadow start, enable, disable)
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:7:Solo APRUEBA o BLOQUEA trades que ya fueron propuestos por la estrategia t√©cnica.
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:21:- entry_ts, exit_ts, entry_price, exit_price
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:42:- guardar modelo: /data/models/ai_filter.joblib (o formato equivalente)
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:43:- guardar status+metrics: /data/models/ai_filter_status.json (timestamp, n_samples, threshold recomendado, m√©tricas)
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:46:- devolver ‚ÄúNO DATA‚Äù y NO cambiar el modelo vigente.
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:51:- predictApproval(features) ‚Üí { approve: boolean, score: number, threshold: number, reason: string }
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:55:- Si AI_FILTER_ENABLED=true y NO hay modelo ‚Üí bypass + log ‚ÄúNO MODEL‚Äù.
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:56:- Si hay modelo:
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:69:  -> {enabled, model_present, last_train_ts, n_samples, metrics, threshold, last_error}
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:81:- ‚ÄúEstado del modelo‚Äù y ‚Äúprecisi√≥n/m√©tricas‚Äù deben venir de /api/ai/status.
./attached_assets/Pasted-IMPORTANTE-SOLO-PLAN-Y-CAMBIOS-PROPUESTOS-NO-MODIFICAR-_1765725820421.txt:94:- Si el entrenamiento falla, mantener el modelo anterior.
./attached_assets/Pasted-S-procede-con-esas-correcciones-Alcance-estricto-SOLO-l_1765761878925.txt:13:    "message": "Datos insuficientes para entrenar el modelo. Necesitas 300 trades cerrados etiquetados. Actualmente hay <count>.",
./attached_assets/Pasted-S-procede-con-esas-correcciones-Alcance-estricto-SOLO-l_1765761878925.txt:17:- En ese caso NO debe modificar aiConfig (modelVersion, lastTrainTs, metricsJson, lastTrainError).
./attached_assets/Pasted-S-procede-con-esas-correcciones-Alcance-estricto-SOLO-l_1765761878925.txt:31:- Mant√©n ‚Äú√öltimo entrenamiento: Nunca‚Äù si lastTrainRun es null, y ‚ÄúVersi√≥n del modelo: ‚Äî‚Äù si modelVersion es null.
./attached_assets/Pasted-S-procede-con-esas-correcciones-Alcance-estricto-SOLO-l_1765761878925.txt:45:C) Confirmar que aiConfig no cambi√≥ tras el 409 (modelVersion sigue null, lastTrainRun sigue null, lastTrainError sigue null o no se altera).
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:10:- Persistencia de estado del modelo (modelVersion, lastTrainRun, lastTrainError)
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:29:- modelVersion = null
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:32:Dejar implementado un entrenamiento consistente y reproducible usando SOLO trades etiquetados (TRAINING_TRADES cerrados), con split temporal, m√©tricas y versionado de modelo, e integraci√≥n en UI. Importante: NO entrenar hasta alcanzar el umbral (300). El bot√≥n debe estar bloqueado hasta entonces con mensaje claro en castellano.
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:40:  c) entrena modelo y calcula m√©tricas m√≠nimas: accuracy, precision, recall, F1, confusionMatrix
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:41:  d) guarda artefacto del modelo (o pesos/coeficientes) + metadata:
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:42:     - modelVersion (timestamp o hash)
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:55:      "message": "Datos insuficientes para entrenar el modelo. Necesitas 300 trades cerrados etiquetados. Actualmente hay <count>.",
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:59:  - No debe modificar modelVersion ni lastTrainRun en ese caso.
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:61:2) Persistencia de estado del modelo
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:62:- Donde hoy diagnostic devuelve modelVersion=null, debe salir el valor real tras entrenar (cuando se alcance el umbral).
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:63:- Si no hay tabla/config para metadata del modelo, crearla (model_registry o ai_settings), persistente en DB.
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:70:- Bot√≥n ‚ÄúEntrenar modelo‚Äù deshabilitado si labeledTradesCount < 300 y mostrar:
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:74:  - Versi√≥n del modelo: ‚Äú‚Äî‚Äù si es null
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:79:- Features solo con datos disponibles en entry_time (sin datos posteriores).
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:80:- Excluir open trades y trades inv√°lidos (exit_time <= entry_time, qty<=0, precios nulos).
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:93:  - /api/ai/train entrena y devuelve JSON con m√©tricas y modelVersion.
./attached_assets/Pasted-REQUISITO-GLOBAL-OBLIGATORIO-Todos-los-mensajes-visible_1765761755629.txt:94:  - /api/ai/diagnostic muestra lastTrainRun != null, modelVersion != null, lastTrainError == null.
./attached_assets/Pasted-ESTADO-Ya-se-generan-training-trades-trainingTradesTota_1765760010867.txt:6:2) Entrenamiento consistente: entrenar solo con labeledTrades, evitar leakage, versionar modelo y registrar m√©tricas.
./attached_assets/Pasted-ESTADO-Ya-se-generan-training-trades-trainingTradesTota_1765760010867.txt:20:  - persista un ‚Äúmodel_version‚Äù + timestamp lastTrainRun + m√©tricas guardadas.
./attached_assets/Pasted-ESTADO-Ya-se-generan-training-trades-trainingTradesTota_1765760010867.txt:21:- En Settings (Motor IA): bot√≥n ‚ÄúEntrenar modelo‚Äù + mostrar lastTrainRun, model_version y m√©tricas.
./attached_assets/Pasted-ESTADO-Ya-se-generan-training-trades-trainingTradesTota_1765760010867.txt:25:- A√±adir checks de integridad: exit_time > entry_time, qty > 0, precios v√°lidos.
./attached_assets/Pasted-ESTADO-Ya-se-generan-training-trades-trainingTradesTota_1765760010867.txt:35:- El entrenamiento produce m√©tricas y versi√≥n de modelo.
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:43:  lote = { lotId, buyTxid, entryTs, qtyOriginal, qtyRemaining, avgEntryPrice, entryNotional, entryFees, meta }
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:55:        entryFeePart = lote.entryFees * (qtyClosed / lote.qtyOriginal)
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:56:        exitFeePart  = sellFeeTotal * (qtyClosed / qtySellOriginal)
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:58:      - pnlNetPart   = pnlGrossPart - entryFeePart - exitFeePart
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:65:  - entry: entryTs, avgEntryPrice, qtyOriginal, entryFees
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:66:  - exit: exitTs (√∫ltimo sell que completa el lote), avgExitPrice ponderado, exitFees asignadas
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:75:  - si buyTxid es √∫nico por lote, usar buyTxid (+bot_id/strategy si aplica)
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:87:- exitTs > entryTs para lotes cerrados
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:93:Actualizar la Terminal para reflejar el nuevo modelo y evitar confusiones:
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:108:  - lotId, buyTxid, entryTs, qtyOriginal, qtyRemaining, avgEntryPrice, entryFees
./attached_assets/Pasted-OBJETIVO-1-A-adir-el-modo-UNA-POSICI-N-POR-ACTIVO-PAR-u_1765805725805.txt:142:- Terminal refleja el nuevo modelo (modo, lotes, qty abierta FIFO, y cierres trazables).
./attached_assets/Pasted-MODO-SOLO-AUDITOR-A-NO-CAMBIOS-SIN-MI-APROBACI-N-Quiero_1765803061160.txt:16:- Enumera las 3 causas m√°s probables seg√∫n el c√≥digo actual:
./attached_assets/Pasted-MODO-SOLO-AUDITOR-A-NO-CAMBIOS-SIN-MI-APROBACI-N-Quiero_1765803061160.txt:40:- Para cada ejemplo, muestra (solo datos): pair, buyTxid/sellTxid si existen, timestamps, qty, entry/exit, motivo de descarte si aplica.
